<!doctype html><html lang=zh-cn dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.147.3"><meta name=generator content="Relearn 7.6.1+4407b4364ab6f7477f7671fbd20c0494bade40ee"><meta name=description content="SIMDIS SDK SimCore代码库功能分析"><meta name=author content="你的名字"><meta name=twitter:card content="summary"><meta name=twitter:title content="SIMDIS SDK SimCore :: FlitSoft Docs"><meta name=twitter:description content="SIMDIS SDK SimCore代码库功能分析"><meta property="og:url" content="https://hill68.github.io/simu/simdis/simdis-sdk-simcore-v2/index.html"><meta property="og:site_name" content="FlitSoft Docs"><meta property="og:title" content="SIMDIS SDK SimCore :: FlitSoft Docs"><meta property="og:description" content="SIMDIS SDK SimCore代码库功能分析"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="Simulation"><meta property="article:published_time" content="2025-06-18T18:07:50+08:00"><meta property="article:modified_time" content="2025-06-18T18:07:50+08:00"><meta itemprop=name content="SIMDIS SDK SimCore :: FlitSoft Docs"><meta itemprop=description content="SIMDIS SDK SimCore代码库功能分析"><meta itemprop=datePublished content="2025-06-18T18:07:50+08:00"><meta itemprop=dateModified content="2025-06-18T18:07:50+08:00"><meta itemprop=wordCount content="1907"><title>SIMDIS SDK SimCore :: FlitSoft Docs</title>
<link href=/images/logo.png?1750521972 rel=icon type=image/png><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1750521972 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1750521972 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1750521972 rel=stylesheet><link href=/css/theme.min.css?1750521972 rel=stylesheet><link href=/css/format-html.min.css?1750521972 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1750521972 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1750521972 defer></script><script src=/js/lunr/lunr.min.js?1750521972 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1750521972 defer></script><script src=/js/lunr/lunr.multi.min.js?1750521972 defer></script><script src=/js/lunr/lunr.zh.min.js?1750521972 defer></script><script src=/js/search.min.js?1750521972 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/simu/simdis/simdis-sdk-simcore-v2/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://hill68.github.io",window.relearn.contentLangs=["zh"],window.relearn.index_js_url="/searchindex.en.js?1750521972",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["zen-light","zen-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/css/custom.css?1750521972 rel=stylesheet></head><body class="mobile-support html" data-url=/simu/simdis/simdis-sdk-simcore-v2/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#simdis-sdk-simcore代码库功能分析>SIMDIS SDK SimCore代码库功能分析</a></li><li><a href=#一概述>一、概述</a><ul><li><a href=#代码组成>代码组成</a></li><li><a href=#使用场景>使用场景</a></li><li><a href=#编译器要求>编译器要求</a></li><li><a href=#外部依赖>外部依赖</a></li></ul></li><li><a href=#二代码文件功能分析>二、代码文件功能分析</a><ul><li><a href=#1-mathconstantsh>1. MathConstants.h</a></li><li><a href=#2-vec3h>2. Vec3.h</a></li><li><a href=#3-anglehcpp>3. Angle.h/cpp</a></li><li><a href=#4-mathhcpp>4. Math.h/cpp</a></li><li><a href=#5-coordinatesystemhcpp>5. CoordinateSystem.h/cpp</a></li><li><a href=#6-coordinateh>6. Coordinate.h</a></li><li><a href=#7-coordinateconverterhcpp>7. CoordinateConverter.h/cpp</a></li><li><a href=#8-calculationshcpp>8. Calculations.h/cpp</a></li><li><a href=#9-geometryhcpp>9. Geometry.h/cpp</a></li><li><a href=#10-geofencehcpp>10. GeoFence.h/cpp</a></li><li><a href=#11-garshcpp>11. Gars.h/cpp</a></li><li><a href=#12-dcmhcpp>12. Dcm.h/cpp</a></li><li><a href=#13-datumconverthcpp>13. DatumConvert.h/cpp</a></li><li><a href=#14-gogtogeofencehcpp>14. GogToGeoFence.h/cpp</a></li><li><a href=#15-interpolationhcpp>15. Interpolation.h/cpp</a></li><li><a href=#16-magneticvariancehcpp>16. MagneticVariance.h/cpp</a></li><li><a href=#17-mgrshcpp>17. Mgrs.h/cpp</a></li><li><a href=#18-multiframecoordinatehcpp>18. MultiFrameCoordinate.h/cpp</a></li><li><a href=#19-numericalanalysishcpp>19. NumericalAnalysis.h/cpp</a></li><li><a href=#20-randomhcpp>20. Random.h/cpp</a></li><li><a href=#21-squarematrixhcpp>21. SquareMatrix.h/cpp</a></li><li><a href=#22-unitcontexthcpp>22. UnitContext.h/cpp</a></li><li><a href=#23-unitshcpp>23. Units.h/cpp</a></li><li><a href=#24-verticaldatumh>24. VerticalDatum.h</a></li></ul></li><li><a href=#三模块依赖关系图>三、模块依赖关系图</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>FlitSoft Docs</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/simu/index.html><span itemprop=name>Simulation</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/simu/simdis/index.html><span itemprop=name>SIMDIS</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>SIMDIS SDK SimCore</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/simu/simdis/simdis-sdk/index.html title="SIMDIS SDK (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/simu/an-openeaagles-framework-extension-for-hardware-in-the-loop-swarm-simulation-ch/index.html title="HIL Swarm Simulation (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable simu" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=simdis-sdk-simcore>SIMDIS SDK SimCore</h1><h2 id=simdis-sdk-simcore代码库功能分析>SIMDIS SDK SimCore代码库功能分析</h2><h2 id=一概述>一、概述</h2><p>这套 SDK SimCore 代码系统提供了从低层数学运算、插值求根，到高层地理坐标转换、导航航向处理，再到应用层的随机仿真及单位管理的完整功能链。SIMDIS SDK SimCore 能在无人机仿真、舰载武器模拟、地理信息可视化、科学研究等多领域中，提供一套完整且高效的<strong>底层运算＋坐标处理＋应用服务</strong>解决方案。适用于航空航天、仿真可视化、地图测绘、科学计算等多种场景。</p><h3 id=代码组成>代码组成</h3><ol><li><strong>数学与插值工具</strong><ul><li>数学常量和基本运算（Math, Angle）</li><li>3D向量和矩阵运算（Vec3, SquareMatrix, Dcm）</li><li><strong>Interpolation</strong>：提供最近邻、线性、多点、向量及角度插值，并处理周期跳变与时间驱动插值。</li><li><strong>NumericalAnalysis</strong>：实现二分法（Bisection）、割线法（Secant）、二阶 Newton 插值及反向插值算法。</li><li><strong>SquareMatrix</strong>：方阵的构造、单位化、置零、转置、缩放、加法及矩阵乘法，支持元素访问和近似比较。</li></ul></li><li><strong>坐标系统</strong><ul><li>坐标定义和转换（Coordinate, CoordinateConverter）</li><li>特殊坐标系统（GARS）</li><li><strong>MultiFrameCoordinate</strong>：在 LLA（经纬高）与 ECEF（地心地固）等多坐标系间双向转换，支持缓存与懒更新。</li><li><strong>Mgrs</strong>：MGRS ↔ UTM/UPS ↔ 地理坐标的全流程双向转换，含特殊区域（Svalbard/Norway）兼容。</li><li><strong>MagneticVariance</strong>：基于 NOAA 世界磁场模型（WMM）计算地磁偏角，并提供真/磁航向互转。</li><li><strong>VerticalDatum</strong>：枚举不同垂直基准（WGS-84、MSL、用户自定义）。</li></ul></li><li><strong>随机数与数值环境</strong><ul><li><strong>Random</strong>：生成均匀、正态（实/复）、指数、Poisson、几何、二项及离散均匀分布样本，支持全局与手动种子。</li><li><strong>Units</strong>：定义各种物理量单位及其相互转换，提供注册表和查询接口。</li><li><strong>UnitContext</strong>：管理当前应用的单位和显示格式（时间、坐标、角度、距离、速度、磁偏、高程等），可动态修改精度与格式。</li></ul></li><li><strong>几何计算</strong><ul><li>基础几何体和相交测试（Geometry）</li><li>地理围栏（GeoFence）</li></ul></li><li><strong>应用层</strong><ul><li>距离、角度、高度等计算（Calculations）</li><li>磁偏角和垂直基准面转换（DatumConvert）</li><li>多边形转换为地理围栏（GogToGeoFence）</li></ul></li></ol><h3 id=使用场景>使用场景</h3><ol><li><p><strong>航空航天／无人机仿真</strong></p><ul><li>路径规划、姿态平滑、真磁航向转换、传感器噪声注入与多坐标系数据融合。</li></ul></li><li><p><strong>地理信息系统（GIS）与测绘</strong></p><ul><li>MGRS/UTM/UPS 与地理坐标互转、地理围栏判定、GOG 图形转围栏等大规模地图服务。</li></ul></li><li><p><strong>军事与舰船导航</strong></p><ul><li>高精度地磁偏角计算、各种坐标系（NED/ENU/ECEF/ECI）转换、Sodano 测地线计算。</li></ul></li><li><p><strong>科学计算与可视化</strong></p><ul><li>数值根查找（Bisection、Secant、Newton 插值）、方阵与 DCM 操作、随机分布采样、物理量单位管理与格式化。</li></ul></li></ol><h3 id=编译器要求>编译器要求</h3><p>从代码中可以看出：</p><ol><li><strong>C++11或更高</strong>：使用了 <code>noexcept</code>、<code>= default</code> 等C++11特性</li><li><strong>MSVC版本检测</strong>：代码检查 <code>_MSC_VER &lt; 1800</code> 来处理旧版MSVC的兼容性</li></ol><h3 id=外部依赖>外部依赖</h3><p>这是一个相对独立的数学计算模块，外部依赖很少，主要依赖标准库。这种设计使得代码具有良好的可移植性和独立性。这些代码<strong>不依赖</strong>：</p><ul><li>第三方数学库（如Eigen、BLAS等）</li><li>图形库（如OpenGL、DirectX）</li><li>其他第三方框架</li></ul><h2 id=二代码文件功能分析>二、代码文件功能分析</h2><h3 id=1-mathconstantsh>1. MathConstants.h</h3><p><strong>功能</strong>：定义常用数学常量</p><ul><li>主要常量：M_PI, M_E, M_TWOPI, M_PI_2等</li><li>跨平台兼容性处理（Windows/Linux）</li></ul><h3 id=2-vec3h>2. Vec3.h</h3><p><strong>功能</strong>：三维向量类</p><ul><li><strong>数据结构</strong>：包含3个double元素的向量</li><li><strong>主要操作</strong>：<ul><li>构造函数和赋值操作</li><li>向量运算：加减、标量乘除、点积、叉积</li><li>访问器：x/y/z, lat/lon/alt, range/azimuth/elevation等</li><li>工具函数：length(), normalize(), zero()</li></ul></li></ul><h3 id=3-anglehcpp>3. Angle.h/cpp</h3><p><strong>功能</strong>：角度处理和转换</p><ul><li><strong>角度规范化</strong>：<ul><li><code>angFix2PI()</code>: 调整到[0, 2π)</li><li><code>angFixPI()</code>: 调整到[-π, π]</li><li><code>angFixPI2()</code>: 钳制到[-π/2, π/2]</li><li>度数版本：<code>angFix360()</code>, <code>angFix180()</code>, <code>angFix90()</code></li></ul></li><li><strong>角度比较</strong>：<ul><li><code>areAnglesEqual()</code>: 考虑周期性的角度相等判断</li><li><code>angleDifference()</code>: 计算两角度间最短差值</li></ul></li><li><strong>角度计算</strong>：<ul><li><code>isAngleBetween()</code>: 判断角度是否在扇形范围内</li><li><code>rotateEulerAngle()</code>: 欧拉角旋转</li></ul></li><li><strong>特殊函数</strong>：<ul><li><code>inverseCosine()</code>, <code>inverseSine()</code>: 带误差容忍的反三角函数</li></ul></li></ul><p><strong>Angle模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>angFix2PI</td><td>角度(弧度)</td><td>[0, 2π)范围的角度</td><td>角度规范化</td></tr><tr><td>angFixPI</td><td>角度(弧度)</td><td>[-π, π]范围的角度</td><td>角度规范化</td></tr><tr><td>areAnglesEqual</td><td>两个角度+容差</td><td>bool</td><td>考虑周期性的相等判断</td></tr><tr><td>angleDifference</td><td>from角度, to角度</td><td>(-π, π]范围的差值</td><td>最短路径角度差</td></tr><tr><td>isAngleBetween</td><td>测试角, 起始角, 扫描角</td><td>bool</td><td>扇形范围判断</td></tr></tbody></table><h3 id=4-mathhcpp>4. Math.h/cpp</h3><p><strong>功能</strong>：通用数学和矩阵运算</p><ul><li><strong>基础数学函数</strong>：<ul><li><code>sdkMin/Max()</code>, <code>clamp()</code>, <code>square()</code>, <code>sign()</code></li><li><code>areEqual()</code>: 浮点数相等比较</li><li><code>toScientific()</code>: 科学计数法转换</li></ul></li><li><strong>向量操作</strong>：<ul><li><code>v3Distance()</code>, <code>v3Unit()</code>, <code>v3Angle()</code></li><li><code>v3RotX/Y()</code>: 绕坐标轴旋转</li><li><code>v3SphtoRec()</code>: 球坐标到直角坐标转换</li></ul></li><li><strong>矩阵运算</strong>：<ul><li><code>d3MMmult()</code>: 3×3矩阵乘法</li><li><code>d3Mv3Mult()</code>: 矩阵向量乘法</li><li><code>d3MMTmult()</code>: 矩阵与转置矩阵相乘</li></ul></li><li><strong>坐标系转换</strong>：<ul><li><code>d3DCMtoEuler()</code>: 方向余弦矩阵转欧拉角</li><li><code>d3EulertoDCM()</code>: 欧拉角转方向余弦矩阵</li><li><code>d3EulertoQ()</code>: 欧拉角转四元数</li><li><code>d3QtoEuler()</code>: 四元数转欧拉角</li></ul></li><li><strong>四元数运算</strong>：<ul><li><code>dQNorm()</code>: 四元数归一化</li><li><code>dQMult()</code>: 四元数乘法</li></ul></li></ul><h3 id=5-coordinatesystemhcpp>5. CoordinateSystem.h/cpp</h3><p><strong>功能</strong>：定义坐标系统枚举和相关常量</p><ul><li><strong>坐标系统枚举</strong>：<ul><li><code>COORD_SYS_NED</code>: 北东下坐标系</li><li><code>COORD_SYS_NWU</code>: 北西上坐标系</li><li><code>COORD_SYS_ENU</code>: 东北上坐标系</li><li><code>COORD_SYS_LLA</code>: 经纬度高度坐标系</li><li><code>COORD_SYS_ECEF</code>: 地心地固坐标系</li><li><code>COORD_SYS_ECI</code>: 地心惯性坐标系</li><li><code>COORD_SYS_XEAST</code>: X轴向东的切平面</li><li><code>COORD_SYS_GTP</code>: 通用切平面</li></ul></li><li><strong>地球模型</strong>：<ul><li><code>WGS_84</code>: WGS-84椭球模型</li><li><code>FLAT_EARTH</code>: 平面地球模型</li><li><code>TANGENT_PLANE_WGS_84</code>: WGS-84切平面</li><li><code>PERFECT_SPHERE</code>: 完美球体模型</li></ul></li><li><strong>常量定义</strong>：WGS-84参数、地球旋转速率等</li></ul><h3 id=6-coordinateh>6. Coordinate.h</h3><p><strong>功能</strong>：坐标数据容器类</p><ul><li><strong>成员数据</strong>：<ul><li>位置(position): Vec3</li><li>方向(orientation): Vec3</li><li>速度(velocity): Vec3</li><li>加速度(acceleration): Vec3</li><li>坐标系类型</li><li>ECI时间</li></ul></li><li><strong>主要接口</strong>：<ul><li>设置/获取各种状态量</li><li>坐标系统管理</li><li>数据有效性标志</li></ul></li></ul><h3 id=7-coordinateconverterhcpp>7. CoordinateConverter.h/cpp</h3><p><strong>功能</strong>：坐标系转换核心类</p><ul><li><p><strong>主要功能</strong>：</p><ul><li>各种坐标系之间的转换</li><li>参考原点管理</li><li>切平面偏移和旋转</li></ul></li><li><p><strong>支持的转换</strong>：</p><ul><li>LLA ↔ ECEF ↔ ECI</li><li>LLA ↔ NED/NWU/ENU</li><li>ECEF ↔ NED/NWU/ENU</li><li>XEAST ↔ 其他坐标系</li></ul></li><li><p><strong>关键方法</strong>：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>convert(<span style=color:#66d9ef>const</span> Coordinate<span style=color:#f92672>&amp;</span> in, Coordinate<span style=color:#f92672>&amp;</span> out, CoordinateSystem sys)
</span></span><span style=display:flex><span>setReferenceOrigin(lat, lon, alt)
</span></span><span style=display:flex><span>convertGeodeticToEcef()
</span></span><span style=display:flex><span>convertEcefToGeodetic()</span></span></code></pre></div></li></ul><p><strong>CoordinateConverter模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>convert</td><td>Coordinate + 目标坐标系</td><td>Coordinate</td><td>通用坐标转换</td></tr><tr><td>setReferenceOrigin</td><td>纬度、经度、高度</td><td>无</td><td>设置参考原点</td></tr><tr><td>convertGeodeticToEcef</td><td>LLA坐标</td><td>ECEF坐标</td><td>大地坐标转地心地固</td></tr><tr><td>convertEcefToGeodetic</td><td>ECEF坐标</td><td>LLA坐标</td><td>地心地固转大地坐标</td></tr></tbody></table><h3 id=8-calculationshcpp>8. Calculations.h/cpp</h3><p><strong>功能</strong>：高级计算功能</p><ul><li><strong>距离计算</strong>：<ul><li><code>calculateSlant()</code>: 斜距</li><li><code>calculateGroundDist()</code>: 地面距离</li><li><code>calculateAltitude()</code>: 高度差</li></ul></li><li><strong>角度计算</strong>：<ul><li><code>calculateRelAzEl()</code>: 相对方位角/俯仰角</li><li><code>calculateAbsAzEl()</code>: 绝对方位角/俯仰角</li><li><code>calculateAspectAngle()</code>: 纵横角</li></ul></li><li><strong>速度计算</strong>：<ul><li><code>calculateClosingVelocity()</code>: 接近速度</li><li><code>calculateVelocityDelta()</code>: 速度差</li><li><code>calculateRangeRate()</code>: 距离变化率</li></ul></li><li><strong>特殊计算</strong>：<ul><li><code>calculateGeodesicDRCR()</code>: 测地线下行程/横程</li><li><code>calculateHorizonDist()</code>: 地平线距离</li><li><code>sodanoDirect/Inverse()</code>: Sodano算法</li></ul></li><li><strong>实用功能</strong>：<ul><li><code>positionInGate()</code>: 判断位置是否在门内</li><li><code>laserInGate()</code>: 判断激光是否在门内</li></ul></li></ul><p><strong>Calculations模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>calculateSlant</td><td>两个LLA位置 + 地球模型</td><td>距离(m)</td><td>计算斜距</td></tr><tr><td>calculateRelAzEl</td><td>from/to位置 + 方向</td><td>方位角、俯仰角</td><td>相对角度</td></tr><tr><td>calculateGeodesicDRCR</td><td>from位置 + 方向 + to位置</td><td>下行程、横程</td><td>测地线计算</td></tr><tr><td>sodanoInverse</td><td>两个LLA位置</td><td>距离 + 方位角</td><td>反向Sodano算法</td></tr><tr><td>calculateHorizonDist</td><td>LLA位置 + 地平线类型</td><td>距离(m)</td><td>地平线距离</td></tr></tbody></table><h3 id=9-geometryhcpp>9. Geometry.h/cpp</h3><p><strong>功能</strong>：几何计算和相交测试</p><ul><li><p>基本几何体：</p><ul><li><code>Plane</code>: 3D平面（ax + by + cz + d = 0）</li><li><code>Polytope</code>: 凸多面体（多个平面的集合）</li><li><code>Triangle</code>: 三角形</li><li><code>Ray</code>: 射线（原点+方向）</li><li><code>Sphere</code>: 球体</li><li><code>Ellipsoid</code>: 椭球体</li><li><code>QuadricSurface</code>: 二次曲面</li></ul></li><li><p>相交测试：</p><ul><li><code>rayIntersectsTriangle()</code>: 射线-三角形相交</li><li><code>rayIntersectsPlane()</code>: 射线-平面相交</li><li><code>rayIntersectsSphere()</code>: 射线-球体相交</li><li><code>rayIntersectsEllipsoid()</code>: 射线-椭球体相交</li><li><code>rayIntersectsQuadricSurface()</code>: 射线-二次曲面相交</li></ul></li><li><p>其他功能：</p><ul><li><code>reflectVector()</code>: 向量反射</li><li><code>reflectRay()</code>: 射线反射</li><li><code>ellipsoidNormalAtIntersection()</code>: 椭球体表面法线</li></ul></li></ul><p><strong>Geometry模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>rayIntersectsTriangle</td><td>Ray + Triangle</td><td>IntersectResultsRT</td><td>射线三角形相交测试</td></tr><tr><td>rayIntersectsPlane</td><td>Ray + Plane</td><td>optional<double></td><td>返回相交距离t</td></tr><tr><td>rayIntersectsSphere</td><td>Ray + Sphere</td><td>optional<double></td><td>返回最近相交距离</td></tr><tr><td>reflectVector</td><td>向量 + 法线</td><td>Vec3</td><td>反射向量</td></tr></tbody></table><h3 id=10-geofencehcpp>10. GeoFence.h/cpp</h3><p><strong>功能</strong>：地理围栏（地理区域边界）</p><ul><li><p>主要功能：</p><ul><li>支持任意多边形区域定义</li><li>使用射线投射算法判断点是否在围栏内</li><li>支持3D空间的围栏（考虑高度）</li></ul></li><li><p>实现原理：</p><ul><li>将地表多边形扩展为3D"咖啡滤纸"形状</li><li>使用偶数/奇数规则进行内外判断</li><li>支持ECEF和LLA坐标系输入</li></ul></li></ul><p><strong>GeoFence模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>set</td><td>点集 + 坐标系</td><td>无</td><td>设置围栏边界</td></tr><tr><td>contains</td><td>坐标/ECEF点</td><td>bool</td><td>判断点是否在围栏内</td></tr><tr><td>triangles</td><td>无</td><td>vector<triangle></td><td>获取构成围栏的三角形</td></tr></tbody></table><h3 id=11-garshcpp>11. Gars.h/cpp</h3><p><strong>功能</strong>：全球区域参考系统（GARS）坐标转换</p><ul><li><p>GARS坐标格式：</p><ul><li>5-7个字符：经度带(3位) + 纬度带(2字母) + 可选的15分钟象限 + 可选的5分钟键</li><li>例如：&ldquo;180AA&rdquo;、&ldquo;180AA1&rdquo;、&ldquo;180AA19&rdquo;</li></ul></li><li><p>主要功能：</p><ul><li><code>isValidGars()</code>: 验证GARS坐标字符串</li><li><code>convertGarsToGeodetic()</code>: GARS转经纬度</li><li><code>convertGeodeticToGars()</code>: 经纬度转GARS</li></ul></li><li><p>精度级别：</p><ul><li>GARS_30: 30分钟级别（5字符）</li><li>GARS_15: 15分钟级别（6字符）</li><li>GARS_5: 5分钟级别（7字符）</li></ul></li></ul><p><strong>Gars模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>isValidGars</td><td>GARS字符串</td><td>bool + 分解值</td><td>验证并解析GARS</td></tr><tr><td>convertGarsToGeodetic</td><td>GARS字符串</td><td>纬度/经度(弧度)</td><td>GARS转经纬度</td></tr><tr><td>convertGeodeticToGars</td><td>纬度/经度 + 精度</td><td>GARS字符串</td><td>经纬度转GARS</td></tr></tbody></table><h3 id=12-dcmhcpp>12. Dcm.h/cpp</h3><p><strong>功能</strong>：方向余弦矩阵（DCM）操作</p><ul><li><p><strong>继承关系</strong>：继承自<code>SquareMatrix</code>（3×3方阵）</p></li><li><p>主要功能：</p><ul><li><code>determinant()</code>: 计算行列式（应为1）</li><li><code>isValid()</code>: 验证是否为有效旋转矩阵</li><li><code>toEuler()</code>: DCM转欧拉角</li><li><code>fromEuler()</code>: 欧拉角转DCM</li><li><code>toQ()</code>: DCM转四元数</li><li><code>fromQ()</code>: 四元数转DCM</li></ul></li></ul><p><strong>Dcm模块</strong></p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>fromEuler</td><td>Vec3欧拉角</td><td>无(修改自身)</td><td>欧拉角转DCM</td></tr><tr><td>toEuler</td><td>无</td><td>Vec3欧拉角</td><td>DCM转欧拉角</td></tr><tr><td>fromQ</td><td>四元数[4]</td><td>int(错误码)</td><td>四元数转DCM</td></tr><tr><td>toQ</td><td>无</td><td>array&lt;double,4></td><td>DCM转四元数</td></tr></tbody></table><h3 id=13-datumconverthcpp>13. DatumConvert.h/cpp</h3><p><strong>功能</strong>：基准面转换（磁偏角和垂直基准）</p><ul><li><p>磁偏角转换：</p><ul><li>支持TRUE（真北）、WMM（世界磁场模型）、USER（用户定义）之间转换</li><li>使用WorldMagneticModel进行磁偏角计算</li></ul></li><li><p>垂直基准转换：</p><ul><li>支持WGS84和USER之间转换</li></ul></li><li><p>不支持MSL（平均海平面）转换</p></li></ul><h3 id=14-gogtogeofencehcpp>14. GogToGeoFence.h/cpp</h3><p><strong>功能</strong>：将GOG（Geo-Object Graphics）转换为地理围栏</p><ul><li><p>支持的GOG类型：</p><ul><li>LINE（闭合线）</li><li>POLYGON（多边形）</li></ul></li><li><p>限制条件：</p><ul><li>只支持绝对坐标</li><li>LINE必须闭合（首尾点相同）</li><li>不支持凹多边形</li></ul></li></ul><h3 id=15-interpolationhcpp>15. Interpolation.h/cpp</h3><p><strong>功能</strong>：提供多种插值算法，用于在标量、向量和角度数据间平滑过渡。该模块支持：</p><ul><li><strong>最近邻插值</strong>：快速获取相邻数据点的值，适用于不需要平滑过渡的简单场景。</li><li><strong>线性插值</strong>：对标量和泛型类型实现一维和三点映射插值，可应用于数值分析与参数调节。</li><li><strong>Map 容器插值</strong>：在键值映射中寻找上下界并进行插值，常用于时序数据或离散样本间的数据估算。</li><li><strong>三维向量插值</strong>：对 <code>Vec3</code> 对象的三个分量分别插值，适用于实体位置动画与轨迹平滑。</li><li><strong>角度插值</strong>：处理周期跳变（跨 0/2π）情形，并支持基于时间戳的动态插值，适用于航姿和方向数据平滑。</li></ul><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>getFactor</td><td>lowVal, highVal, exactVal (double)</td><td>factor (double)</td><td>计算 exactVal 在 [lowVal, highVal] 范围内的比例因子 (0–1)</td></tr><tr><td>nearestNeighborInterpolate</td><td>a, b (Type), factor (double)</td><td>result (Type)</td><td>最近邻插值，factor&lt;0.5 返回 a，否则返回 b</td></tr><tr><td>linearInterpolate(a,b,xFactor)</td><td>a, b (Type), xFactor (double)</td><td>result (Type)</td><td>两点线性插值</td></tr><tr><td>linearInterpolate(a,b,x1,xVal,x2)</td><td>a, b (Type), x1, xVal, x2 (double)</td><td>result (Type)</td><td>三点映射插值</td></tr><tr><td>linearInterpolate(map, value, clamp)</td><td>mp(std::map&lt;T1,T2>&), value (T1), clamp (bool)</td><td>result (T2)</td><td>Map 容器插值，边界可钳制</td></tr><tr><td>linearInterpolate(prev,next,mixFactor)</td><td>prev, next (Vec3), mixFactor (double)</td><td>result (Vec3)</td><td>三维向量各分量线性插值</td></tr><tr><td>linearInterpolateAngle(a,b,factor)</td><td>a, b (double), factor (double)</td><td>angle (double)</td><td>角度插值，处理 0/2π 周期跳变</td></tr><tr><td>linearInterpolateAngle(a,b,ta,t,tb)</td><td>a, b (double), ta, t, tb (double)</td><td>angle (double)</td><td>时间驱动的角度插值</td></tr></tbody></table><h3 id=16-magneticvariancehcpp>16. MagneticVariance.h/cpp</h3><p><strong>功能</strong>：基于 NOAA 世界磁场模型（WMM）计算地磁偏角，并提供真航向与磁航向之间的双向转换接口。该模块特点包括：</p><ul><li><strong>时序敏感</strong>：支持按日序和日期时间戳计算，满足不同时间粒度的导航需求。</li><li><strong>转换精度</strong>：结合高精度模型，确保航空与海洋导航中的航向转换误差最小。</li><li><strong>错误处理</strong>：通过返回码和日志通知机制反馈计算异常或输入错误。</li></ul><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>calculateMagneticVariance(lla, day, year)</td><td>lla (Vec3), ordinalDay (int), year (int)</td><td>varianceRad (double&)</td><td>根据日序和年份计算磁偏角</td></tr><tr><td>calculateMagneticVariance(lla, ts)</td><td>lla (Vec3), timeStamp (TimeStamp)</td><td>varianceRad (double&)</td><td>使用时间戳计算磁偏角</td></tr><tr><td>calculateMagneticBearing(lla, ts)</td><td>lla (Vec3), timeStamp (TimeStamp)</td><td>bearingRad (double&)</td><td>真航向转换为磁航向</td></tr><tr><td>calculateTrueBearing(lla, ts)</td><td>lla (Vec3), timeStamp (TimeStamp)</td><td>bearingRad (double&)</td><td>磁航向转换为真航向</td></tr></tbody></table><h3 id=17-mgrshcpp>17. Mgrs.h/cpp</h3><p><strong>功能</strong>：实现 MGRS（陆地网格参考系统）、UTM、UPS 与大地坐标之间的高效双向转换。模块特性：</p><ul><li><strong>全流程覆盖</strong>：从字符串解析到投影转换，涵盖 MGRS→UTM/UPS→地理坐标及反向流程。</li><li><strong>特殊区处理</strong>：针对 Svalbard 和 Norway 区域的特殊规则，提供兼容性处理。</li><li><strong>输入校验</strong>：细化错误信息输出，帮助调用方定位格式或数值异常。</li></ul><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>convertMgrsToGeodetic</td><td>mgrs (std::string)</td><td>lat, lon (double&)</td><td>解析 MGRS 字符串并输出纬度/经度（弧度）</td></tr><tr><td>breakMgrsString</td><td>mgrs (std::string)</td><td>zone (int), gzdLetters (std::string), easting, northing (double)</td><td>拆分 MGRS 为区域号、网格设计子与偏移量</td></tr><tr><td>convertMgrsToUtm</td><td>zone, gzdLetters, easting, northing</td><td>utmZone (int), easting, northing (double)</td><td>MGRS 转 UTM，含 Svalbard/Norway 特例处理</td></tr><tr><td>convertUtmToGeodetic</td><td>utmZone (int), easting, northing (double)</td><td>lat, lon (double&)</td><td>UTM 投影坐标转换为纬度/经度</td></tr><tr><td>convertMgrsToUps</td><td>mgrs (std::string)</td><td>easting, northing (double), northPole (bool)</td><td>MGRS 转极地 UPS 投影</td></tr></tbody></table><h3 id=18-multiframecoordinatehcpp>18. MultiFrameCoordinate.h/cpp</h3><p><strong>功能</strong>：缓存并在多坐标系（LLA 与 ECEF）间转换坐标，支持懒更新与错误处理。模块特点：</p><ul><li><strong>双向缓存</strong>：设置 LLA 或 ECEF 后，可按需转换并缓存结果，避免重复计算。</li><li><strong>系统兼容</strong>：支持 LLA、ECEF 及通过 CoordinateConverter 进行 ECI、局部机体系或其他系统转换。</li><li><strong>错误反馈</strong>：对无效系统或未初始化转换器输入提供返回码。</li></ul><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>setCoordinate(coord)</td><td>coordinate (simCore::Coordinate)</td><td>return code (int)</td><td>设置 LLA 或 ECEF 坐标，其他系统返回错误</td></tr><tr><td>setCoordinate(coord,conv)</td><td>coordinate (simCore::Coordinate), converter (simCore::CoordinateConverter)</td><td>return code (int)</td><td>使用转换器设置并转换到 LLA/ECEF</td></tr><tr><td>clear()</td><td>—</td><td>—</td><td>清除缓存坐标，置为无效</td></tr><tr><td>isValid()</td><td>—</td><td>bool</td><td>返回当前是否有有效坐标</td></tr><tr><td>llaCoordinate()</td><td>—</td><td>coordinate (const simCore::Coordinate&)</td><td>获取 LLA 坐标，必要时从 ECEF 懒转换</td></tr><tr><td>ecefCoordinate()</td><td>—</td><td>coordinate (const simCore::Coordinate&)</td><td>获取 ECEF 坐标，必要时从 LLA 懒转换</td></tr></tbody></table><h3 id=19-numericalanalysishcpp>19. NumericalAnalysis.h/cpp</h3><p><strong>功能</strong>：数值根查找与插值算法集合，提供二分法、割线法及 Newton 插值/反向插值，适用于求根与时间映射。模块特点：</p><ul><li><strong>多方法支持</strong>：同时提供 Bisection 和 Secant 迭代算法。</li><li><strong>高阶插值</strong>：实现二阶 Newton 插值与反向线性插值。</li><li><strong>收敛控制</strong>：迭代次数与误差容限可配置，返回状态码指示结果。</li></ul><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>BisectionSearch::searchX</td><td>x (double&), y (double), xlo (double&), xhi (double&), type (NumericalSearchType)</td><td>state (NumericalSearchType)</td><td>二分法迭代求根</td></tr><tr><td>BisectionSearch::count</td><td>—</td><td>count (int)</td><td>获取二分法迭代次数</td></tr><tr><td>LinearSearch::searchX</td><td>x (double&), y (double), xlo (double), xhi (double), fdx (double), type (NumericalSearchType)</td><td>state (NumericalSearchType)</td><td>割线法迭代求根</td></tr><tr><td>LinearSearch::count</td><td>—</td><td>count (int)</td><td>获取割线法迭代次数</td></tr><tr><td>newtonInterp</td><td>t0 (double), t[3] (const double[]), f[3] (const double[]), funcAtT0 (double&)</td><td>return code (int)</td><td>二阶 Newton 插值求值</td></tr><tr><td>invLinearInterp</td><td>funcAtT0 (double), t[3] (double[]), f[3] (double[]), tol (double), t0 (double&)</td><td>return code (int)</td><td>反向线性/高阶插值求时间</td></tr></tbody></table><h3 id=20-randomhcpp>20. Random.h/cpp</h3><p><strong>功能</strong>：多种伪随机分布生成，包括均匀、正态、复正态、指数、Poisson、几何、二项和离散均匀，及全局种子初始化。模块特点：</p><ul><li><strong>统一接口</strong>：所有分布通过 operator() 返回随机样本。</li><li><strong>算法多样</strong>：支持 Box-Muller、极坐标、插值法等多种基础生成方法。</li><li><strong>可复现性</strong>：可设置种子确保结果可重复。</li></ul><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>initializeRandomSeedWithTime</td><td>—</td><td>—</td><td>用系统时钟初始化全局随机种子</td></tr><tr><td>basicUniformVariable</td><td>seed (double*)</td><td>value (double)</td><td>生成 [0,1] 区间均匀值</td></tr><tr><td>NormalVariable::operator()</td><td>—</td><td>sample (double)</td><td>生成正态分布随机数</td></tr><tr><td>GaussianVariable::operator()</td><td>—</td><td>sample (Complex)</td><td>生成复正态分布随机数</td></tr><tr><td>UniformVariable::operator()</td><td>—</td><td>sample (double)</td><td>生成均匀分布随机数</td></tr><tr><td>ExponentialVariable::operator()</td><td>—</td><td>sample (double)</td><td>生成指数分布随机数</td></tr><tr><td>PoissonVariable::operator()</td><td>—</td><td>sample (int)</td><td>生成 Poisson 分布随机数</td></tr><tr><td>GeometricVariable::operator()</td><td>—</td><td>sample (int)</td><td>生成几何分布随机数</td></tr><tr><td>BinomialVariable::operator()</td><td>—</td><td>sample (int)</td><td>生成二项分布随机数</td></tr><tr><td>DiscreteUniformVariable::operator()</td><td>—</td><td>sample (int)</td><td>生成离散均匀分布随机数</td></tr></tbody></table><h3 id=21-squarematrixhcpp>21. SquareMatrix.h/cpp</h3><p><strong>功能</strong>：提供方阵操作，包括构造、身份矩阵、置零、转置、缩放、加法和左右乘法，支持行列访问与比较。</p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>SquareMatrix(dimension)</td><td>dimension(unsigned int)</td><td>—</td><td>构造指定维度的零矩阵</td></tr><tr><td>SquareMatrix()</td><td>—</td><td>—</td><td>构造 3×3 全零矩阵</td></tr><tr><td>SquareMatrix(rhs)</td><td>rhs(const SquareMatrix&)</td><td>—</td><td>复制构造</td></tr><tr><td>makeIdentity()</td><td>—</td><td>return code (int)</td><td>将矩阵置为单位矩阵</td></tr><tr><td>makeZero()</td><td>—</td><td>return code (int)</td><td>将矩阵置零</td></tr><tr><td>transpose()</td><td>—</td><td>return code (int)</td><td>矩阵转置</td></tr><tr><td>set(row,col,value)</td><td>row, col(unsigned int), value(double)</td><td>return code (int)</td><td>设置指定元素</td></tr><tr><td>get(row,col)</td><td>row, col(unsigned int)</td><td>value (double)</td><td>获取指定元素，越界返回 NaN</td></tr><tr><td>row(index)</td><td>index(unsigned int)</td><td>std::vector<double></td><td>获取指定行</td></tr><tr><td>column(index)</td><td>index(unsigned int)</td><td>std::vector<double></td><td>获取指定列</td></tr><tr><td>data()</td><td>—</td><td>const double*</td><td>获取内部数据指针，维度&lt;2 时返回 nullptr</td></tr><tr><td>scale(factor)</td><td>factor(double)</td><td>return code (int)</td><td>矩阵数值缩放</td></tr><tr><td>add(m)</td><td>m(const SquareMatrix&)</td><td>return code (int)</td><td>矩阵元素逐一相加</td></tr><tr><td>postMultiply(m)</td><td>m(const SquareMatrix&)</td><td>return code (int)</td><td>this = this * m</td></tr><tr><td>preMultiply(m)</td><td>m(const SquareMatrix&)</td><td>return code (int)</td><td>this = m * this</td></tr><tr><td>areEqual(m1,m2,t)</td><td>m1,m2(const SquareMatrix&), t(double)</td><td>bool</td><td>矩阵按容差 t 比较是否相等</td></tr></tbody></table><h3 id=22-unitcontexthcpp>22. UnitContext.h/cpp</h3><p><strong>功能</strong>：维护并格式化各种单位与格式设置，包括时间、坐标、角度、距离、速度及地理/磁偏/垂直基准。</p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>timeFormat()</td><td>—</td><td>TimeFormat</td><td>获取时间格式</td></tr><tr><td>setTimeFormat(unit)</td><td>unit(TimeFormat)</td><td>—</td><td>设置时间格式</td></tr><tr><td>timePrecision()</td><td>—</td><td>unsigned int</td><td>获取时间精度</td></tr><tr><td>setTimePrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置时间精度</td></tr><tr><td>geodeticFormat()</td><td>—</td><td>GeodeticFormat</td><td>获取地理坐标格式</td></tr><tr><td>setGeodeticFormat(format)</td><td>format(GeodeticFormat)</td><td>—</td><td>设置地理坐标格式</td></tr><tr><td>geodeticPrecision()</td><td>—</td><td>unsigned int</td><td>获取地理坐标精度</td></tr><tr><td>setGeodeticPrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置地理坐标精度</td></tr><tr><td>distanceUnits()</td><td>—</td><td>const Units&</td><td>获取距离单位</td></tr><tr><td>setDistanceUnits(unit)</td><td>unit(const Units&)</td><td>—</td><td>设置距离单位</td></tr><tr><td>distancePrecision()</td><td>—</td><td>unsigned int</td><td>获取距离精度</td></tr><tr><td>setDistancePrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置距离精度</td></tr><tr><td>altitudeUnits()</td><td>—</td><td>const Units&</td><td>获取高度单位</td></tr><tr><td>setAltitudeUnits(unit)</td><td>unit(const Units&)</td><td>—</td><td>设置高度单位</td></tr><tr><td>altitudePrecision()</td><td>—</td><td>unsigned int</td><td>获取高度精度</td></tr><tr><td>setAltitudePrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置高度精度</td></tr><tr><td>angleUnits()</td><td>—</td><td>const Units&</td><td>获取角度单位</td></tr><tr><td>setAngleUnits(unit)</td><td>unit(const Units&)</td><td>—</td><td>设置角度单位</td></tr><tr><td>anglePrecision()</td><td>—</td><td>unsigned int</td><td>获取角度精度</td></tr><tr><td>setAnglePrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置角度精度</td></tr><tr><td>speedUnits()</td><td>—</td><td>const Units&</td><td>获取速度单位</td></tr><tr><td>setSpeedUnits(unit)</td><td>unit(const Units&)</td><td>—</td><td>设置速度单位</td></tr><tr><td>speedPrecision()</td><td>—</td><td>unsigned int</td><td>获取速度精度</td></tr><tr><td>setSpeedPrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置速度精度</td></tr><tr><td>genericPrecision()</td><td>—</td><td>unsigned int</td><td>获取通用精度</td></tr><tr><td>setGenericPrecision(prec)</td><td>prec(unsigned int)</td><td>—</td><td>设置通用精度</td></tr><tr><td>coordinateSystem()</td><td>—</td><td>CoordinateSystem</td><td>获取坐标系类型</td></tr><tr><td>setCoordinateSystem(coordSys)</td><td>coordSys(CoordinateSystem)</td><td>—</td><td>设置坐标系类型</td></tr><tr><td>magneticVariance()</td><td>—</td><td>MagneticVariance</td><td>获取磁偏角模式</td></tr><tr><td>setMagneticVariance(mv)</td><td>mv(MagneticVariance)</td><td>—</td><td>设置磁偏角模式</td></tr><tr><td>verticalDatum()</td><td>—</td><td>VerticalDatum</td><td>获取垂直基准</td></tr><tr><td>setVerticalDatum(vd)</td><td>vd(VerticalDatum)</td><td>—</td><td>设置垂直基准</td></tr><tr><td>referenceYear()</td><td>—</td><td>int</td><td>获取参考年份</td></tr><tr><td>setReferenceYear(refYear)</td><td>refYear(int)</td><td>—</td><td>设置参考年份</td></tr><tr><td>datumConvert()</td><td>—</td><td>DatumConvertPtr</td><td>获取基准转换器</td></tr><tr><td>setDatumConvert(convert)</td><td>convert(DatumConvertPtr)</td><td>—</td><td>设置基准转换器</td></tr></tbody></table><h3 id=23-unitshcpp>23. Units.h/cpp</h3><p><strong>功能</strong>：定义并管理各类单位及其转换，包括时间、角度、长度、速度、加速度、温度、频率、体积、压力和电位等，同时提供注册与查询功能。</p><table><thead><tr><th>函数</th><th>输入</th><th>输出</th><th>说明</th></tr></thead><tbody><tr><td>Units()</td><td>–</td><td>–</td><td>构造无效单位</td></tr><tr><td>Units(name, abbrev, toBase, family)</td><td>name: stringabbrev: stringtoBase: doublefamily: string</td><td>–</td><td>构造带偏移与转换因子的单位</td></tr><tr><td>offsetThenScaleUnit(&mldr;)</td><td>name, abbrevoffset: doubletoBase: doublefamily: string</td><td>Units</td><td>构造偏移缩放单位</td></tr><tr><td>name()</td><td>–</td><td>string&</td><td>获取单位名称</td></tr><tr><td>abbreviation()</td><td>–</td><td>string&</td><td>获取单位缩写</td></tr><tr><td>family()</td><td>–</td><td>string&</td><td>获取单位族</td></tr><tr><td>isValid()</td><td>–</td><td>bool</td><td>判断单位是否有效</td></tr><tr><td>canConvert(toUnits)</td><td>toUnits: Units</td><td>bool</td><td>判断是否可转换</td></tr><tr><td>convertTo(toUnits, value, output)</td><td>toUnits: Unitsvalue: doubleoutput: double&</td><td>int</td><td>转换并输出结果，失败返回非0</td></tr><tr><td>convertTo(toUnits, value)</td><td>toUnits: Unitsvalue: double</td><td>double</td><td>转换并返回结果，错误返回原值</td></tr><tr><td>toBaseScalar()</td><td>–</td><td>double</td><td>获取缩放因子</td></tr><tr><td>toBaseOffset()</td><td>–</td><td>double</td><td>获取基准偏移</td></tr><tr><td>operator==(other)</td><td>other: Units</td><td>bool</td><td>单位等价比较</td></tr><tr><td>operator!=(other)</td><td>other: Units</td><td>bool</td><td>单位不等比较</td></tr><tr><td>UnitsRegistry::registerDefaultUnits()</td><td>–</td><td>–</td><td>注册所有内置单位</td></tr><tr><td>UnitsRegistry::registerUnits(units)</td><td>units: Units</td><td>int</td><td>添加新单位</td></tr><tr><td>UnitsRegistry::units(family)</td><td>family: string</td><td>UnitsVector&</td><td>获取指定族单位列表</td></tr><tr><td>UnitsRegistry::families()</td><td>–</td><td>vector</td><td>获取所有单位族名称</td></tr><tr><td>UnitsRegistry::unitsByName(name)</td><td>name: string</td><td>Units&</td><td>按名称查询单位</td></tr><tr><td>UnitsRegistry::unitsByName(name, out)</td><td>name: stringout: Units&</td><td>int</td><td>按名称查询并输出，失败返回0</td></tr><tr><td>UnitsRegistry::unitsByAbbreviation(abbrev)</td><td>abbrev: string</td><td>Units&</td><td>按缩写查询单位</td></tr><tr><td>UnitsRegistry::unitsByAbbreviation(abbrev, out)</td><td>abbrev: stringout: Units&</td><td>int</td><td>按缩写查询并输出，失败返回0</td></tr></tbody></table><h3 id=24-verticaldatumh>24. VerticalDatum.h</h3><p><strong>功能</strong>：定义垂直基准枚举，用于指定地理高度参考面。</p><table><thead><tr><th>枚举值</th><th>说明</th></tr></thead><tbody><tr><td>VERTDATUM_WGS84</td><td>WGS-84 椭球体垂直基准</td></tr><tr><td>VERTDATUM_MSL</td><td>基于 EGM-96 的平均海平面基准</td></tr><tr><td>VERTDATUM_USER</td><td>用户自定义垂直基准偏移</td></tr></tbody></table><hr><h2 id=三模块依赖关系图>三、模块依赖关系图</h2><p>下图展示了该代码库之间的依赖关系：</p><pre class="mermaid align-center">graph TD
    MathConstants.h --&gt; Vec3.h
    Vec3.h --&gt; Geometry.h
    Vec3.h --&gt; GeoFence.h
    Vec3.h --&gt; Coordinate.h
    Vec3.h --&gt; MagneticVariance.h
    
    CoordinateSystem.h --&gt; Coordinate.h
    CoordinateSystem.h --&gt; CoordinateConverter.h
    CoordinateSystem.h --&gt; DatumConvert.h
    CoordinateSystem.h --&gt; GeoFence.h
    CoordinateSystem.h --&gt; Mgrs.h
    
    Coordinate.h --&gt; CoordinateConverter.h
    CoordinateConverter.h --&gt; Calculations.h
    
    Angle.h --&gt; Gars.h
    Angle.h --&gt; Dcm.h
    Angle.h --&gt; Interpolation.h
    Angle.h --&gt; MagneticVariance.h
    Angle.h --&gt; Mgrs.h
    
    Math.h --&gt; Dcm.h
    Math.h --&gt; Geometry.h
    Math.h --&gt; Interpolation.h
    Math.h --&gt; Mgrs.h
    
    Geometry.h --&gt; Geometry.cpp
    Geometry.h --&gt; GeoFence.h
    
    GeoFence.h --&gt; GeoFence.cpp
    GeoFence.h --&gt; GogToGeoFence.h
    
    Gars.h --&gt; Gars.cpp
    Dcm.h --&gt; Dcm.cpp
    DatumConvert.h --&gt; DatumConvert.cpp
    GogToGeoFence.h --&gt; GogToGeoFence.cpp
    
    SquareMatrix.h --&gt; Dcm.h
    MagneticVariance.h --&gt; DatumConvert.h
    VerticalDatum.h --&gt; DatumConvert.h
    WorldMagneticModel.h --&gt; DatumConvert.h
    GOG/Parser.h --&gt; GogToGeoFence.h
    
    %% 旧有模块依赖
    Interpolation.h --&gt; Interpolation.cpp
    MagneticVariance.h --&gt; MagneticVariance.cpp
    Mgrs.h --&gt; Mgrs.cpp
    MultiFrameCoordinate.h --&gt; MultiFrameCoordinate.cpp
    NumericalAnalysis.h --&gt; NumericalAnalysis.cpp
    Random.h --&gt; Random.cpp
    
    %% Interpolation依赖
    Common/Export.h --&gt; Interpolation.h
    
    %% MagneticVariance依赖
    Time/TimeClass.h --&gt; MagneticVariance.h
    simNotify/Notify.h --&gt; MagneticVariance.h
    Common/Common.h --&gt; MagneticVariance.h
    
    %% Mgrs依赖
    String/Tokenizer.h --&gt; Mgrs.h
    String/Utils.h --&gt; Mgrs.h
    String/ValidNumber.h --&gt; Mgrs.h
    Common/Export.h --&gt; Mgrs.h
    
    %% 新增模块依赖
    SquareMatrix.h --&gt; SquareMatrix.cpp
    UnitContext.h --&gt; UnitContext.cpp
    Units.h --&gt; Units.cpp
    VerticalDatum.h
    
    %% SquareMatrix依赖
    simCore/Common/Common.h --&gt; SquareMatrix.h
    simCore/Calc/Math.h --&gt; SquareMatrix.h
    
    %% UnitContext依赖
    simCore/Common/Common.h --&gt; UnitContext.h
    simCore/Calc/CoordinateSystem.h --&gt; UnitContext.h
    simCore/Calc/DatumConvert.h --&gt; UnitContext.h
    simCore/Calc/MagneticVariance.h --&gt; UnitContext.h
    simCore/Calc/VerticalDatum.h --&gt; UnitContext.h
    simCore/Calc/Units.h --&gt; UnitContext.h
    simCore/String/Angle.h --&gt; UnitContext.h
    simCore/Time/Constants.h --&gt; UnitContext.h
    
    %% Units模块依赖
    simCore/Common/Common.h --&gt; Units.h
    simCore/String/Format.h --&gt; Units.h
    simCore/Calc/Angle.h --&gt; Units.h
    simCore/Time/Constants.h --&gt; Units.h</pre><p>文本描述：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>    MathConstants.h --&gt; Vec3.h
    Vec3.h --&gt; Geometry.h
    Vec3.h --&gt; GeoFence.h
    Vec3.h --&gt; Coordinate.h
    Vec3.h --&gt; MagneticVariance.h
    
    CoordinateSystem.h --&gt; Coordinate.h
    CoordinateSystem.h --&gt; CoordinateConverter.h
    CoordinateSystem.h --&gt; DatumConvert.h
    CoordinateSystem.h --&gt; GeoFence.h
    CoordinateSystem.h --&gt; Mgrs.h
    
    Coordinate.h --&gt; CoordinateConverter.h
    CoordinateConverter.h --&gt; Calculations.h
    
    Angle.h --&gt; Gars.h
    Angle.h --&gt; Dcm.h
    Angle.h --&gt; Interpolation.h
    Angle.h --&gt; MagneticVariance.h
    Angle.h --&gt; Mgrs.h
    
    Math.h --&gt; Dcm.h
    Math.h --&gt; Geometry.h
    Math.h --&gt; Interpolation.h
    Math.h --&gt; Mgrs.h
    
    Geometry.h --&gt; Geometry.cpp
    Geometry.h --&gt; GeoFence.h
    
    GeoFence.h --&gt; GeoFence.cpp
    GeoFence.h --&gt; GogToGeoFence.h
    
    Gars.h --&gt; Gars.cpp
    Dcm.h --&gt; Dcm.cpp
    DatumConvert.h --&gt; DatumConvert.cpp
    GogToGeoFence.h --&gt; GogToGeoFence.cpp
    
    SquareMatrix.h --&gt; Dcm.h
    MagneticVariance.h --&gt; DatumConvert.h
    VerticalDatum.h --&gt; DatumConvert.h
    WorldMagneticModel.h --&gt; DatumConvert.h
    GOG/Parser.h --&gt; GogToGeoFence.h
    
  
    Interpolation.h --&gt; Interpolation.cpp
    MagneticVariance.h --&gt; MagneticVariance.cpp
    Mgrs.h --&gt; Mgrs.cpp
    MultiFrameCoordinate.h --&gt; MultiFrameCoordinate.cpp
    NumericalAnalysis.h --&gt; NumericalAnalysis.cpp
    Random.h --&gt; Random.cpp
    
   
    Common/Export.h --&gt; Interpolation.h
    
    %% MagneticVariance依赖
    Time/TimeClass.h --&gt; MagneticVariance.h
    simNotify/Notify.h --&gt; MagneticVariance.h
    Common/Common.h --&gt; MagneticVariance.h
    
    %% Mgrs依赖
    String/Tokenizer.h --&gt; Mgrs.h
    String/Utils.h --&gt; Mgrs.h
    String/ValidNumber.h --&gt; Mgrs.h
    Common/Export.h --&gt; Mgrs.h
    

    SquareMatrix.h --&gt; SquareMatrix.cpp
  
    Units.h --&gt; Units.cpp
    VerticalDatum.h
    
    %% SquareMatrix依赖
    simCore/Common/Common.h --&gt; SquareMatrix.h
    simCore/Calc/Math.h --&gt; SquareMatrix.h
    
    %% UnitContext依赖
    simCore/Common/Common.h --&gt; UnitContext.h
    simCore/Calc/CoordinateSystem.h --&gt; UnitContext.h
    simCore/Calc/DatumConvert.h --&gt; UnitContext.h
    simCore/Calc/MagneticVariance.h --&gt; UnitContext.h
    simCore/Calc/VerticalDatum.h --&gt; UnitContext.h
    simCore/Calc/Units.h --&gt; UnitContext.h
    simCore/String/Angle.h --&gt; UnitContext.h
    simCore/Time/Constants.h --&gt; UnitContext.h
    
    UnitContext.h --&gt; UnitContext.cpp
    
    %% Units模块依赖
    simCore/Common/Common.h --&gt; Units.h
    simCore/String/Format.h --&gt; Units.h
    simCore/Calc/Angle.h --&gt; Units.h
    simCore/Time/Constants.h --&gt; Units.h</code></pre></div><footer class=footline><i class='fa-fw fas fa-calendar'></i> 2025-06-18</footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo href=/index.html><img src=/images/logo.png alt="FlitSoft Docs" style=width:80px;height:auto></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class=default-animation><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/uas/index.html><a class=padding href=/uas/index.html>UAS</a><ul id=R-subsections-50d6e18f3c774adcdf96c62beb3fb9ae class=collapsible-menu></ul></li><li data-nav-id=/em/index.html><a class=padding href=/em/index.html>EM</a><ul id=R-subsections-5221d921411ef33ede36c0310590339e class=collapsible-menu></ul></li><li data-nav-id=/agi/index.html><a class=padding href=/agi/index.html>AI</a><ul id=R-subsections-b697951847df19851ae8635cac95c15a class=collapsible-menu></ul></li><li data-nav-id=/gaming/index.html><a class=padding href=/gaming/index.html>Gaming</a></li><li data-nav-id=/c2/index.html><a class=padding href=/c2/index.html>C2</a><ul id=R-subsections-e0126222f5f1b52fd67c95ccf5ad1c18 class=collapsible-menu></ul></li><li class=parent data-nav-id=/simu/index.html><a class=padding href=/simu/index.html>Simulation</a><ul id=R-subsections-80cfed847676c641fa01f11f3f2904bf class=collapsible-menu><li class="parent alwaysopen" data-nav-id=/simu/simdis/index.html><a class=padding href=/simu/simdis/index.html>SIMDIS</a><ul id=R-subsections-a63a647fe0cbe4c8dbd7bf7789012573 class=collapsible-menu><li data-nav-id=/simu/simdis/simdis_briefing/index.html><a class=padding href=/simu/simdis/simdis_briefing/index.html>SIMDIS Briefing</a></li><li data-nav-id=/simu/simdis/simdis-sdk/index.html><a class=padding href=/simu/simdis/simdis-sdk/index.html>SIMDIS SDK</a></li><li class=active data-nav-id=/simu/simdis/simdis-sdk-simcore-v2/index.html><a class=padding href=/simu/simdis/simdis-sdk-simcore-v2/index.html>SIMDIS SDK SimCore</a></li></ul></li><li data-nav-id=/simu/an-openeaagles-framework-extension-for-hardware-in-the-loop-swarm-simulation-ch/index.html><a class=padding href=/simu/an-openeaagles-framework-extension-for-hardware-in-the-loop-swarm-simulation-ch/index.html>HIL Swarm Simulation</a></li><li data-nav-id=/simu/the-mixed-reality-simulation-platform-mixr-ch/index.html><a class=padding href=/simu/the-mixed-reality-simulation-platform-mixr-ch/index.html>MIXR</a></li><li data-nav-id=/simu/octomap/index.html><a class=padding href=/simu/octomap/index.html>OctoMap</a></li></ul></li><li data-nav-id=/visual/index.html><a class=padding href=/visual/index.html>Visualization</a><ul id=R-subsections-080a96fba97ea97926a463e36c9cb108 class=collapsible-menu></ul></li><li data-nav-id=/log/index.html><a class=padding href=/log/index.html>Log</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-light value=zen-light selected>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built By FlitSoft</p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1750521972 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1750521972 defer></script><script>window.MathJax=Object.assign(window.MathJax||{},{tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},options:{enableMenu:!1}},JSON.parse("{}"))</script><script id=MathJax-script async src=/js/mathjax/tex-mml-chtml.js?1750521972></script><script src=/js/js-yaml/js-yaml.min.js?1750521972 defer></script><script src=/js/d3/d3-color.min.js?1750521972 defer></script><script src=/js/d3/d3-dispatch.min.js?1750521972 defer></script><script src=/js/d3/d3-drag.min.js?1750521972 defer></script><script src=/js/d3/d3-ease.min.js?1750521972 defer></script><script src=/js/d3/d3-interpolate.min.js?1750521972 defer></script><script src=/js/d3/d3-selection.min.js?1750521972 defer></script><script src=/js/d3/d3-timer.min.js?1750521972 defer></script><script src=/js/d3/d3-transition.min.js?1750521972 defer></script><script src=/js/d3/d3-zoom.min.js?1750521972 defer></script><script src=/js/mermaid/mermaid.min.js?1750521972 defer></script><script>window.relearn.themeUseMermaid=JSON.parse("{}")</script><script src=/js/theme.min.js?1750521972 defer></script></body></html>