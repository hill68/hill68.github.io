<!doctype html><html lang=zh-cn dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.147.3"><meta name=generator content="Relearn 7.6.1+4407b4364ab6f7477f7671fbd20c0494bade40ee"><meta name=description content="该模型用于根据给定的测向站数据与测向真方位来求解辐射源目标的经纬度坐标。给出的C++代码示例假设已经获得了多个测向数据点（测向站坐标及测向方位），并使用线性代数方法求解。"><meta name=author content="你的名字"><meta name=twitter:card content="summary"><meta name=twitter:title content="无源侦察测向定位模型 :: FlitSoft Docs"><meta name=twitter:description content="该模型用于根据给定的测向站数据与测向真方位来求解辐射源目标的经纬度坐标。给出的C++代码示例假设已经获得了多个测向数据点（测向站坐标及测向方位），并使用线性代数方法求解。"><meta property="og:url" content="https://hill68.github.io/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html"><meta property="og:site_name" content="FlitSoft Docs"><meta property="og:title" content="无源侦察测向定位模型 :: FlitSoft Docs"><meta property="og:description" content="该模型用于根据给定的测向站数据与测向真方位来求解辐射源目标的经纬度坐标。给出的C++代码示例假设已经获得了多个测向数据点（测向站坐标及测向方位），并使用线性代数方法求解。"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="EM"><meta property="article:published_time" content="2025-05-21T15:43:38+08:00"><meta property="article:modified_time" content="2025-05-21T15:43:38+08:00"><meta itemprop=name content="无源侦察测向定位模型 :: FlitSoft Docs"><meta itemprop=description content="该模型用于根据给定的测向站数据与测向真方位来求解辐射源目标的经纬度坐标。给出的C++代码示例假设已经获得了多个测向数据点（测向站坐标及测向方位），并使用线性代数方法求解。"><meta itemprop=datePublished content="2025-05-21T15:43:38+08:00"><meta itemprop=dateModified content="2025-05-21T15:43:38+08:00"><meta itemprop=wordCount content="1704"><title>无源侦察测向定位模型 :: FlitSoft Docs</title>
<link href=/images/logo.png?1749302463 rel=icon type=image/png><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1749302463 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1749302463 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1749302463 rel=stylesheet><link href=/css/theme.min.css?1749302463 rel=stylesheet><link href=/css/format-html.min.css?1749302463 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1749302463 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1749302463 defer></script><script src=/js/lunr/lunr.min.js?1749302463 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1749302463 defer></script><script src=/js/lunr/lunr.multi.min.js?1749302463 defer></script><script src=/js/lunr/lunr.zh.min.js?1749302463 defer></script><script src=/js/search.min.js?1749302463 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://hill68.github.io",window.relearn.contentLangs=["zh"],window.relearn.index_js_url="/searchindex.en.js?1749302463",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["zen-light","zen-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/css/custom.css?1749302463 rel=stylesheet></head><body class="mobile-support html" data-url=/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#模型设计>模型设计</a></li><li><a href=#模型适应性分析>模型适应性分析</a></li><li><a href=#c示例代码>C++示例代码：</a><ul><li><a href=#更稳定分解的版本>更稳定分解的版本</a></li></ul></li><li><a href=#无源侦察测向定位计算器>无源侦察测向定位计算器</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>FlitSoft Docs</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/index.html><span itemprop=name>EM</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/radar/index.html><span itemprop=name>Radar</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>无源侦察测向定位模型</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/radar/index.html title="Radar (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%E7%A9%BA%E5%AF%B9%E5%9C%B0/index.html title="空对地雷达对抗侦察效能模型 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable em" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=无源侦察测向定位模型>无源侦察测向定位模型</h1><h2 id=模型设计>模型设计</h2><p>由于地球是一个椭球体，因此不能简单用平面的数学模型。考虑到我国地处东北半球，采用简化的 Mercator 投影，公式如下：</p>$$
\theta_i=\arccos \frac{\phi_e-\phi_i}{\sqrt{\left(\phi_e-\phi_i\right)^2+\left(\lambda_e-\lambda_i\right)^2 \cos ^2 \phi_i}} \tag{1}
$$<p>上式中辐射源目标的经纬度坐标为 $\left(\lambda_e, \phi_e\right)$, 测向真方位 $\theta_i$, 测向站坐标 $(\lambda_{\mathrm{i}}, \phi_{\mathrm{i}}$ ）。</p><p>在实际应用中, 辐射源目标的坐标是一个估计值, 测向真方位含有误差, 测向站的坐标也可能含有误差。测向站坐标是可以修正的，在下面的讨论中假设是没有误差的。只讨论测向方位含有误差的情况。
$\lambda_e=$ 辐射源经度
$\phi_{\mathrm{e}}=$ 辐射源纬度
$\lambda_i=$ 测向站经度
$\phi_{\mathrm{i}}=$ 测向站纬度
$\theta_{\mathrm{i}}=$ 在第 i 个测向位置的辐射源真方位, 正北顺时针计算</p><p>如图1所示:</p><p>&lt;img src=&ldquo;<a href=https://cdn.mathpix.com/snip/images/JrF0XmCtGV-a9fLtExlAt3jkv1Xd9Sm51rE76nSnn_8.original.fullsize.png%22 rel=external target=_blank>https://cdn.mathpix.com/snip/images/JrF0XmCtGV-a9fLtExlAt3jkv1Xd9Sm51rE76nSnn_8.original.fullsize.png"</a> /</p><p>根据(1)式, 我们将它写成如下形式:</p>$$
\cos \theta_i \sqrt{\left(\phi_e-\phi_i\right)^2+\left(\lambda_e-\lambda_i\right)^2 \cos ^2 \phi_i}=\phi_e-\phi_i
$$<p>将上式两边平方、移项、合并后再两边开方, 写成关于变量 $\lambda \mathrm{e}$ 和 $\phi_\mathrm{e}$ 的二元一次方程</p>$$
\cos \phi_i \cos \theta_{\mathrm{i}} \cdot \lambda_e-\sin \theta_{\mathrm{i}} \cdot \phi_e=\lambda_i \cos \phi_i \cos \theta_{\mathrm{i}}-\phi_i \sin \theta_{\mathrm{i}}
$$<p>对于多于一次的测向值, 写成矩阵形式如下:</p>$$
\mathbf{A}_n \cdot \mathbf{X}=\mathbf{W}_n
$$<p>其中</p>$$
\begin{array}{r}
\mathbf{A}_n=\left[\begin{array}{cc}
\cos \phi_1 \cos \theta_1 & -\sin \theta_1 \\
\vdots & \vdots \\
\cos \phi_n \cos \theta_n & -\sin \theta_n
\end{array}\right], \quad \mathbf{W}_n=\left[\begin{array}{cc}
\lambda_1 \cos \phi_1 \cos \theta_1 & -\phi_1 \sin \theta_1 \\
\vdots & \vdots \\
\lambda_n \cos \phi_n \cos \theta_n & -\phi_n \sin \theta_n
\end{array}\right], \quad \mathbf{X}=\left[\begin{array}{l}
\lambda_e \\
\phi_e
\end{array}\right], \\
n \geq 2
\end{array}
$$<p>根据线性代数的理论, 有两次和两次以上的测向值就可以解出 $\lambda_e$ 和 $\phi_e$, 则 $\lambda_e$ 和 $\phi_e$ 的解向量 $\mathbf{X}$ 为</p>$$
\mathbf{X}=\mathbf{A}_n^{-1} \cdot \mathbf{W}_n
$$<h2 id=模型适应性分析>模型适应性分析</h2><p>整体来看，该模型在给定的前提和假设下是合理的。分析如下：</p><ol><li><p><strong>投影与模型设定</strong>：<br>模型中明确说明由地球的椭球体特性出发，而非简单的平面模型，为此采用了简化的 Mercator 投影。此类投影在局部范围内可以近似地将经纬度坐标转化为与平面坐标相类似的形式，从而使问题简化为类平面几何问题。</p><p>在该投影下，将位置由$(\lambda,\phi)$映射到近似平面坐标时，一般会有对经度差异乘以$\cos \phi$的修正，以确保经纬度差在局部范围内与实际的东西向距离变化一致。这一点在模型中已体现：<br></p>$$\sqrt{(\phi_e-\phi_i)^2 + ((\lambda_e-\lambda_i)^2\cos^2\phi_i)}$$<p><br>中对经度差$(\lambda_e-\lambda_i)$引入了$\cos\phi_i$因子。</p></li><li><p><strong>方位角公式的合理性</strong>：<br>一般在球面或近似平面上求点 $e(\lambda_e,\phi_e)$ 相对于点 $i(\lambda_i,\phi_i)$ 的方位角 $\theta_i$时，常用的简化公式为：<br></p>$$ \theta_i = \arctan2\big((\lambda_e-\lambda_i)\cos\phi_i, \phi_e-\phi_i\big) $$<p>给出的公式中对 $\cos \theta_i$ 的定义为：<br></p>$$ \cos \theta_i = \frac{\phi_e - \phi_i}{\sqrt{(\phi_e - \phi_i)^2 + ((\lambda_e - \lambda_i)^2 \cos^2\phi_i)}} $$<p>如果从上述 $\arctan2$ 形式出发，可以发现：</p><ul><li>分子方向为南北差 $(\phi_e - \phi_i)$，分母为总距离的平方根（类似直角三角形斜边长度）。</li><li>$\arctan2$给出的是正北方向顺时针转动的角度，将 $\cos\theta_i$ 表达为上述比值是完全可行的，只需注意 $\arctan2$ 会自动考虑象限问题，而使用 $\arccos$ 需要小心相位。但在定义清晰的前提下，这是可接受的近似和定义方式。</li></ul></li><li><p><strong>线性化处理</strong>：<br>文中将非线性关系通过平方、移项、合并后，最终导出了一组关于 $\lambda_e$、$\phi_e$ 的线性方程。给出了矩阵形式：<br></p>$$ \mathbf{A}_n \cdot \mathbf{X}=\mathbf{W}_n $$<p>其中 $\mathbf{X} = [\lambda_e, \phi_e]^T$，$\mathbf{A}_n$ 和 $\mathbf{W}_n$ 分别由测向站坐标与测量到的真方位角相关参数构成。在有两个及以上的测向方位数据时（$n \geq 2$），就可以求解 $\mathbf{X}$，即辐射源目标的经纬度。这是典型的从多条“方位直线”求交点的过程（在局部近似的投影平面中成立）。</p></li><li><p><strong>误差与假设</strong>：<br>模型中仅考虑测向方位的误差，假设测向站坐标无误差，这使得问题进一步简化。实际情况中，坐标与测量方位均可能存在误差，需要相应的误差传播与最小二乘优化来求解。但文中仅讨论理论模型的正确性与可解性，这一点不影响模型的基础正确性。</p></li></ol><p><strong>总结</strong>：<br>给定“采用简化的 Mercator 投影”、“已知测向站坐标无误差”、“测向真方位有已知（或可估计）误差”的前提条件下，文中给出的数学推导逻辑清晰、步骤合理，最终建立的二元一次线性方程组形式也是正确可行的。这套模型在一定近似下（局域范围内的地理坐标换算为近似平面问题）是成立的。</p><p>因此，从理论与推导过程来看，该模型是正确且合理的。</p><h2 id=c示例代码>C++示例代码：</h2><p>下面给出一个示例 C++ 代码，用于根据给定的测向站数据与测向真方位来求解辐射源目标的经纬度坐标 $\lambda_e, \phi_e$ 。该代码示例假设已经获得了多个测向数据点（测向站坐标 $\lambda_i, \phi_i$ 及测向方位 $\theta_i$），并使用线性代数方法求解。</p><p>这里采用 <a href=http://eigen.tuxfamily.org/ rel=external target=_blank>Eigen</a> 作为线性代数库来求解线性方程组。<br>如果只有两组测向数据（$n=2$），则对应的矩阵 $\mathbf{A}_n$ 为 $2\times2$，可直接求逆。<br>如果有多于两组数据（$n>2$），则可采用最小二乘解（Normal Equation或Eigen内置的最小二乘求解）来获得 $\lambda_e, \phi_e$ 的估计值。</p><p><strong>注意事项</strong>：</p><ul><li>测向站坐标和角度需以弧度制输入和处理。</li><li>对于 $\cos\phi_i$ 和 $\sin\theta_i$ 等需要确保 $\phi_i, \theta_i$ 已经是弧度。</li><li>数据格式与获取方式需根据实际情况调整。</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;Eigen/Dense&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 假设数据结构如下
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Measurement</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_i; <span style=color:#75715e>// 测向站经度(弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_i;    <span style=color:#75715e>// 测向站纬度(弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> theta_i;  <span style=color:#75715e>// 测向方位角(弧度)，正北为0，顺时针方向
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 示例输入数据（需根据实际情况填写）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 假设有 n 次测量，每次给定测向站位置 (lambda_i, phi_i) 和方位 theta_i
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>Measurement<span style=color:#f92672>&gt;</span> measurements <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 示例数据，请根据实际情况修改
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        { <span style=color:#ae81ff>1.234</span>, <span style=color:#ae81ff>0.456</span>, <span style=color:#ae81ff>0.523</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.235</span>, <span style=color:#ae81ff>0.457</span>, <span style=color:#ae81ff>1.047</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.237</span>, <span style=color:#ae81ff>0.460</span>, <span style=color:#ae81ff>1.570</span> }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> <span style=color:#66d9ef>static_cast</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span>(measurements.size());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;至少需要两组测向数据才能求解！&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 构建线性方程组 A * X = C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 对应关系：
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// A的每行: [cos(phi_i)*cos(theta_i), -sin(theta_i)]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// C的每行: lambda_i * cos(phi_i)*cos(theta_i) - phi_i*sin(theta_i)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// X = [lambda_e, phi_e]^T 是未知量。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>MatrixXd A(n, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>VectorXd C(n);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> lambda_i <span style=color:#f92672>=</span> measurements[i].lambda_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> phi_i    <span style=color:#f92672>=</span> measurements[i].phi_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> theta_i  <span style=color:#f92672>=</span> measurements[i].theta_i;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> a_i <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> b_i <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> c_i <span style=color:#f92672>=</span> lambda_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i) <span style=color:#f92672>-</span> phi_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> a_i;
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>=</span> b_i;
</span></span><span style=display:flex><span>        C(i)    <span style=color:#f92672>=</span> c_i;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 当 n=2 时可以直接 A.inverse()*C 求解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 当 n&gt;2 时，需要使用最小二乘求解，即 (A^T A)X = A^T C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 使用Eigen提供的最小二乘求解器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Eigen<span style=color:#f92672>::</span>VectorXd X;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 2x2可直接求逆
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        Eigen<span style=color:#f92672>::</span>Matrix2d A2;
</span></span><span style=display:flex><span>        Eigen<span style=color:#f92672>::</span>Vector2d C2;
</span></span><span style=display:flex><span>        A2 <span style=color:#f92672>&lt;&lt;</span> A(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>), A(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>              A(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>), A(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        C2 <span style=color:#f92672>&lt;&lt;</span> C(<span style=color:#ae81ff>0</span>), C(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        X <span style=color:#f92672>=</span> A2.inverse() <span style=color:#f92672>*</span> C2;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// n &gt; 2，用最小二乘法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// 正规方程: X = (A^T A)^{-1} A^T C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// 或直接使用Eigen的colPivHouseholderQr等分解进行求解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        X <span style=color:#f92672>=</span> (A.transpose() <span style=color:#f92672>*</span> A).ldlt().solve(A.transpose() <span style=color:#f92672>*</span> C);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_e <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// 求解出的辐射源经度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_e    <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>1</span>); <span style=color:#75715e>// 求解出的辐射源纬度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 输出结果
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;求解得到的辐射源坐标：&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; (弧度)&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e    <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; (弧度)&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 若需要，可将弧度转换为度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> lambda_e_deg <span style=color:#f92672>=</span> lambda_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> phi_e_deg <span style=color:#f92672>=</span> phi_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e (度) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e_deg <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    (度) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e_deg  <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p><strong>说明</strong>：</p><ul><li>在上述代码中，我们假设输入的 $\lambda_i, \phi_i, \theta_i$ 已经是弧度制。如果输入为度，需要先转换为弧度。</li><li>当 $n=2$ 时，是标准的 2x2 方程组，可直接通过逆矩阵求解。</li><li>当 $n>2$ 时，为过定方程组，采用最小二乘方法（正规方程或QR分解等方法）来求解。上例使用 <code>(A.transpose() * A).ldlt().solve(A.transpose() * C)</code> 来求最小二乘解。</li><li>实际中还应考虑误差和数值稳定性，可以使用更稳定的分解方法，如 <code>A.colPivHouseholderQr().solve(C)</code> 来得到最小二乘解。</li><li>根据需求可以对输入和输出进行更严格的检查和格式化。</li></ul><h3 id=更稳定分解的版本>更稳定分解的版本</h3><p>下面给出采用更稳定的 <code>colPivHouseholderQr()</code> 分解进行求解的示例代码。同样使用 Eigen 库来处理线性代数运算。在此示例中，只需稍作修改，通过 <code>A.colPivHouseholderQr().solve(C)</code> 来得到最小二乘解。</p><p><strong>注意事项：</strong></p><ul><li>输入输出与前例相同。</li><li>同样假设输入的坐标和角度已转换为弧度。</li><li>当有两组数据（n=2）时仍可直接求逆解，但建议统一使用QR分解求解，因其对数值稳定性更好。</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;Eigen/Dense&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 测量数据结构
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Measurement</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_i; <span style=color:#75715e>// 测向站经度 (弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_i;    <span style=color:#75715e>// 测向站纬度 (弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> theta_i;  <span style=color:#75715e>// 测向方位角 (弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 示例测量数据，需根据实际情况修改
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>Measurement<span style=color:#f92672>&gt;</span> measurements <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.234</span>, <span style=color:#ae81ff>0.456</span>, <span style=color:#ae81ff>0.523</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.235</span>, <span style=color:#ae81ff>0.457</span>, <span style=color:#ae81ff>1.047</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.237</span>, <span style=color:#ae81ff>0.460</span>, <span style=color:#ae81ff>1.570</span> }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> <span style=color:#66d9ef>static_cast</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span>(measurements.size());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;至少需要两组测向数据才能求解！&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>MatrixXd A(n, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>VectorXd C(n);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 构建方程组 A * X = C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// A的每行对应: [cos(phi_i)*cos(theta_i), -sin(theta_i)]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// C的每行对应: lambda_i*cos(phi_i)*cos(theta_i) - phi_i*sin(theta_i)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> lambda_i <span style=color:#f92672>=</span> measurements[i].lambda_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> phi_i    <span style=color:#f92672>=</span> measurements[i].phi_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> theta_i  <span style=color:#f92672>=</span> measurements[i].theta_i;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> a_i <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> b_i <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> c_i <span style=color:#f92672>=</span> lambda_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i) <span style=color:#f92672>-</span> phi_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> a_i;
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>=</span> b_i;
</span></span><span style=display:flex><span>        C(i)    <span style=color:#f92672>=</span> c_i;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 使用更加数值稳定的分解法求解最小二乘问题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Eigen<span style=color:#f92672>::</span>VectorXd X <span style=color:#f92672>=</span> A.colPivHouseholderQr().solve(C);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_e <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// 辐射源经度 (弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_e    <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>1</span>); <span style=color:#75715e>// 辐射源纬度 (弧度)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;求解得到的辐射源坐标(弧度)：&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 若需要度制输出
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> lambda_e_deg <span style=color:#f92672>=</span> lambda_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> phi_e_deg <span style=color:#f92672>=</span> phi_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;辐射源坐标(度)：&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e (deg) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e_deg <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    (deg) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e_deg <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>通过上述修改，当测向数据点多于2个时，<code>colPivHouseholderQr()</code> 的方法能够在一定程度上提高数值稳定性和求解精度，对于实际中不适定或近似共线的情况能提供更稳定的结果。</p><h2 id=无源侦察测向定位计算器>无源侦察测向定位计算器</h2><p><a href=https://claude.site/artifacts/c9ff1d40-3bad-4001-97f7-f2c2030d30a6 rel=external target=_blank>https://claude.site/artifacts/c9ff1d40-3bad-4001-97f7-f2c2030d30a6</a></p><ul><li>其中辐射源位置用于与测向定位后结果做对比，使用了球面距离计算公式（Haversine公式）来计算两个经纬度点之间的距离。计算时使用地球平均半径为 6371000 米。</li><li>在结果显示部分增加了两个新的区域：<ul><li>&ldquo;计算位置到各测向站的距离&rdquo;：显示计算出的辐射源位置到每个测向站的距离</li><li>&ldquo;测向站之间的距离&rdquo;：显示各个测向站之间的距离</li></ul></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Card</span>, <span style=color:#a6e22e>CardHeader</span>, <span style=color:#a6e22e>CardTitle</span>, <span style=color:#a6e22e>CardContent</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/card&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/button&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Input</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/input&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RadiationCalculator</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>measurements</span>, <span style=color:#a6e22e>setMeasurements</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([
</span></span><span style=display:flex><span>    { <span style=color:#a6e22e>lambda_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>phi_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>theta_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span> }
</span></span><span style=display:flex><span>  ]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>actualSource</span>, <span style=color:#a6e22e>setActualSource</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lambda_e</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>phi_e</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>result</span>, <span style=color:#a6e22e>setResult</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 计算两点间的距离（米）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculateDistance</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>lat1</span>, <span style=color:#a6e22e>lon1</span>, <span style=color:#a6e22e>lat2</span>, <span style=color:#a6e22e>lon2</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>6371000</span>; <span style=color:#75715e>// 地球平均半径（米）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lat1</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lat2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deltaPhi</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>lat2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>lat1</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deltaLambda</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>lon2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>lon1</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaPhi</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaPhi</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>              Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>phi1</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>phi2</span>) <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>              Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaLambda</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaLambda</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>atan2</span>(Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#a6e22e>a</span>), Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>-</span><span style=color:#a6e22e>a</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>c</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>distance</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 计算所有站点之间的距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculateAllDistances</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sourcePos</span>, <span style=color:#a6e22e>stations</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distances</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sourceToStations</span><span style=color:#f92672>:</span> [], <span style=color:#75715e>// 辐射源到各测向站的距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>betweenStations</span><span style=color:#f92672>:</span> [] <span style=color:#75715e>// 测向站之间的距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 计算辐射源到各测向站的距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>stations</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>station</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateDistance</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sourcePos</span>.<span style=color:#a6e22e>phi</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sourcePos</span>.<span style=color:#a6e22e>lambda</span>,
</span></span><span style=display:flex><span>        parseFloat(<span style=color:#a6e22e>station</span>.<span style=color:#a6e22e>phi_i</span>),
</span></span><span style=display:flex><span>        parseFloat(<span style=color:#a6e22e>station</span>.<span style=color:#a6e22e>lambda_i</span>)
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>sourceToStations</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stationIndex</span>: <span style=color:#66d9ef>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distance</span>: <span style=color:#66d9ef>distance</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span> <span style=color:#75715e>// 转换为公里
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 计算测向站之间的距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>stations</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>stations</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateDistance</span>(
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>phi_i</span>),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>lambda_i</span>),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>phi_i</span>),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>lambda_i</span>)
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>betweenStations</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>station1</span>: <span style=color:#66d9ef>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>station2</span>: <span style=color:#66d9ef>j</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>distance</span>: <span style=color:#66d9ef>distance</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span> <span style=color:#75715e>// 转换为公里
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>distances</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>addMeasurement</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setMeasurements</span>([...<span style=color:#a6e22e>measurements</span>, { <span style=color:#a6e22e>lambda_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>phi_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>theta_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span> }]);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>removeMeasurement</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>index</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newMeasurements</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>index</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setMeasurements</span>(<span style=color:#a6e22e>newMeasurements</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleMeasurementChange</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>index</span>, <span style=color:#a6e22e>field</span>, <span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newMeasurements</span> <span style=color:#f92672>=</span> [...<span style=color:#a6e22e>measurements</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>newMeasurements</span>[<span style=color:#a6e22e>index</span>][<span style=color:#a6e22e>field</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setMeasurements</span>(<span style=color:#a6e22e>newMeasurements</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculatePosition</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 将度数转换为弧度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>measurementsRad</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>m</span> <span style=color:#f92672>=&gt;</span> ({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>lambda_i</span>: <span style=color:#66d9ef>parseFloat</span>(<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>lambda_i</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>phi_i</span>: <span style=color:#66d9ef>parseFloat</span>(<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>phi_i</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>theta_i</span>: <span style=color:#66d9ef>parseFloat</span>(<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>theta_i</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurementsRad</span>.<span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>n</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;至少需要两组测向数据！&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 构建方程组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#a6e22e>n</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>).<span style=color:#a6e22e>map</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>2</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>C</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#a6e22e>n</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>n</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>lambda_i</span>, <span style=color:#a6e22e>phi_i</span>, <span style=color:#a6e22e>theta_i</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurementsRad</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cos_phi</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>phi_i</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cos_theta</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>theta_i</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sin_theta</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>theta_i</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>A</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>cos_phi</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>cos_theta</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>A</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>sin_theta</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>C</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>lambda_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>cos_phi</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>cos_theta</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>phi_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin_theta</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 使用最小二乘法求解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>AT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>A</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>colIndex</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>A</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>colIndex</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ATA</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>AT</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>A</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>j</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>sum</span>, <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>k</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>k</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>A</span>[<span style=color:#a6e22e>k</span>][<span style=color:#a6e22e>j</span>], <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ATC</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>AT</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>sum</span>, <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>C</span>[<span style=color:#a6e22e>i</span>], <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>det</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lambda_e</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>/</span> <span style=color:#a6e22e>det</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi_e</span> <span style=color:#f92672>=</span> (<span style=color:#f92672>-</span><span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>/</span> <span style=color:#a6e22e>det</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 转换回度数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lambda_e_deg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lambda_e</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>180</span> <span style=color:#f92672>/</span> Math.<span style=color:#a6e22e>PI</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi_e_deg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>phi_e</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>180</span> <span style=color:#f92672>/</span> Math.<span style=color:#a6e22e>PI</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 计算与实际位置的偏差
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>actual_lambda</span> <span style=color:#f92672>=</span> parseFloat(<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>lambda_e</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>actual_phi</span> <span style=color:#f92672>=</span> parseFloat(<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>phi_e</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lambda_error</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>lambda_e_deg</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>actual_lambda</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi_error</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>phi_e_deg</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>actual_phi</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 计算距离偏差
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance_error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateDistance</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>actual_phi</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>actual_lambda</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>phi_e_deg</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>lambda_e_deg</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 计算所有站点之间的距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculatedDistances</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateAllDistances</span>(
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>lambda_e_deg</span>, <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>phi_e_deg</span> },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>measurements</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>actualDistances</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateAllDistances</span>(
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>actual_lambda</span>, <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>actual_phi</span> },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>measurements</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setResult</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>calculated</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>lambda_e_deg.toFixed</span>(<span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>phi_e_deg.toFixed</span>(<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>lambda_error.toFixed</span>(<span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>phi_error.toFixed</span>(<span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>distance_error</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span>).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>3</span>)  <span style=color:#75715e>// 转换为公里
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>distances</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>calculated</span>: <span style=color:#66d9ef>calculatedDistances</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>actual</span>: <span style=color:#66d9ef>actualDistances</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Card</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full max-w-4xl&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>CardTitle</span>&gt;<span style=color:#960050;background-color:#1e0010>辐射源定位计算器</span>&lt;/<span style=color:#f92672>CardTitle</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardContent</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-6&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>实际辐射源位置（度）：</span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-2 gap-4&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>辐射源经度</span> (<span style=color:#960050;background-color:#1e0010>λ</span><span style=color:#a6e22e>e</span>)<span style=color:#960050;background-color:#1e0010>：</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>lambda_e</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setActualSource</span>({...<span style=color:#a6e22e>actualSource</span>, <span style=color:#a6e22e>lambda_e</span>: <span style=color:#66d9ef>e.target.value</span>})}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入实际经度&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>辐射源纬度</span> (<span style=color:#960050;background-color:#1e0010>φ</span><span style=color:#a6e22e>e</span>)<span style=color:#960050;background-color:#1e0010>：</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>phi_e</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setActualSource</span>({...<span style=color:#a6e22e>actualSource</span>, <span style=color:#a6e22e>phi_e</span>: <span style=color:#66d9ef>e.target.value</span>})}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入实际纬度&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>测向站数据（度）：</span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          {<span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>m</span>, <span style=color:#a6e22e>index</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>index</span>} <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-3 gap-4 items-end&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>测向站经度</span> (<span style=color:#960050;background-color:#1e0010>λ</span><span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>：</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>lambda_i</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleMeasurementChange</span>(<span style=color:#a6e22e>index</span>, <span style=color:#e6db74>&#39;lambda_i&#39;</span>, <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入测向站经度&#34;</span>
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>测向站纬度</span> (<span style=color:#960050;background-color:#1e0010>φ</span><span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>：</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>phi_i</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleMeasurementChange</span>(<span style=color:#a6e22e>index</span>, <span style=color:#e6db74>&#39;phi_i&#39;</span>, <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入测向站纬度&#34;</span>
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>方位角</span> (<span style=color:#960050;background-color:#1e0010>θ</span><span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>：</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>theta_i</span>}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleMeasurementChange</span>(<span style=color:#a6e22e>index</span>, <span style=color:#e6db74>&#39;theta_i&#39;</span>, <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入方位角&#34;</span>
</span></span><span style=display:flex><span>                  /&gt;
</span></span><span style=display:flex><span>                  {<span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> (
</span></span><span style=display:flex><span>                    &lt;<span style=color:#f92672>Button</span> 
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;destructive&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;px-3&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>removeMeasurement</span>(<span style=color:#a6e22e>index</span>)}
</span></span><span style=display:flex><span>                    &gt;
</span></span><span style=display:flex><span>                      <span style=color:#960050;background-color:#1e0010>删除</span>
</span></span><span style=display:flex><span>                    &lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>                  )}
</span></span><span style=display:flex><span>                &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          ))}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-x-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>addMeasurement</span>}&gt;<span style=color:#960050;background-color:#1e0010>添加测向站</span>&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>calculatePosition</span>}&gt;<span style=color:#960050;background-color:#1e0010>计算位置</span>&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>result</span> <span style=color:#f92672>&amp;&amp;</span> (
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mt-6 p-4 bg-gray-100 rounded-lg&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium mb-2&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>计算结果：</span>&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>计算得到的位置：</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>经度</span> (<span style=color:#960050;background-color:#1e0010>λ</span><span style=color:#a6e22e>e</span>) <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>lambda</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>纬度</span> (<span style=color:#960050;background-color:#1e0010>φ</span><span style=color:#a6e22e>e</span>) <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>phi</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>与实际位置的偏差：</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>经度偏差</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>lambda</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>纬度偏差</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>phi</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>距离偏差</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>distance</span>} <span style=color:#960050;background-color:#1e0010>公里</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>计算位置到各测向站的距离：</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>sourceToStations</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>dist</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>idx</span>}&gt;
</span></span><span style=display:flex><span>                    <span style=color:#960050;background-color:#1e0010>到测向站</span>{<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>stationIndex</span>}<span style=color:#f92672>:</span> {<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>distance</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>3</span>)} <span style=color:#960050;background-color:#1e0010>公里</span>
</span></span><span style=display:flex><span>                  &lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                ))}
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>测向站之间的距离：</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>betweenStations</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>dist</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>idx</span>}&gt;
</span></span><span style=display:flex><span>                    <span style=color:#960050;background-color:#1e0010>测向站</span>{<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>station1</span>}<span style=color:#960050;background-color:#1e0010>到测向站</span>{<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>station2</span>}<span style=color:#f92672>:</span> {<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>distance</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>3</span>)} <span style=color:#960050;background-color:#1e0010>公里</span>
</span></span><span style=display:flex><span>                  &lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                ))}
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        )}
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardContent</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Card</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>RadiationCalculator</span>;</span></span></code></pre></div><footer class=footline><i class='fa-fw fas fa-calendar'></i> 2025-05-21</footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo href=/index.html><img src=/images/logo.png alt="FlitSoft Docs" style=width:80px;height:auto></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class=default-animation><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/uas/index.html><a class=padding href=/uas/index.html>UAS</a><ul id=R-subsections-50d6e18f3c774adcdf96c62beb3fb9ae class=collapsible-menu></ul></li><li class=parent data-nav-id=/em/index.html><a class=padding href=/em/index.html>EM</a><ul id=R-subsections-5221d921411ef33ede36c0310590339e class=collapsible-menu><li class=alwaysopen data-nav-id=/em/antenna-pattern/index.html><a class=padding href=/em/antenna-pattern/index.html>Antenna Pattern</a><ul id=R-subsections-ccb34e1afa1278e5b9fa47ea16615cf2 class=collapsible-menu></ul></li><li class=alwaysopen data-nav-id=/em/comm/index.html><a class=padding href=/em/comm/index.html>Communication</a><ul id=R-subsections-76a132cf152c8c25082aa45ad7e583aa class=collapsible-menu></ul></li><li class="parent alwaysopen" data-nav-id=/em/radar/index.html><a class=padding href=/em/radar/index.html>Radar</a><ul id=R-subsections-ffd05e868c4f9d0f123a8646ca79cb9c class=collapsible-menu><li class=active data-nav-id=/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html>无源侦察测向定位模型</a></li><li data-nav-id=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%E7%A9%BA%E5%AF%B9%E5%9C%B0/index.html><a class=padding href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%E7%A9%BA%E5%AF%B9%E5%9C%B0/index.html>空对地雷达对抗侦察效能模型</a></li><li data-nav-id=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E9%80%9A%E7%94%A8%E4%BE%A6%E5%AF%9F%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E9%80%9A%E7%94%A8%E4%BE%A6%E5%AF%9F%E6%A8%A1%E5%9E%8B/index.html>雷达对抗侦察效能通用模型</a></li><li data-nav-id=/em/radar/%E9%9B%B7%E8%BE%BE%E5%B9%B2%E6%89%B0%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8Bv3/index.html><a class=padding href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%B9%B2%E6%89%B0%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8Bv3/index.html>雷达干扰效能模型</a></li></ul></li></ul></li><li data-nav-id=/agi/index.html><a class=padding href=/agi/index.html>AI</a><ul id=R-subsections-b697951847df19851ae8635cac95c15a class=collapsible-menu></ul></li><li data-nav-id=/gaming/index.html><a class=padding href=/gaming/index.html>Gaming</a></li><li data-nav-id=/c2/index.html><a class=padding href=/c2/index.html>C2</a><ul id=R-subsections-e0126222f5f1b52fd67c95ccf5ad1c18 class=collapsible-menu></ul></li><li data-nav-id=/simu/index.html><a class=padding href=/simu/index.html>Simulation</a><ul id=R-subsections-80cfed847676c641fa01f11f3f2904bf class=collapsible-menu></ul></li><li data-nav-id=/visual/index.html><a class=padding href=/visual/index.html>Visualization</a><ul id=R-subsections-080a96fba97ea97926a463e36c9cb108 class=collapsible-menu></ul></li><li data-nav-id=/log/index.html><a class=padding href=/log/index.html>Log</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-light value=zen-light selected>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1749302463 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1749302463 defer></script><script>window.MathJax=Object.assign(window.MathJax||{},{tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},options:{enableMenu:!1}},JSON.parse("{}"))</script><script id=MathJax-script async src=/js/mathjax/tex-mml-chtml.js?1749302463></script><script src=/js/theme.min.js?1749302463 defer></script></body></html>