<!doctype html><html lang=zh-cn dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.147.3"><meta name=generator content="Relearn 7.6.1+4407b4364ab6f7477f7671fbd20c0494bade40ee"><meta name=description content="è¯¥æ¨¡å‹ç”¨äºæ ¹æ®ç»™å®šçš„æµ‹å‘ç«™æ•°æ®ä¸æµ‹å‘çœŸæ–¹ä½æ¥æ±‚è§£è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦åæ ‡ã€‚ç»™å‡ºçš„C++ä»£ç ç¤ºä¾‹å‡è®¾å·²ç»è·å¾—äº†å¤šä¸ªæµ‹å‘æ•°æ®ç‚¹ï¼ˆæµ‹å‘ç«™åæ ‡åŠæµ‹å‘æ–¹ä½ï¼‰ï¼Œå¹¶ä½¿ç”¨çº¿æ€§ä»£æ•°æ–¹æ³•æ±‚è§£ã€‚"><meta name=author content="ä½ çš„åå­—"><meta name=twitter:card content="summary"><meta name=twitter:title content="æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹ :: FlitSoft Docs"><meta name=twitter:description content="è¯¥æ¨¡å‹ç”¨äºæ ¹æ®ç»™å®šçš„æµ‹å‘ç«™æ•°æ®ä¸æµ‹å‘çœŸæ–¹ä½æ¥æ±‚è§£è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦åæ ‡ã€‚ç»™å‡ºçš„C++ä»£ç ç¤ºä¾‹å‡è®¾å·²ç»è·å¾—äº†å¤šä¸ªæµ‹å‘æ•°æ®ç‚¹ï¼ˆæµ‹å‘ç«™åæ ‡åŠæµ‹å‘æ–¹ä½ï¼‰ï¼Œå¹¶ä½¿ç”¨çº¿æ€§ä»£æ•°æ–¹æ³•æ±‚è§£ã€‚"><meta property="og:url" content="https://hill68.github.io/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html"><meta property="og:site_name" content="FlitSoft Docs"><meta property="og:title" content="æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹ :: FlitSoft Docs"><meta property="og:description" content="è¯¥æ¨¡å‹ç”¨äºæ ¹æ®ç»™å®šçš„æµ‹å‘ç«™æ•°æ®ä¸æµ‹å‘çœŸæ–¹ä½æ¥æ±‚è§£è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦åæ ‡ã€‚ç»™å‡ºçš„C++ä»£ç ç¤ºä¾‹å‡è®¾å·²ç»è·å¾—äº†å¤šä¸ªæµ‹å‘æ•°æ®ç‚¹ï¼ˆæµ‹å‘ç«™åæ ‡åŠæµ‹å‘æ–¹ä½ï¼‰ï¼Œå¹¶ä½¿ç”¨çº¿æ€§ä»£æ•°æ–¹æ³•æ±‚è§£ã€‚"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="EM"><meta property="article:published_time" content="2025-05-21T15:43:38+08:00"><meta property="article:modified_time" content="2025-05-21T15:43:38+08:00"><meta itemprop=name content="æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹ :: FlitSoft Docs"><meta itemprop=description content="è¯¥æ¨¡å‹ç”¨äºæ ¹æ®ç»™å®šçš„æµ‹å‘ç«™æ•°æ®ä¸æµ‹å‘çœŸæ–¹ä½æ¥æ±‚è§£è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦åæ ‡ã€‚ç»™å‡ºçš„C++ä»£ç ç¤ºä¾‹å‡è®¾å·²ç»è·å¾—äº†å¤šä¸ªæµ‹å‘æ•°æ®ç‚¹ï¼ˆæµ‹å‘ç«™åæ ‡åŠæµ‹å‘æ–¹ä½ï¼‰ï¼Œå¹¶ä½¿ç”¨çº¿æ€§ä»£æ•°æ–¹æ³•æ±‚è§£ã€‚"><meta itemprop=datePublished content="2025-05-21T15:43:38+08:00"><meta itemprop=dateModified content="2025-05-21T15:43:38+08:00"><meta itemprop=wordCount content="1704"><title>æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹ :: FlitSoft Docs</title>
<link href=/images/logo.png?1749302463 rel=icon type=image/png><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1749302463 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1749302463 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1749302463 rel=stylesheet><link href=/css/theme.min.css?1749302463 rel=stylesheet><link href=/css/format-html.min.css?1749302463 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1749302463 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1749302463 defer></script><script src=/js/lunr/lunr.min.js?1749302463 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1749302463 defer></script><script src=/js/lunr/lunr.multi.min.js?1749302463 defer></script><script src=/js/lunr/lunr.zh.min.js?1749302463 defer></script><script src=/js/search.min.js?1749302463 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://hill68.github.io",window.relearn.contentLangs=["zh"],window.relearn.index_js_url="/searchindex.en.js?1749302463",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["zen-light","zen-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/css/custom.css?1749302463 rel=stylesheet></head><body class="mobile-support html" data-url=/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#æ¨¡å‹è®¾è®¡>æ¨¡å‹è®¾è®¡</a></li><li><a href=#æ¨¡å‹é€‚åº”æ€§åˆ†æ>æ¨¡å‹é€‚åº”æ€§åˆ†æ</a></li><li><a href=#cç¤ºä¾‹ä»£ç >C++ç¤ºä¾‹ä»£ç ï¼š</a><ul><li><a href=#æ›´ç¨³å®šåˆ†è§£çš„ç‰ˆæœ¬>æ›´ç¨³å®šåˆ†è§£çš„ç‰ˆæœ¬</a></li></ul></li><li><a href=#æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½è®¡ç®—å™¨>æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½è®¡ç®—å™¨</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>FlitSoft Docs</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/index.html><span itemprop=name>EM</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/radar/index.html><span itemprop=name>Radar</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/radar/index.html title="Radar (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%E7%A9%BA%E5%AF%B9%E5%9C%B0/index.html title="ç©ºå¯¹åœ°é›·è¾¾å¯¹æŠ—ä¾¦å¯Ÿæ•ˆèƒ½æ¨¡å‹ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable em" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹>æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹</h1><h2 id=æ¨¡å‹è®¾è®¡>æ¨¡å‹è®¾è®¡</h2><p>ç”±äºåœ°çƒæ˜¯ä¸€ä¸ªæ¤­çƒä½“ï¼Œå› æ­¤ä¸èƒ½ç®€å•ç”¨å¹³é¢çš„æ•°å­¦æ¨¡å‹ã€‚è€ƒè™‘åˆ°æˆ‘å›½åœ°å¤„ä¸œåŒ—åŠçƒï¼Œé‡‡ç”¨ç®€åŒ–çš„ Mercator æŠ•å½±ï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p>$$
\theta_i=\arccos \frac{\phi_e-\phi_i}{\sqrt{\left(\phi_e-\phi_i\right)^2+\left(\lambda_e-\lambda_i\right)^2 \cos ^2 \phi_i}} \tag{1}
$$<p>ä¸Šå¼ä¸­è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦åæ ‡ä¸º $\left(\lambda_e, \phi_e\right)$, æµ‹å‘çœŸæ–¹ä½ $\theta_i$, æµ‹å‘ç«™åæ ‡ $(\lambda_{\mathrm{i}}, \phi_{\mathrm{i}}$ ï¼‰ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­, è¾å°„æºç›®æ ‡çš„åæ ‡æ˜¯ä¸€ä¸ªä¼°è®¡å€¼, æµ‹å‘çœŸæ–¹ä½å«æœ‰è¯¯å·®, æµ‹å‘ç«™çš„åæ ‡ä¹Ÿå¯èƒ½å«æœ‰è¯¯å·®ã€‚æµ‹å‘ç«™åæ ‡æ˜¯å¯ä»¥ä¿®æ­£çš„ï¼Œåœ¨ä¸‹é¢çš„è®¨è®ºä¸­å‡è®¾æ˜¯æ²¡æœ‰è¯¯å·®çš„ã€‚åªè®¨è®ºæµ‹å‘æ–¹ä½å«æœ‰è¯¯å·®çš„æƒ…å†µã€‚
$\lambda_e=$ è¾å°„æºç»åº¦
$\phi_{\mathrm{e}}=$ è¾å°„æºçº¬åº¦
$\lambda_i=$ æµ‹å‘ç«™ç»åº¦
$\phi_{\mathrm{i}}=$ æµ‹å‘ç«™çº¬åº¦
$\theta_{\mathrm{i}}=$ åœ¨ç¬¬ i ä¸ªæµ‹å‘ä½ç½®çš„è¾å°„æºçœŸæ–¹ä½, æ­£åŒ—é¡ºæ—¶é’ˆè®¡ç®—</p><p>å¦‚å›¾1æ‰€ç¤º:</p><p>&lt;img src=&ldquo;<a href=https://cdn.mathpix.com/snip/images/JrF0XmCtGV-a9fLtExlAt3jkv1Xd9Sm51rE76nSnn_8.original.fullsize.png%22 rel=external target=_blank>https://cdn.mathpix.com/snip/images/JrF0XmCtGV-a9fLtExlAt3jkv1Xd9Sm51rE76nSnn_8.original.fullsize.png"</a> /</p><p>æ ¹æ®(1)å¼, æˆ‘ä»¬å°†å®ƒå†™æˆå¦‚ä¸‹å½¢å¼:</p>$$
\cos \theta_i \sqrt{\left(\phi_e-\phi_i\right)^2+\left(\lambda_e-\lambda_i\right)^2 \cos ^2 \phi_i}=\phi_e-\phi_i
$$<p>å°†ä¸Šå¼ä¸¤è¾¹å¹³æ–¹ã€ç§»é¡¹ã€åˆå¹¶åå†ä¸¤è¾¹å¼€æ–¹, å†™æˆå…³äºå˜é‡ $\lambda \mathrm{e}$ å’Œ $\phi_\mathrm{e}$ çš„äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹</p>$$
\cos \phi_i \cos \theta_{\mathrm{i}} \cdot \lambda_e-\sin \theta_{\mathrm{i}} \cdot \phi_e=\lambda_i \cos \phi_i \cos \theta_{\mathrm{i}}-\phi_i \sin \theta_{\mathrm{i}}
$$<p>å¯¹äºå¤šäºä¸€æ¬¡çš„æµ‹å‘å€¼, å†™æˆçŸ©é˜µå½¢å¼å¦‚ä¸‹:</p>$$
\mathbf{A}_n \cdot \mathbf{X}=\mathbf{W}_n
$$<p>å…¶ä¸­</p>$$
\begin{array}{r}
\mathbf{A}_n=\left[\begin{array}{cc}
\cos \phi_1 \cos \theta_1 & -\sin \theta_1 \\
\vdots & \vdots \\
\cos \phi_n \cos \theta_n & -\sin \theta_n
\end{array}\right], \quad \mathbf{W}_n=\left[\begin{array}{cc}
\lambda_1 \cos \phi_1 \cos \theta_1 & -\phi_1 \sin \theta_1 \\
\vdots & \vdots \\
\lambda_n \cos \phi_n \cos \theta_n & -\phi_n \sin \theta_n
\end{array}\right], \quad \mathbf{X}=\left[\begin{array}{l}
\lambda_e \\
\phi_e
\end{array}\right], \\
n \geq 2
\end{array}
$$<p>æ ¹æ®çº¿æ€§ä»£æ•°çš„ç†è®º, æœ‰ä¸¤æ¬¡å’Œä¸¤æ¬¡ä»¥ä¸Šçš„æµ‹å‘å€¼å°±å¯ä»¥è§£å‡º $\lambda_e$ å’Œ $\phi_e$, åˆ™ $\lambda_e$ å’Œ $\phi_e$ çš„è§£å‘é‡ $\mathbf{X}$ ä¸º</p>$$
\mathbf{X}=\mathbf{A}_n^{-1} \cdot \mathbf{W}_n
$$<h2 id=æ¨¡å‹é€‚åº”æ€§åˆ†æ>æ¨¡å‹é€‚åº”æ€§åˆ†æ</h2><p>æ•´ä½“æ¥çœ‹ï¼Œè¯¥æ¨¡å‹åœ¨ç»™å®šçš„å‰æå’Œå‡è®¾ä¸‹æ˜¯åˆç†çš„ã€‚åˆ†æå¦‚ä¸‹ï¼š</p><ol><li><p><strong>æŠ•å½±ä¸æ¨¡å‹è®¾å®š</strong>ï¼š<br>æ¨¡å‹ä¸­æ˜ç¡®è¯´æ˜ç”±åœ°çƒçš„æ¤­çƒä½“ç‰¹æ€§å‡ºå‘ï¼Œè€Œéç®€å•çš„å¹³é¢æ¨¡å‹ï¼Œä¸ºæ­¤é‡‡ç”¨äº†ç®€åŒ–çš„ Mercator æŠ•å½±ã€‚æ­¤ç±»æŠ•å½±åœ¨å±€éƒ¨èŒƒå›´å†…å¯ä»¥è¿‘ä¼¼åœ°å°†ç»çº¬åº¦åæ ‡è½¬åŒ–ä¸ºä¸å¹³é¢åæ ‡ç›¸ç±»ä¼¼çš„å½¢å¼ï¼Œä»è€Œä½¿é—®é¢˜ç®€åŒ–ä¸ºç±»å¹³é¢å‡ ä½•é—®é¢˜ã€‚</p><p>åœ¨è¯¥æŠ•å½±ä¸‹ï¼Œå°†ä½ç½®ç”±$(\lambda,\phi)$æ˜ å°„åˆ°è¿‘ä¼¼å¹³é¢åæ ‡æ—¶ï¼Œä¸€èˆ¬ä¼šæœ‰å¯¹ç»åº¦å·®å¼‚ä¹˜ä»¥$\cos \phi$çš„ä¿®æ­£ï¼Œä»¥ç¡®ä¿ç»çº¬åº¦å·®åœ¨å±€éƒ¨èŒƒå›´å†…ä¸å®é™…çš„ä¸œè¥¿å‘è·ç¦»å˜åŒ–ä¸€è‡´ã€‚è¿™ä¸€ç‚¹åœ¨æ¨¡å‹ä¸­å·²ä½“ç°ï¼š<br></p>$$\sqrt{(\phi_e-\phi_i)^2 + ((\lambda_e-\lambda_i)^2\cos^2\phi_i)}$$<p><br>ä¸­å¯¹ç»åº¦å·®$(\lambda_e-\lambda_i)$å¼•å…¥äº†$\cos\phi_i$å› å­ã€‚</p></li><li><p><strong>æ–¹ä½è§’å…¬å¼çš„åˆç†æ€§</strong>ï¼š<br>ä¸€èˆ¬åœ¨çƒé¢æˆ–è¿‘ä¼¼å¹³é¢ä¸Šæ±‚ç‚¹ $e(\lambda_e,\phi_e)$ ç›¸å¯¹äºç‚¹ $i(\lambda_i,\phi_i)$ çš„æ–¹ä½è§’ $\theta_i$æ—¶ï¼Œå¸¸ç”¨çš„ç®€åŒ–å…¬å¼ä¸ºï¼š<br></p>$$ \theta_i = \arctan2\big((\lambda_e-\lambda_i)\cos\phi_i, \phi_e-\phi_i\big) $$<p>ç»™å‡ºçš„å…¬å¼ä¸­å¯¹ $\cos \theta_i$ çš„å®šä¹‰ä¸ºï¼š<br></p>$$ \cos \theta_i = \frac{\phi_e - \phi_i}{\sqrt{(\phi_e - \phi_i)^2 + ((\lambda_e - \lambda_i)^2 \cos^2\phi_i)}} $$<p>å¦‚æœä»ä¸Šè¿° $\arctan2$ å½¢å¼å‡ºå‘ï¼Œå¯ä»¥å‘ç°ï¼š</p><ul><li>åˆ†å­æ–¹å‘ä¸ºå—åŒ—å·® $(\phi_e - \phi_i)$ï¼Œåˆ†æ¯ä¸ºæ€»è·ç¦»çš„å¹³æ–¹æ ¹ï¼ˆç±»ä¼¼ç›´è§’ä¸‰è§’å½¢æ–œè¾¹é•¿åº¦ï¼‰ã€‚</li><li>$\arctan2$ç»™å‡ºçš„æ˜¯æ­£åŒ—æ–¹å‘é¡ºæ—¶é’ˆè½¬åŠ¨çš„è§’åº¦ï¼Œå°† $\cos\theta_i$ è¡¨è¾¾ä¸ºä¸Šè¿°æ¯”å€¼æ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œåªéœ€æ³¨æ„ $\arctan2$ ä¼šè‡ªåŠ¨è€ƒè™‘è±¡é™é—®é¢˜ï¼Œè€Œä½¿ç”¨ $\arccos$ éœ€è¦å°å¿ƒç›¸ä½ã€‚ä½†åœ¨å®šä¹‰æ¸…æ™°çš„å‰æä¸‹ï¼Œè¿™æ˜¯å¯æ¥å—çš„è¿‘ä¼¼å’Œå®šä¹‰æ–¹å¼ã€‚</li></ul></li><li><p><strong>çº¿æ€§åŒ–å¤„ç†</strong>ï¼š<br>æ–‡ä¸­å°†éçº¿æ€§å…³ç³»é€šè¿‡å¹³æ–¹ã€ç§»é¡¹ã€åˆå¹¶åï¼Œæœ€ç»ˆå¯¼å‡ºäº†ä¸€ç»„å…³äº $\lambda_e$ã€$\phi_e$ çš„çº¿æ€§æ–¹ç¨‹ã€‚ç»™å‡ºäº†çŸ©é˜µå½¢å¼ï¼š<br></p>$$ \mathbf{A}_n \cdot \mathbf{X}=\mathbf{W}_n $$<p>å…¶ä¸­ $\mathbf{X} = [\lambda_e, \phi_e]^T$ï¼Œ$\mathbf{A}_n$ å’Œ $\mathbf{W}_n$ åˆ†åˆ«ç”±æµ‹å‘ç«™åæ ‡ä¸æµ‹é‡åˆ°çš„çœŸæ–¹ä½è§’ç›¸å…³å‚æ•°æ„æˆã€‚åœ¨æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šçš„æµ‹å‘æ–¹ä½æ•°æ®æ—¶ï¼ˆ$n \geq 2$ï¼‰ï¼Œå°±å¯ä»¥æ±‚è§£ $\mathbf{X}$ï¼Œå³è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦ã€‚è¿™æ˜¯å…¸å‹çš„ä»å¤šæ¡â€œæ–¹ä½ç›´çº¿â€æ±‚äº¤ç‚¹çš„è¿‡ç¨‹ï¼ˆåœ¨å±€éƒ¨è¿‘ä¼¼çš„æŠ•å½±å¹³é¢ä¸­æˆç«‹ï¼‰ã€‚</p></li><li><p><strong>è¯¯å·®ä¸å‡è®¾</strong>ï¼š<br>æ¨¡å‹ä¸­ä»…è€ƒè™‘æµ‹å‘æ–¹ä½çš„è¯¯å·®ï¼Œå‡è®¾æµ‹å‘ç«™åæ ‡æ— è¯¯å·®ï¼Œè¿™ä½¿å¾—é—®é¢˜è¿›ä¸€æ­¥ç®€åŒ–ã€‚å®é™…æƒ…å†µä¸­ï¼Œåæ ‡ä¸æµ‹é‡æ–¹ä½å‡å¯èƒ½å­˜åœ¨è¯¯å·®ï¼Œéœ€è¦ç›¸åº”çš„è¯¯å·®ä¼ æ’­ä¸æœ€å°äºŒä¹˜ä¼˜åŒ–æ¥æ±‚è§£ã€‚ä½†æ–‡ä¸­ä»…è®¨è®ºç†è®ºæ¨¡å‹çš„æ­£ç¡®æ€§ä¸å¯è§£æ€§ï¼Œè¿™ä¸€ç‚¹ä¸å½±å“æ¨¡å‹çš„åŸºç¡€æ­£ç¡®æ€§ã€‚</p></li></ol><p><strong>æ€»ç»“</strong>ï¼š<br>ç»™å®šâ€œé‡‡ç”¨ç®€åŒ–çš„ Mercator æŠ•å½±â€ã€â€œå·²çŸ¥æµ‹å‘ç«™åæ ‡æ— è¯¯å·®â€ã€â€œæµ‹å‘çœŸæ–¹ä½æœ‰å·²çŸ¥ï¼ˆæˆ–å¯ä¼°è®¡ï¼‰è¯¯å·®â€çš„å‰ææ¡ä»¶ä¸‹ï¼Œæ–‡ä¸­ç»™å‡ºçš„æ•°å­¦æ¨å¯¼é€»è¾‘æ¸…æ™°ã€æ­¥éª¤åˆç†ï¼Œæœ€ç»ˆå»ºç«‹çš„äºŒå…ƒä¸€æ¬¡çº¿æ€§æ–¹ç¨‹ç»„å½¢å¼ä¹Ÿæ˜¯æ­£ç¡®å¯è¡Œçš„ã€‚è¿™å¥—æ¨¡å‹åœ¨ä¸€å®šè¿‘ä¼¼ä¸‹ï¼ˆå±€åŸŸèŒƒå›´å†…çš„åœ°ç†åæ ‡æ¢ç®—ä¸ºè¿‘ä¼¼å¹³é¢é—®é¢˜ï¼‰æ˜¯æˆç«‹çš„ã€‚</p><p>å› æ­¤ï¼Œä»ç†è®ºä¸æ¨å¯¼è¿‡ç¨‹æ¥çœ‹ï¼Œè¯¥æ¨¡å‹æ˜¯æ­£ç¡®ä¸”åˆç†çš„ã€‚</p><h2 id=cç¤ºä¾‹ä»£ç >C++ç¤ºä¾‹ä»£ç ï¼š</h2><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ C++ ä»£ç ï¼Œç”¨äºæ ¹æ®ç»™å®šçš„æµ‹å‘ç«™æ•°æ®ä¸æµ‹å‘çœŸæ–¹ä½æ¥æ±‚è§£è¾å°„æºç›®æ ‡çš„ç»çº¬åº¦åæ ‡ $\lambda_e, \phi_e$ ã€‚è¯¥ä»£ç ç¤ºä¾‹å‡è®¾å·²ç»è·å¾—äº†å¤šä¸ªæµ‹å‘æ•°æ®ç‚¹ï¼ˆæµ‹å‘ç«™åæ ‡ $\lambda_i, \phi_i$ åŠæµ‹å‘æ–¹ä½ $\theta_i$ï¼‰ï¼Œå¹¶ä½¿ç”¨çº¿æ€§ä»£æ•°æ–¹æ³•æ±‚è§£ã€‚</p><p>è¿™é‡Œé‡‡ç”¨ <a href=http://eigen.tuxfamily.org/ rel=external target=_blank>Eigen</a> ä½œä¸ºçº¿æ€§ä»£æ•°åº“æ¥æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„ã€‚<br>å¦‚æœåªæœ‰ä¸¤ç»„æµ‹å‘æ•°æ®ï¼ˆ$n=2$ï¼‰ï¼Œåˆ™å¯¹åº”çš„çŸ©é˜µ $\mathbf{A}_n$ ä¸º $2\times2$ï¼Œå¯ç›´æ¥æ±‚é€†ã€‚<br>å¦‚æœæœ‰å¤šäºä¸¤ç»„æ•°æ®ï¼ˆ$n>2$ï¼‰ï¼Œåˆ™å¯é‡‡ç”¨æœ€å°äºŒä¹˜è§£ï¼ˆNormal Equationæˆ–Eigenå†…ç½®çš„æœ€å°äºŒä¹˜æ±‚è§£ï¼‰æ¥è·å¾— $\lambda_e, \phi_e$ çš„ä¼°è®¡å€¼ã€‚</p><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li>æµ‹å‘ç«™åæ ‡å’Œè§’åº¦éœ€ä»¥å¼§åº¦åˆ¶è¾“å…¥å’Œå¤„ç†ã€‚</li><li>å¯¹äº $\cos\phi_i$ å’Œ $\sin\theta_i$ ç­‰éœ€è¦ç¡®ä¿ $\phi_i, \theta_i$ å·²ç»æ˜¯å¼§åº¦ã€‚</li><li>æ•°æ®æ ¼å¼ä¸è·å–æ–¹å¼éœ€æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;Eigen/Dense&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// å‡è®¾æ•°æ®ç»“æ„å¦‚ä¸‹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Measurement</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_i; <span style=color:#75715e>// æµ‹å‘ç«™ç»åº¦(å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_i;    <span style=color:#75715e>// æµ‹å‘ç«™çº¬åº¦(å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> theta_i;  <span style=color:#75715e>// æµ‹å‘æ–¹ä½è§’(å¼§åº¦)ï¼Œæ­£åŒ—ä¸º0ï¼Œé¡ºæ—¶é’ˆæ–¹å‘
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ç¤ºä¾‹è¾“å…¥æ•°æ®ï¼ˆéœ€æ ¹æ®å®é™…æƒ…å†µå¡«å†™ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// å‡è®¾æœ‰ n æ¬¡æµ‹é‡ï¼Œæ¯æ¬¡ç»™å®šæµ‹å‘ç«™ä½ç½® (lambda_i, phi_i) å’Œæ–¹ä½ theta_i
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>Measurement<span style=color:#f92672>&gt;</span> measurements <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ç¤ºä¾‹æ•°æ®ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        { <span style=color:#ae81ff>1.234</span>, <span style=color:#ae81ff>0.456</span>, <span style=color:#ae81ff>0.523</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.235</span>, <span style=color:#ae81ff>0.457</span>, <span style=color:#ae81ff>1.047</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.237</span>, <span style=color:#ae81ff>0.460</span>, <span style=color:#ae81ff>1.570</span> }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> <span style=color:#66d9ef>static_cast</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span>(measurements.size());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;è‡³å°‘éœ€è¦ä¸¤ç»„æµ‹å‘æ•°æ®æ‰èƒ½æ±‚è§£ï¼&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ„å»ºçº¿æ€§æ–¹ç¨‹ç»„ A * X = C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// å¯¹åº”å…³ç³»ï¼š
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Açš„æ¯è¡Œ: [cos(phi_i)*cos(theta_i), -sin(theta_i)]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Cçš„æ¯è¡Œ: lambda_i * cos(phi_i)*cos(theta_i) - phi_i*sin(theta_i)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// X = [lambda_e, phi_e]^T æ˜¯æœªçŸ¥é‡ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>MatrixXd A(n, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>VectorXd C(n);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> lambda_i <span style=color:#f92672>=</span> measurements[i].lambda_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> phi_i    <span style=color:#f92672>=</span> measurements[i].phi_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> theta_i  <span style=color:#f92672>=</span> measurements[i].theta_i;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> a_i <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> b_i <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> c_i <span style=color:#f92672>=</span> lambda_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i) <span style=color:#f92672>-</span> phi_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> a_i;
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>=</span> b_i;
</span></span><span style=display:flex><span>        C(i)    <span style=color:#f92672>=</span> c_i;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// å½“ n=2 æ—¶å¯ä»¥ç›´æ¥ A.inverse()*C æ±‚è§£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// å½“ n&gt;2 æ—¶ï¼Œéœ€è¦ä½¿ç”¨æœ€å°äºŒä¹˜æ±‚è§£ï¼Œå³ (A^T A)X = A^T C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// ä½¿ç”¨Eigenæä¾›çš„æœ€å°äºŒä¹˜æ±‚è§£å™¨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Eigen<span style=color:#f92672>::</span>VectorXd X;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 2x2å¯ç›´æ¥æ±‚é€†
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        Eigen<span style=color:#f92672>::</span>Matrix2d A2;
</span></span><span style=display:flex><span>        Eigen<span style=color:#f92672>::</span>Vector2d C2;
</span></span><span style=display:flex><span>        A2 <span style=color:#f92672>&lt;&lt;</span> A(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>), A(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>              A(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>), A(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        C2 <span style=color:#f92672>&lt;&lt;</span> C(<span style=color:#ae81ff>0</span>), C(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        X <span style=color:#f92672>=</span> A2.inverse() <span style=color:#f92672>*</span> C2;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// n &gt; 2ï¼Œç”¨æœ€å°äºŒä¹˜æ³•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// æ­£è§„æ–¹ç¨‹: X = (A^T A)^{-1} A^T C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// æˆ–ç›´æ¥ä½¿ç”¨Eigençš„colPivHouseholderQrç­‰åˆ†è§£è¿›è¡Œæ±‚è§£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        X <span style=color:#f92672>=</span> (A.transpose() <span style=color:#f92672>*</span> A).ldlt().solve(A.transpose() <span style=color:#f92672>*</span> C);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_e <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// æ±‚è§£å‡ºçš„è¾å°„æºç»åº¦
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_e    <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>1</span>); <span style=color:#75715e>// æ±‚è§£å‡ºçš„è¾å°„æºçº¬åº¦
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è¾“å‡ºç»“æœ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;æ±‚è§£å¾—åˆ°çš„è¾å°„æºåæ ‡ï¼š&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; (å¼§åº¦)&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e    <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; (å¼§åº¦)&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è‹¥éœ€è¦ï¼Œå¯å°†å¼§åº¦è½¬æ¢ä¸ºåº¦
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> lambda_e_deg <span style=color:#f92672>=</span> lambda_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> phi_e_deg <span style=color:#f92672>=</span> phi_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e (åº¦) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e_deg <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    (åº¦) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e_deg  <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥çš„ $\lambda_i, \phi_i, \theta_i$ å·²ç»æ˜¯å¼§åº¦åˆ¶ã€‚å¦‚æœè¾“å…¥ä¸ºåº¦ï¼Œéœ€è¦å…ˆè½¬æ¢ä¸ºå¼§åº¦ã€‚</li><li>å½“ $n=2$ æ—¶ï¼Œæ˜¯æ ‡å‡†çš„ 2x2 æ–¹ç¨‹ç»„ï¼Œå¯ç›´æ¥é€šè¿‡é€†çŸ©é˜µæ±‚è§£ã€‚</li><li>å½“ $n>2$ æ—¶ï¼Œä¸ºè¿‡å®šæ–¹ç¨‹ç»„ï¼Œé‡‡ç”¨æœ€å°äºŒä¹˜æ–¹æ³•ï¼ˆæ­£è§„æ–¹ç¨‹æˆ–QRåˆ†è§£ç­‰æ–¹æ³•ï¼‰æ¥æ±‚è§£ã€‚ä¸Šä¾‹ä½¿ç”¨ <code>(A.transpose() * A).ldlt().solve(A.transpose() * C)</code> æ¥æ±‚æœ€å°äºŒä¹˜è§£ã€‚</li><li>å®é™…ä¸­è¿˜åº”è€ƒè™‘è¯¯å·®å’Œæ•°å€¼ç¨³å®šæ€§ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç¨³å®šçš„åˆ†è§£æ–¹æ³•ï¼Œå¦‚ <code>A.colPivHouseholderQr().solve(C)</code> æ¥å¾—åˆ°æœ€å°äºŒä¹˜è§£ã€‚</li><li>æ ¹æ®éœ€æ±‚å¯ä»¥å¯¹è¾“å…¥å’Œè¾“å‡ºè¿›è¡Œæ›´ä¸¥æ ¼çš„æ£€æŸ¥å’Œæ ¼å¼åŒ–ã€‚</li></ul><h3 id=æ›´ç¨³å®šåˆ†è§£çš„ç‰ˆæœ¬>æ›´ç¨³å®šåˆ†è§£çš„ç‰ˆæœ¬</h3><p>ä¸‹é¢ç»™å‡ºé‡‡ç”¨æ›´ç¨³å®šçš„ <code>colPivHouseholderQr()</code> åˆ†è§£è¿›è¡Œæ±‚è§£çš„ç¤ºä¾‹ä»£ç ã€‚åŒæ ·ä½¿ç”¨ Eigen åº“æ¥å¤„ç†çº¿æ€§ä»£æ•°è¿ç®—ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œåªéœ€ç¨ä½œä¿®æ”¹ï¼Œé€šè¿‡ <code>A.colPivHouseholderQr().solve(C)</code> æ¥å¾—åˆ°æœ€å°äºŒä¹˜è§£ã€‚</p><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li>è¾“å…¥è¾“å‡ºä¸å‰ä¾‹ç›¸åŒã€‚</li><li>åŒæ ·å‡è®¾è¾“å…¥çš„åæ ‡å’Œè§’åº¦å·²è½¬æ¢ä¸ºå¼§åº¦ã€‚</li><li>å½“æœ‰ä¸¤ç»„æ•°æ®ï¼ˆn=2ï¼‰æ—¶ä»å¯ç›´æ¥æ±‚é€†è§£ï¼Œä½†å»ºè®®ç»Ÿä¸€ä½¿ç”¨QRåˆ†è§£æ±‚è§£ï¼Œå› å…¶å¯¹æ•°å€¼ç¨³å®šæ€§æ›´å¥½ã€‚</li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;Eigen/Dense&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// æµ‹é‡æ•°æ®ç»“æ„
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Measurement</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_i; <span style=color:#75715e>// æµ‹å‘ç«™ç»åº¦ (å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_i;    <span style=color:#75715e>// æµ‹å‘ç«™çº¬åº¦ (å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> theta_i;  <span style=color:#75715e>// æµ‹å‘æ–¹ä½è§’ (å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ç¤ºä¾‹æµ‹é‡æ•°æ®ï¼Œéœ€æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>Measurement<span style=color:#f92672>&gt;</span> measurements <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.234</span>, <span style=color:#ae81ff>0.456</span>, <span style=color:#ae81ff>0.523</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.235</span>, <span style=color:#ae81ff>0.457</span>, <span style=color:#ae81ff>1.047</span> },
</span></span><span style=display:flex><span>        { <span style=color:#ae81ff>1.237</span>, <span style=color:#ae81ff>0.460</span>, <span style=color:#ae81ff>1.570</span> }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> <span style=color:#66d9ef>static_cast</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span>(measurements.size());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (n <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;è‡³å°‘éœ€è¦ä¸¤ç»„æµ‹å‘æ•°æ®æ‰èƒ½æ±‚è§£ï¼&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>MatrixXd A(n, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    Eigen<span style=color:#f92672>::</span>VectorXd C(n);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ„å»ºæ–¹ç¨‹ç»„ A * X = C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Açš„æ¯è¡Œå¯¹åº”: [cos(phi_i)*cos(theta_i), -sin(theta_i)]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Cçš„æ¯è¡Œå¯¹åº”: lambda_i*cos(phi_i)*cos(theta_i) - phi_i*sin(theta_i)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> lambda_i <span style=color:#f92672>=</span> measurements[i].lambda_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> phi_i    <span style=color:#f92672>=</span> measurements[i].phi_i;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> theta_i  <span style=color:#f92672>=</span> measurements[i].theta_i;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> a_i <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> b_i <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> c_i <span style=color:#f92672>=</span> lambda_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>cos(phi_i)<span style=color:#f92672>*</span>std<span style=color:#f92672>::</span>cos(theta_i) <span style=color:#f92672>-</span> phi_i <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>sin(theta_i);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> a_i;
</span></span><span style=display:flex><span>        A(i, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>=</span> b_i;
</span></span><span style=display:flex><span>        C(i)    <span style=color:#f92672>=</span> c_i;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ä½¿ç”¨æ›´åŠ æ•°å€¼ç¨³å®šçš„åˆ†è§£æ³•æ±‚è§£æœ€å°äºŒä¹˜é—®é¢˜
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Eigen<span style=color:#f92672>::</span>VectorXd X <span style=color:#f92672>=</span> A.colPivHouseholderQr().solve(C);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> lambda_e <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// è¾å°„æºç»åº¦ (å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> phi_e    <span style=color:#f92672>=</span> X(<span style=color:#ae81ff>1</span>); <span style=color:#75715e>// è¾å°„æºçº¬åº¦ (å¼§åº¦)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;æ±‚è§£å¾—åˆ°çš„è¾å°„æºåæ ‡(å¼§åº¦)ï¼š&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è‹¥éœ€è¦åº¦åˆ¶è¾“å‡º
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> lambda_e_deg <span style=color:#f92672>=</span> lambda_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> phi_e_deg <span style=color:#f92672>=</span> phi_e <span style=color:#f92672>*</span> <span style=color:#ae81ff>180.0</span> <span style=color:#f92672>/</span> M_PI;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;è¾å°„æºåæ ‡(åº¦)ï¼š&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;lambda_e (deg) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> lambda_e_deg <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;phi_e    (deg) = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> phi_e_deg <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>é€šè¿‡ä¸Šè¿°ä¿®æ”¹ï¼Œå½“æµ‹å‘æ•°æ®ç‚¹å¤šäº2ä¸ªæ—¶ï¼Œ<code>colPivHouseholderQr()</code> çš„æ–¹æ³•èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æ•°å€¼ç¨³å®šæ€§å’Œæ±‚è§£ç²¾åº¦ï¼Œå¯¹äºå®é™…ä¸­ä¸é€‚å®šæˆ–è¿‘ä¼¼å…±çº¿çš„æƒ…å†µèƒ½æä¾›æ›´ç¨³å®šçš„ç»“æœã€‚</p><h2 id=æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½è®¡ç®—å™¨>æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½è®¡ç®—å™¨</h2><p><a href=https://claude.site/artifacts/c9ff1d40-3bad-4001-97f7-f2c2030d30a6 rel=external target=_blank>https://claude.site/artifacts/c9ff1d40-3bad-4001-97f7-f2c2030d30a6</a></p><ul><li>å…¶ä¸­è¾å°„æºä½ç½®ç”¨äºä¸æµ‹å‘å®šä½åç»“æœåšå¯¹æ¯”ï¼Œä½¿ç”¨äº†çƒé¢è·ç¦»è®¡ç®—å…¬å¼ï¼ˆHaversineå…¬å¼ï¼‰æ¥è®¡ç®—ä¸¤ä¸ªç»çº¬åº¦ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚è®¡ç®—æ—¶ä½¿ç”¨åœ°çƒå¹³å‡åŠå¾„ä¸º 6371000 ç±³ã€‚</li><li>åœ¨ç»“æœæ˜¾ç¤ºéƒ¨åˆ†å¢åŠ äº†ä¸¤ä¸ªæ–°çš„åŒºåŸŸï¼š<ul><li>&ldquo;è®¡ç®—ä½ç½®åˆ°å„æµ‹å‘ç«™çš„è·ç¦»&rdquo;ï¼šæ˜¾ç¤ºè®¡ç®—å‡ºçš„è¾å°„æºä½ç½®åˆ°æ¯ä¸ªæµ‹å‘ç«™çš„è·ç¦»</li><li>&ldquo;æµ‹å‘ç«™ä¹‹é—´çš„è·ç¦»&rdquo;ï¼šæ˜¾ç¤ºå„ä¸ªæµ‹å‘ç«™ä¹‹é—´çš„è·ç¦»</li></ul></li></ul><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Card</span>, <span style=color:#a6e22e>CardHeader</span>, <span style=color:#a6e22e>CardTitle</span>, <span style=color:#a6e22e>CardContent</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/card&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/button&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Input</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/input&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RadiationCalculator</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>measurements</span>, <span style=color:#a6e22e>setMeasurements</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([
</span></span><span style=display:flex><span>    { <span style=color:#a6e22e>lambda_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>phi_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>theta_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span> }
</span></span><span style=display:flex><span>  ]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>actualSource</span>, <span style=color:#a6e22e>setActualSource</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lambda_e</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>phi_e</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>result</span>, <span style=color:#a6e22e>setResult</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// è®¡ç®—ä¸¤ç‚¹é—´çš„è·ç¦»ï¼ˆç±³ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculateDistance</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>lat1</span>, <span style=color:#a6e22e>lon1</span>, <span style=color:#a6e22e>lat2</span>, <span style=color:#a6e22e>lon2</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>6371000</span>; <span style=color:#75715e>// åœ°çƒå¹³å‡åŠå¾„ï¼ˆç±³ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lat1</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lat2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deltaPhi</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>lat2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>lat1</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deltaLambda</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>lon2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>lon1</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaPhi</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaPhi</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>              Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>phi1</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>phi2</span>) <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>              Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaLambda</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>deltaLambda</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>atan2</span>(Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#a6e22e>a</span>), Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>-</span><span style=color:#a6e22e>a</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>c</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>distance</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// è®¡ç®—æ‰€æœ‰ç«™ç‚¹ä¹‹é—´çš„è·ç¦»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculateAllDistances</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sourcePos</span>, <span style=color:#a6e22e>stations</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distances</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sourceToStations</span><span style=color:#f92672>:</span> [], <span style=color:#75715e>// è¾å°„æºåˆ°å„æµ‹å‘ç«™çš„è·ç¦»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>betweenStations</span><span style=color:#f92672>:</span> [] <span style=color:#75715e>// æµ‹å‘ç«™ä¹‹é—´çš„è·ç¦»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è®¡ç®—è¾å°„æºåˆ°å„æµ‹å‘ç«™çš„è·ç¦»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>stations</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>station</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateDistance</span>(
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sourcePos</span>.<span style=color:#a6e22e>phi</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sourcePos</span>.<span style=color:#a6e22e>lambda</span>,
</span></span><span style=display:flex><span>        parseFloat(<span style=color:#a6e22e>station</span>.<span style=color:#a6e22e>phi_i</span>),
</span></span><span style=display:flex><span>        parseFloat(<span style=color:#a6e22e>station</span>.<span style=color:#a6e22e>lambda_i</span>)
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>sourceToStations</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stationIndex</span>: <span style=color:#66d9ef>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distance</span>: <span style=color:#66d9ef>distance</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span> <span style=color:#75715e>// è½¬æ¢ä¸ºå…¬é‡Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è®¡ç®—æµ‹å‘ç«™ä¹‹é—´çš„è·ç¦»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>stations</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>stations</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateDistance</span>(
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>phi_i</span>),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>lambda_i</span>),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>phi_i</span>),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>stations</span>[<span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>lambda_i</span>)
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>betweenStations</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>station1</span>: <span style=color:#66d9ef>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>station2</span>: <span style=color:#66d9ef>j</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>distance</span>: <span style=color:#66d9ef>distance</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span> <span style=color:#75715e>// è½¬æ¢ä¸ºå…¬é‡Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>distances</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>addMeasurement</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setMeasurements</span>([...<span style=color:#a6e22e>measurements</span>, { <span style=color:#a6e22e>lambda_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>phi_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>theta_i</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span> }]);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>removeMeasurement</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>index</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newMeasurements</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>index</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setMeasurements</span>(<span style=color:#a6e22e>newMeasurements</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleMeasurementChange</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>index</span>, <span style=color:#a6e22e>field</span>, <span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newMeasurements</span> <span style=color:#f92672>=</span> [...<span style=color:#a6e22e>measurements</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>newMeasurements</span>[<span style=color:#a6e22e>index</span>][<span style=color:#a6e22e>field</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setMeasurements</span>(<span style=color:#a6e22e>newMeasurements</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculatePosition</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// å°†åº¦æ•°è½¬æ¢ä¸ºå¼§åº¦
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>measurementsRad</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>m</span> <span style=color:#f92672>=&gt;</span> ({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>lambda_i</span>: <span style=color:#66d9ef>parseFloat</span>(<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>lambda_i</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>phi_i</span>: <span style=color:#66d9ef>parseFloat</span>(<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>phi_i</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>theta_i</span>: <span style=color:#66d9ef>parseFloat</span>(<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>theta_i</span>) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurementsRad</span>.<span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>n</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;è‡³å°‘éœ€è¦ä¸¤ç»„æµ‹å‘æ•°æ®ï¼&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ„å»ºæ–¹ç¨‹ç»„
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#a6e22e>n</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>).<span style=color:#a6e22e>map</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>2</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>C</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#a6e22e>n</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>n</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>lambda_i</span>, <span style=color:#a6e22e>phi_i</span>, <span style=color:#a6e22e>theta_i</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>measurementsRad</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cos_phi</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>phi_i</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cos_theta</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>theta_i</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sin_theta</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>theta_i</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>A</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>cos_phi</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>cos_theta</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>A</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>sin_theta</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>C</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>lambda_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>cos_phi</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>cos_theta</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>phi_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin_theta</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ±‚è§£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>AT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>A</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>colIndex</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>A</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>colIndex</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ATA</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>AT</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>A</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>j</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>sum</span>, <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>k</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>k</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>A</span>[<span style=color:#a6e22e>k</span>][<span style=color:#a6e22e>j</span>], <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ATC</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>AT</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>sum</span>, <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>C</span>[<span style=color:#a6e22e>i</span>], <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>det</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lambda_e</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>/</span> <span style=color:#a6e22e>det</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi_e</span> <span style=color:#f92672>=</span> (<span style=color:#f92672>-</span><span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>ATA</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>ATC</span>[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>/</span> <span style=color:#a6e22e>det</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è½¬æ¢å›åº¦æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lambda_e_deg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lambda_e</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>180</span> <span style=color:#f92672>/</span> Math.<span style=color:#a6e22e>PI</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi_e_deg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>phi_e</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>180</span> <span style=color:#f92672>/</span> Math.<span style=color:#a6e22e>PI</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è®¡ç®—ä¸å®é™…ä½ç½®çš„åå·®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>actual_lambda</span> <span style=color:#f92672>=</span> parseFloat(<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>lambda_e</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>actual_phi</span> <span style=color:#f92672>=</span> parseFloat(<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>phi_e</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lambda_error</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>lambda_e_deg</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>actual_lambda</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>phi_error</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>phi_e_deg</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>actual_phi</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è®¡ç®—è·ç¦»åå·®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distance_error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateDistance</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>actual_phi</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>actual_lambda</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>phi_e_deg</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>lambda_e_deg</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è®¡ç®—æ‰€æœ‰ç«™ç‚¹ä¹‹é—´çš„è·ç¦»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculatedDistances</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateAllDistances</span>(
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>lambda_e_deg</span>, <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>phi_e_deg</span> },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>measurements</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>actualDistances</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateAllDistances</span>(
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>actual_lambda</span>, <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>actual_phi</span> },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>measurements</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setResult</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>calculated</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>lambda_e_deg.toFixed</span>(<span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>phi_e_deg.toFixed</span>(<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lambda</span>: <span style=color:#66d9ef>lambda_error.toFixed</span>(<span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>phi</span>: <span style=color:#66d9ef>phi_error.toFixed</span>(<span style=color:#ae81ff>4</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>distance_error</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span>).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>3</span>)  <span style=color:#75715e>// è½¬æ¢ä¸ºå…¬é‡Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>distances</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>calculated</span>: <span style=color:#66d9ef>calculatedDistances</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>actual</span>: <span style=color:#66d9ef>actualDistances</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Card</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full max-w-4xl&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>CardTitle</span>&gt;<span style=color:#960050;background-color:#1e0010>è¾å°„æºå®šä½è®¡ç®—å™¨</span>&lt;/<span style=color:#f92672>CardTitle</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardContent</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-6&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>å®é™…è¾å°„æºä½ç½®ï¼ˆåº¦ï¼‰ï¼š</span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-2 gap-4&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>è¾å°„æºç»åº¦</span> (<span style=color:#960050;background-color:#1e0010>Î»</span><span style=color:#a6e22e>e</span>)<span style=color:#960050;background-color:#1e0010>ï¼š</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>lambda_e</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setActualSource</span>({...<span style=color:#a6e22e>actualSource</span>, <span style=color:#a6e22e>lambda_e</span>: <span style=color:#66d9ef>e.target.value</span>})}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;è¾“å…¥å®é™…ç»åº¦&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>è¾å°„æºçº¬åº¦</span> (<span style=color:#960050;background-color:#1e0010>Ï†</span><span style=color:#a6e22e>e</span>)<span style=color:#960050;background-color:#1e0010>ï¼š</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>actualSource</span>.<span style=color:#a6e22e>phi_e</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setActualSource</span>({...<span style=color:#a6e22e>actualSource</span>, <span style=color:#a6e22e>phi_e</span>: <span style=color:#66d9ef>e.target.value</span>})}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;è¾“å…¥å®é™…çº¬åº¦&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>æµ‹å‘ç«™æ•°æ®ï¼ˆåº¦ï¼‰ï¼š</span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          {<span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>m</span>, <span style=color:#a6e22e>index</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>index</span>} <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-3 gap-4 items-end&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>æµ‹å‘ç«™ç»åº¦</span> (<span style=color:#960050;background-color:#1e0010>Î»</span><span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>ï¼š</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>lambda_i</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleMeasurementChange</span>(<span style=color:#a6e22e>index</span>, <span style=color:#e6db74>&#39;lambda_i&#39;</span>, <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;è¾“å…¥æµ‹å‘ç«™ç»åº¦&#34;</span>
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>æµ‹å‘ç«™çº¬åº¦</span> (<span style=color:#960050;background-color:#1e0010>Ï†</span><span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>ï¼š</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>phi_i</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleMeasurementChange</span>(<span style=color:#a6e22e>index</span>, <span style=color:#e6db74>&#39;phi_i&#39;</span>, <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;è¾“å…¥æµ‹å‘ç«™çº¬åº¦&#34;</span>
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;block text-sm mb-1&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>æ–¹ä½è§’</span> (<span style=color:#960050;background-color:#1e0010>Î¸</span><span style=color:#a6e22e>i</span>)<span style=color:#960050;background-color:#1e0010>ï¼š</span>&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>theta_i</span>}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleMeasurementChange</span>(<span style=color:#a6e22e>index</span>, <span style=color:#e6db74>&#39;theta_i&#39;</span>, <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;è¾“å…¥æ–¹ä½è§’&#34;</span>
</span></span><span style=display:flex><span>                  /&gt;
</span></span><span style=display:flex><span>                  {<span style=color:#a6e22e>measurements</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> (
</span></span><span style=display:flex><span>                    &lt;<span style=color:#f92672>Button</span> 
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;destructive&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;px-3&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>removeMeasurement</span>(<span style=color:#a6e22e>index</span>)}
</span></span><span style=display:flex><span>                    &gt;
</span></span><span style=display:flex><span>                      <span style=color:#960050;background-color:#1e0010>åˆ é™¤</span>
</span></span><span style=display:flex><span>                    &lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>                  )}
</span></span><span style=display:flex><span>                &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          ))}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-x-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>addMeasurement</span>}&gt;<span style=color:#960050;background-color:#1e0010>æ·»åŠ æµ‹å‘ç«™</span>&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>calculatePosition</span>}&gt;<span style=color:#960050;background-color:#1e0010>è®¡ç®—ä½ç½®</span>&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>result</span> <span style=color:#f92672>&amp;&amp;</span> (
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mt-6 p-4 bg-gray-100 rounded-lg&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium mb-2&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>è®¡ç®—ç»“æœï¼š</span>&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>è®¡ç®—å¾—åˆ°çš„ä½ç½®ï¼š</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>ç»åº¦</span> (<span style=color:#960050;background-color:#1e0010>Î»</span><span style=color:#a6e22e>e</span>) <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>lambda</span>}<span style=color:#960050;background-color:#1e0010>Â°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>çº¬åº¦</span> (<span style=color:#960050;background-color:#1e0010>Ï†</span><span style=color:#a6e22e>e</span>) <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>phi</span>}<span style=color:#960050;background-color:#1e0010>Â°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>ä¸å®é™…ä½ç½®çš„åå·®ï¼š</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>ç»åº¦åå·®</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>lambda</span>}<span style=color:#960050;background-color:#1e0010>Â°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>çº¬åº¦åå·®</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>phi</span>}<span style=color:#960050;background-color:#1e0010>Â°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>è·ç¦»åå·®</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>distance</span>} <span style=color:#960050;background-color:#1e0010>å…¬é‡Œ</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>è®¡ç®—ä½ç½®åˆ°å„æµ‹å‘ç«™çš„è·ç¦»ï¼š</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>sourceToStations</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>dist</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>idx</span>}&gt;
</span></span><span style=display:flex><span>                    <span style=color:#960050;background-color:#1e0010>åˆ°æµ‹å‘ç«™</span>{<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>stationIndex</span>}<span style=color:#f92672>:</span> {<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>distance</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>3</span>)} <span style=color:#960050;background-color:#1e0010>å…¬é‡Œ</span>
</span></span><span style=display:flex><span>                  &lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                ))}
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>æµ‹å‘ç«™ä¹‹é—´çš„è·ç¦»ï¼š</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                {<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>distances</span>.<span style=color:#a6e22e>calculated</span>.<span style=color:#a6e22e>betweenStations</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>dist</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>idx</span>}&gt;
</span></span><span style=display:flex><span>                    <span style=color:#960050;background-color:#1e0010>æµ‹å‘ç«™</span>{<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>station1</span>}<span style=color:#960050;background-color:#1e0010>åˆ°æµ‹å‘ç«™</span>{<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>station2</span>}<span style=color:#f92672>:</span> {<span style=color:#a6e22e>dist</span>.<span style=color:#a6e22e>distance</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>3</span>)} <span style=color:#960050;background-color:#1e0010>å…¬é‡Œ</span>
</span></span><span style=display:flex><span>                  &lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>                ))}
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        )}
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardContent</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Card</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>RadiationCalculator</span>;</span></span></code></pre></div><footer class=footline><i class='fa-fw fas fa-calendar'></i> 2025-05-21</footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo href=/index.html><img src=/images/logo.png alt="FlitSoft Docs" style=width:80px;height:auto></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class=default-animation><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/uas/index.html><a class=padding href=/uas/index.html>UAS</a><ul id=R-subsections-50d6e18f3c774adcdf96c62beb3fb9ae class=collapsible-menu></ul></li><li class=parent data-nav-id=/em/index.html><a class=padding href=/em/index.html>EM</a><ul id=R-subsections-5221d921411ef33ede36c0310590339e class=collapsible-menu><li class=alwaysopen data-nav-id=/em/antenna-pattern/index.html><a class=padding href=/em/antenna-pattern/index.html>Antenna Pattern</a><ul id=R-subsections-ccb34e1afa1278e5b9fa47ea16615cf2 class=collapsible-menu></ul></li><li class=alwaysopen data-nav-id=/em/comm/index.html><a class=padding href=/em/comm/index.html>Communication</a><ul id=R-subsections-76a132cf152c8c25082aa45ad7e583aa class=collapsible-menu></ul></li><li class="parent alwaysopen" data-nav-id=/em/radar/index.html><a class=padding href=/em/radar/index.html>Radar</a><ul id=R-subsections-ffd05e868c4f9d0f123a8646ca79cb9c class=collapsible-menu><li class=active data-nav-id=/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/radar/%E6%97%A0%E6%BA%90%E4%BE%A6%E5%AF%9F%E6%B5%8B%E5%90%91%E5%AE%9A%E4%BD%8D%E6%A8%A1%E5%9E%8B/index.html>æ— æºä¾¦å¯Ÿæµ‹å‘å®šä½æ¨¡å‹</a></li><li data-nav-id=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%E7%A9%BA%E5%AF%B9%E5%9C%B0/index.html><a class=padding href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%E7%A9%BA%E5%AF%B9%E5%9C%B0/index.html>ç©ºå¯¹åœ°é›·è¾¾å¯¹æŠ—ä¾¦å¯Ÿæ•ˆèƒ½æ¨¡å‹</a></li><li data-nav-id=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E9%80%9A%E7%94%A8%E4%BE%A6%E5%AF%9F%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%AF%B9%E6%8A%97%E4%BE%A6%E5%AF%9F%E9%80%9A%E7%94%A8%E4%BE%A6%E5%AF%9F%E6%A8%A1%E5%9E%8B/index.html>é›·è¾¾å¯¹æŠ—ä¾¦å¯Ÿæ•ˆèƒ½é€šç”¨æ¨¡å‹</a></li><li data-nav-id=/em/radar/%E9%9B%B7%E8%BE%BE%E5%B9%B2%E6%89%B0%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8Bv3/index.html><a class=padding href=/em/radar/%E9%9B%B7%E8%BE%BE%E5%B9%B2%E6%89%B0%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8Bv3/index.html>é›·è¾¾å¹²æ‰°æ•ˆèƒ½æ¨¡å‹</a></li></ul></li></ul></li><li data-nav-id=/agi/index.html><a class=padding href=/agi/index.html>AI</a><ul id=R-subsections-b697951847df19851ae8635cac95c15a class=collapsible-menu></ul></li><li data-nav-id=/gaming/index.html><a class=padding href=/gaming/index.html>Gaming</a></li><li data-nav-id=/c2/index.html><a class=padding href=/c2/index.html>C2</a><ul id=R-subsections-e0126222f5f1b52fd67c95ccf5ad1c18 class=collapsible-menu></ul></li><li data-nav-id=/simu/index.html><a class=padding href=/simu/index.html>Simulation</a><ul id=R-subsections-80cfed847676c641fa01f11f3f2904bf class=collapsible-menu></ul></li><li data-nav-id=/visual/index.html><a class=padding href=/visual/index.html>Visualization</a><ul id=R-subsections-080a96fba97ea97926a463e36c9cb108 class=collapsible-menu></ul></li><li data-nav-id=/log/index.html><a class=padding href=/log/index.html>Log</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-light value=zen-light selected>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1749302463 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1749302463 defer></script><script>window.MathJax=Object.assign(window.MathJax||{},{tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},options:{enableMenu:!1}},JSON.parse("{}"))</script><script id=MathJax-script async src=/js/mathjax/tex-mml-chtml.js?1749302463></script><script src=/js/theme.min.js?1749302463 defer></script></body></html>