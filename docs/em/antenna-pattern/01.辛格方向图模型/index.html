<!doctype html><html lang=zh-cn dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.147.3"><meta name=generator content="Relearn 7.6.1+4407b4364ab6f7477f7671fbd20c0494bade40ee"><meta name=description content="This summary is independent of the content."><meta name=author content="ä½ çš„åå­—"><meta name=twitter:card content="summary"><meta name=twitter:title content="è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹ :: FlitSoft Docs"><meta name=twitter:description content="This summary is independent of the content."><meta property="og:url" content="https://hill68.github.io/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html"><meta property="og:site_name" content="FlitSoft Docs"><meta property="og:title" content="è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹ :: FlitSoft Docs"><meta property="og:description" content="This summary is independent of the content."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="EM"><meta property="article:published_time" content="2025-05-21T15:43:38+08:00"><meta property="article:modified_time" content="2025-05-21T15:43:38+08:00"><meta itemprop=name content="è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹ :: FlitSoft Docs"><meta itemprop=description content="This summary is independent of the content."><meta itemprop=datePublished content="2025-05-21T15:43:38+08:00"><meta itemprop=dateModified content="2025-05-21T15:43:38+08:00"><meta itemprop=wordCount content="1498"><title>è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹ :: FlitSoft Docs</title>
<link href=/images/logo.png?1750422279 rel=icon type=image/png><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1750422279 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1750422279 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1750422279 rel=stylesheet><link href=/css/theme.min.css?1750422279 rel=stylesheet><link href=/css/format-html.min.css?1750422279 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1750422279 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1750422279 defer></script><script src=/js/lunr/lunr.min.js?1750422279 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1750422279 defer></script><script src=/js/lunr/lunr.multi.min.js?1750422279 defer></script><script src=/js/lunr/lunr.zh.min.js?1750422279 defer></script><script src=/js/search.min.js?1750422279 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://hill68.github.io",window.relearn.contentLangs=["zh"],window.relearn.index_js_url="/searchindex.en.js?1750422279",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["zen-light","zen-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/css/custom.css?1750422279 rel=stylesheet></head><body class="mobile-support html" data-url=/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#ä¸€è¾›æ ¼æ–¹å‘å›¾æ•°å­¦æ¨¡å‹>ä¸€ã€è¾›æ ¼æ–¹å‘å›¾æ•°å­¦æ¨¡å‹</a><ul><li><a href=#ç‰¹æ€§è¯´æ˜>ç‰¹æ€§è¯´æ˜ï¼š</a></li><li><a href=#åº”ç”¨åœºæ™¯>åº”ç”¨åœºæ™¯ï¼š</a></li></ul></li><li><a href=#äºŒæµ‹è¯•è®¡ç®—å™¨>äºŒã€æµ‹è¯•è®¡ç®—å™¨</a></li><li><a href=#ä¸‰æ¨¡å‹ä»£ç >ä¸‰ã€æ¨¡å‹ä»£ç </a><ul><li><a href=#pythonä»£ç >Pythonä»£ç </a></li><li><a href=#cä»£ç >C++ä»£ç </a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>FlitSoft Docs</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/index.html><span itemprop=name>EM</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/antenna-pattern/index.html><span itemprop=name>Antenna Pattern</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/antenna-pattern/index.html title="Antenna Pattern (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html title="é«˜æ–¯æ–¹å‘å›¾æ¨¡å‹ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable em" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹>è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹</h1><h2 id=ä¸€è¾›æ ¼æ–¹å‘å›¾æ•°å­¦æ¨¡å‹>ä¸€ã€è¾›æ ¼æ–¹å‘å›¾æ•°å­¦æ¨¡å‹</h2><p>è¾›æ ¼æ–¹å‘å›¾ï¼ˆSinc Directional Diagramï¼‰æ¨¡å‹æ˜¯ç”µå­æˆ˜ä»¿çœŸä¸­å¸¸ç”¨çš„ä¸€ç§å¤©çº¿æ–¹å‘å›¾æ¨¡å‹ï¼Œå…¶æ•°å­¦è¡¨è¾¾å¼åŸºäºå½’ä¸€åŒ–çš„ <strong>sinc</strong> å‡½æ•°ï¼Œå¯ä»¥ç”¨äºæè¿°å¤©çº¿çš„è¾å°„æ–¹å‘æ€§ã€‚è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹çš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p>$$
G(\theta) = G_{\text{max}} \cdot \left( \frac{\sin(N \pi \sin \theta)}{N \pi \sin \theta} \right)^2
$$<p>å…¶ä¸­ï¼š</p><ul><li>$G(\theta)$ï¼šåœ¨æ–¹å‘ $\theta$ ä¸Šçš„å¤©çº¿å¢ç›Šã€‚</li><li>$G_{\text{max}}$ï¼šæœ€å¤§å¢ç›Šï¼Œé€šå¸¸å‡ºç°åœ¨ä¸»ç“£æ–¹å‘ã€‚</li><li>$\theta$ï¼šè§‚å¯Ÿæ–¹å‘ä¸å¤©çº¿ä¸»è½´ä¹‹é—´çš„å¤¹è§’ã€‚</li><li>$N$ï¼šå¤©çº¿é˜µåˆ—çš„é˜µå…ƒæ•°ã€‚</li></ul><h3 id=ç‰¹æ€§è¯´æ˜>ç‰¹æ€§è¯´æ˜ï¼š</h3><ol><li><p><strong>ä¸»ç“£ä¸æ—ç“£</strong>ï¼š</p><ul><li>ä¸»ç“£æ˜¯æŒ‡ $\theta = 0$ æ–¹å‘ä¸Šçš„ä¸»è¦è¾å°„èƒ½é‡èŒƒå›´ï¼Œä¸»ç“£å¢ç›Šä¸º $G_{\text{max}}$ã€‚</li><li>è¾¹æ—ç“£çš„å¹…åº¦ç”±é˜µå…ƒæ•° $N$ å†³å®šï¼Œ$N$ è¶Šå¤§ï¼Œæ—ç“£è¶Šå°ã€‚</li></ul></li><li><p><strong>å½’ä¸€åŒ–å› å­</strong>ï¼š</p><ul><li>å½’ä¸€åŒ–çš„ <strong>sinc</strong> å‡½æ•°ç¡®ä¿æ–¹å‘å›¾çš„è¾å°„åŠŸç‡åœ¨ä¸åŒæ–¹å‘ä¸Šçš„åˆ†å¸ƒç¬¦åˆç‰©ç†å®é™…ã€‚</li></ul></li><li><p><strong>é˜µåˆ—å½±å“</strong>ï¼š</p><ul><li>å¢åŠ é˜µå…ƒæ•°ä¼šä½¿ä¸»ç“£æ›´åŠ é›†ä¸­ï¼Œæ—ç“£æŠ‘åˆ¶æ•ˆæœæ›´å¥½ã€‚</li></ul></li></ol><h3 id=åº”ç”¨åœºæ™¯>åº”ç”¨åœºæ™¯ï¼š</h3><p>è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹å¹¿æ³›ç”¨äºçº¿æ€§é˜µåˆ—å¤©çº¿ã€ç›¸æ§é˜µå¤©çº¿ç­‰çš„ä»¿çœŸï¼Œå°¤å…¶æ˜¯åœ¨ç”µå­æˆ˜ã€é€šä¿¡å’Œé›·è¾¾ä¿¡å·å¤„ç†ä¸­ï¼Œç”¨äºè¯„ä¼°å¤©çº¿çš„æ–¹å‘æ€§æ€§èƒ½ã€‚</p><h2 id=äºŒæµ‹è¯•è®¡ç®—å™¨>äºŒã€æµ‹è¯•è®¡ç®—å™¨</h2><p><a href=https://claude.site/artifacts/5f11ccb8-beb2-48a2-8a00-eddd0f871edc rel=external target=_blank>https://claude.site/artifacts/5f11ccb8-beb2-48a2-8a00-eddd0f871edc</a></p><img src=https://cdn.mathpix.com/snip/images/hc6uzeSGNgLN9mLkGWd_GvlCvWNLd2EgxPw9zlwaqgY.original.fullsize.png width=500/>
<img src=https://cdn.mathpix.com/snip/images/0rgQ0AreszEEXpd_bPzA04_grRItGstNvSCA2OaE3OE.original.fullsize.png width=500><p><strong>æµ‹è¯•è®¡ç®—å™¨ä»£ç ï¼š</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Card</span>, <span style=color:#a6e22e>CardHeader</span>, <span style=color:#a6e22e>CardTitle</span>, <span style=color:#a6e22e>CardContent</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/card&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>LineChart</span>, <span style=color:#a6e22e>Line</span>, <span style=color:#a6e22e>XAxis</span>, <span style=color:#a6e22e>YAxis</span>, <span style=color:#a6e22e>CartesianGrid</span>, <span style=color:#a6e22e>Tooltip</span>, <span style=color:#a6e22e>Legend</span>, <span style=color:#a6e22e>PolarGrid</span>, <span style=color:#a6e22e>PolarAngleAxis</span>, <span style=color:#a6e22e>PolarRadiusAxis</span>, <span style=color:#a6e22e>RadarChart</span>, <span style=color:#a6e22e>Radar</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;recharts&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Slider</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/slider&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/button&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Label</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/label&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CalculatorIcon</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;lucide-react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SincCalculator</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>N</span>, <span style=color:#a6e22e>setN</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>8</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>tempN</span>, <span style=color:#a6e22e>setTempN</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>8</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>Gmax</span>, <span style=color:#a6e22e>setGmax</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>tempGmax</span>, <span style=color:#a6e22e>setTempGmax</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>cartesianData</span>, <span style=color:#a6e22e>setCartesianData</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>polarData</span>, <span style=color:#a6e22e>setPolarData</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// å…³é”®æ–¹ä½è§’å®šä¹‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>keyAngles</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>45</span>, <span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>180</span>, <span style=color:#ae81ff>225</span>, <span style=color:#ae81ff>270</span>, <span style=color:#ae81ff>315</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculateGain</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>theta</span>, <span style=color:#a6e22e>N</span>, <span style=color:#a6e22e>Gmax</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>thetaRad</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>theta</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sinTheta</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>thetaRad</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>sinTheta</span>) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span><span style=color:#a6e22e>e</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Gmax</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>numerator</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>N</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sinTheta</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>denominator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>N</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sinTheta</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Gmax</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>numerator</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>denominator</span>, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateData</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newCartesianData</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newPolarData</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ›´æ–°ç›´è§’åæ ‡æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>theta</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>90</span>; <span style=color:#a6e22e>theta</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>90</span>; <span style=color:#a6e22e>theta</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>gain</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateGain</span>(<span style=color:#a6e22e>theta</span>, <span style=color:#a6e22e>tempN</span>, <span style=color:#a6e22e>tempGmax</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>gainDB</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(Math.<span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>gain</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>e</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>));
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>newCartesianData</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>theta</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>gain</span>: <span style=color:#66d9ef>gainDB</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ›´æ–°æåæ ‡æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>theta</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>theta</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>360</span>; <span style=color:#a6e22e>theta</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>5</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// å¯¹äºå¤§äº180åº¦çš„è§’åº¦ï¼Œä½¿ç”¨å¯¹ç§°æ€§è®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calcTheta</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>theta</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>180</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>theta</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>90</span> : <span style=color:#66d9ef>270</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>theta</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>gain</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateGain</span>(<span style=color:#a6e22e>calcTheta</span>, <span style=color:#a6e22e>tempN</span>, <span style=color:#a6e22e>tempGmax</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>gainDB</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(Math.<span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>gain</span>, <span style=color:#ae81ff>1</span><span style=color:#a6e22e>e</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>normalizedGain</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>pow</span>(<span style=color:#ae81ff>10</span>, <span style=color:#a6e22e>gainDB</span><span style=color:#f92672>/</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>newPolarData</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>theta</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>gain</span>: <span style=color:#66d9ef>normalizedGain</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>gainDB</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setCartesianData</span>(<span style=color:#a6e22e>newCartesianData</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setPolarData</span>(<span style=color:#a6e22e>newPolarData</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setN</span>(<span style=color:#a6e22e>tempN</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setGmax</span>(<span style=color:#a6e22e>tempGmax</span>);
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// è‡ªå®šä¹‰è§’åº¦è½´åˆ»åº¦æ ¼å¼åŒ–
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>formatPolarAngle</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>angleValue</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// åªæœ‰å…³é”®è§’åº¦æ‰æ˜¾ç¤ºæ ‡ç­¾
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyAngles</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>angleValue</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>angleValue</span><span style=color:#e6db74>}</span><span style=color:#e6db74>Â°`</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Card</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full max-w-4xl p-6&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>CardTitle</span>&gt;<span style=color:#960050;background-color:#1e0010>è¾›æ ¼æ–¹å‘å›¾è®¡ç®—å™¨</span>&lt;/<span style=color:#f92672>CardTitle</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardContent</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-6&#34;</span>&gt;
</span></span><span style=display:flex><span>          {<span style=color:#75715e>/* å‚æ•°æ§åˆ¶åŒº */</span>}
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>é˜µå…ƒæ•°</span> (<span style=color:#a6e22e>N</span>)<span style=color:#f92672>:</span> {<span style=color:#a6e22e>tempN</span>}&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Slider</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{[<span style=color:#a6e22e>tempN</span>]}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>min</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>2</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>max</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>32</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>step</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onValueChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setTempN</span>(<span style=color:#a6e22e>value</span>[<span style=color:#ae81ff>0</span>])}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>æœ€å¤§å¢ç›Š</span> (<span style=color:#a6e22e>Gmax</span>)<span style=color:#f92672>:</span> {<span style=color:#a6e22e>tempGmax</span>}&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Slider</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{[<span style=color:#a6e22e>tempGmax</span>]}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>min</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>0.1</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>max</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>2</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>step</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>0.1</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onValueChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setTempGmax</span>(<span style=color:#a6e22e>value</span>[<span style=color:#ae81ff>0</span>])}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>Button</span> 
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>updateData</span>}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full&#34;</span>
</span></span><span style=display:flex><span>            &gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>CalculatorIcon</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-4 h-4 mr-2&#34;</span> /&gt;
</span></span><span style=display:flex><span>              <span style=color:#960050;background-color:#1e0010>é‡æ–°è®¡ç®—</span>
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-1 md:grid-cols-2 gap-6&#34;</span>&gt;
</span></span><span style=display:flex><span>            {<span style=color:#75715e>/* ç›´è§’åæ ‡å›¾ */</span>}
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full overflow-x-auto&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-lg font-medium mb-4&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>ç›´è§’åæ ‡æ–¹å‘å›¾</span>&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>LineChart</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>500</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>height</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>300</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>cartesianData</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>margin</span><span style=color:#f92672>=</span>{{
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>top</span>: <span style=color:#66d9ef>5</span>,
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>right</span>: <span style=color:#66d9ef>30</span>,
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>left</span>: <span style=color:#66d9ef>20</span>,
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>bottom</span>: <span style=color:#66d9ef>5</span>,
</span></span><span style=display:flex><span>                }}
</span></span><span style=display:flex><span>              &gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>CartesianGrid</span> <span style=color:#a6e22e>strokeDasharray</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;3 3&#34;</span> /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>XAxis</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dataKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;theta&#34;</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;æ–¹ä½è§’ (åº¦)&#39;</span>, <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;bottom&#39;</span> }}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>YAxis</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span>{{ 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;å¢ç›Š (dB)&#39;</span>, 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>angle</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>90</span>, 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insideLeft&#39;</span>
</span></span><span style=display:flex><span>                  }}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>domain</span><span style=color:#f92672>=</span>{[<span style=color:#f92672>-</span><span style=color:#ae81ff>40</span>, <span style=color:#ae81ff>0</span>]}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Tooltip</span> /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Line</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;monotone&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dataKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gain&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>stroke</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#2563eb&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dot</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>false</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>strokeWidth</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>2</span>}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>LineChart</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            {<span style=color:#75715e>/* æåæ ‡å›¾ */</span>}
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full overflow-x-auto&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-lg font-medium mb-4&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>æåæ ‡æ–¹å‘å›¾</span>&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>RadarChart</span> 
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>500</span>} 
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>height</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>300</span>} 
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>polarData</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>cx</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50%&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>cy</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50%&#34;</span>
</span></span><span style=display:flex><span>              &gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>PolarGrid</span> /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>PolarAngleAxis</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dataKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;theta&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>tickFormatter</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>formatPolarAngle</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>ticks</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>keyAngles</span>}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>PolarRadiusAxis</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>angle</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>90</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>domain</span><span style=color:#f92672>=</span>{[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>tickFormatter</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span>(<span style=color:#ae81ff>20</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(<span style=color:#a6e22e>value</span>)).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>0</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>dB`</span>}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Radar</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;å¢ç›Š&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dataKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gain&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>stroke</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#2563eb&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>fill</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#2563eb&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>fillOpacity</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>0.6</span>}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Tooltip</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>formatter</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>props</span>) <span style=color:#f92672>=&gt;</span> [
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span>(<span style=color:#ae81ff>20</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(<span style=color:#a6e22e>value</span>)).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>2</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> dB`</span>,
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;å¢ç›Š&#39;</span>
</span></span><span style=display:flex><span>                  ]}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>RadarChart</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          {<span style=color:#75715e>/* å…³é”®ç‚¹æ•°æ®æ˜¾ç¤º */</span>}
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-2 gap-4 mt-4&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;p-4 border rounded&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>ä¸»ç“£å¢ç›Š</span> (<span style=color:#ae81ff>0</span><span style=color:#960050;background-color:#1e0010>Â°</span>)&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>p</span>&gt;{(<span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(<span style=color:#a6e22e>calculateGain</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>N</span>, <span style=color:#a6e22e>Gmax</span>))).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>2</span>)} <span style=color:#a6e22e>dB</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;p-4 border rounded&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>h3</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;font-medium&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>å‰¯ç“£ç”µå¹³</span> (<span style=color:#960050;background-color:#1e0010>Â±</span><span style=color:#ae81ff>90</span><span style=color:#960050;background-color:#1e0010>Â°</span>)&lt;/<span style=color:#f92672>h3</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>p</span>&gt;{(<span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(<span style=color:#a6e22e>calculateGain</span>(<span style=color:#ae81ff>90</span>, <span style=color:#a6e22e>N</span>, <span style=color:#a6e22e>Gmax</span>))).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>2</span>)} <span style=color:#a6e22e>dB</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardContent</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Card</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>SincCalculator</span>;</span></span></code></pre></div><h2 id=ä¸‰æ¨¡å‹ä»£ç >ä¸‰ã€æ¨¡å‹ä»£ç </h2><h3 id=pythonä»£ç >Pythonä»£ç </h3><p>ç”¨äºæµ‹è¯•å’Œå¯è§†åŒ–è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹çš„ä»£ç ã€‚è¿™ä¸ªä»£ç å°†å±•ç¤ºä¸åŒé˜µå…ƒæ•°å¯¹æ–¹å‘å›¾çš„å½±å“ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calc_sinc_pattern</span>(theta_deg, N, G_max<span style=color:#f92672>=</span><span style=color:#ae81ff>1.0</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    è®¡ç®—è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹çš„å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    å‚æ•°:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    theta_deg: ndarray, è§‚å¯Ÿè§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    N: int, å¤©çº¿é˜µå…ƒæ•°
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    G_max: float, æœ€å¤§å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    è¿”å›:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ndarray: å¯¹åº”è§’åº¦çš„å¢ç›Šå€¼
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</span>
</span></span><span style=display:flex><span>    theta_rad <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>deg2rad(theta_deg)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># é¿å…é™¤é›¶é”™è¯¯</span>
</span></span><span style=display:flex><span>    sin_theta <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>sin(theta_rad)
</span></span><span style=display:flex><span>    numerator <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>sin(N <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>pi <span style=color:#f92672>*</span> sin_theta)
</span></span><span style=display:flex><span>    denominator <span style=color:#f92672>=</span> N <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>pi <span style=color:#f92672>*</span> sin_theta
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># å¤„ç† theta = 0 çš„ç‰¹æ®Šæƒ…å†µ</span>
</span></span><span style=display:flex><span>    zero_indices <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>where(np<span style=color:#f92672>.</span>abs(sin_theta) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1e-10</span>)
</span></span><span style=display:flex><span>    result <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>zeros_like(theta_deg, dtype<span style=color:#f92672>=</span>float)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># è®¡ç®—éé›¶è§’åº¦çš„å¢ç›Š</span>
</span></span><span style=display:flex><span>    nonzero_indices <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>where(np<span style=color:#f92672>.</span>abs(sin_theta) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>1e-10</span>)
</span></span><span style=display:flex><span>    result[nonzero_indices] <span style=color:#f92672>=</span> G_max <span style=color:#f92672>*</span> (numerator[nonzero_indices] <span style=color:#f92672>/</span> denominator[nonzero_indices]) <span style=color:#f92672>**</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># è®¾ç½®é›¶è§’åº¦çš„å¢ç›Šä¸ºæœ€å¤§å€¼</span>
</span></span><span style=display:flex><span>    result[zero_indices] <span style=color:#f92672>=</span> G_max
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>plot_pattern</span>(N_values):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ç»˜åˆ¶ä¸åŒé˜µå…ƒæ•°çš„æ–¹å‘å›¾
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    å‚æ•°:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    N_values: list, è¦æ¯”è¾ƒçš„é˜µå…ƒæ•°åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># åˆ›å»ºè§’åº¦æ•°ç»„ï¼ˆ-90åº¦åˆ°90åº¦ï¼‰</span>
</span></span><span style=display:flex><span>    theta <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>linspace(<span style=color:#f92672>-</span><span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>1000</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># è®¾ç½®å›¾å½¢æ ·å¼</span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>8</span>))
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>True</span>, linestyle<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;--&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.7</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># ä¸ºæ¯ä¸ªé˜µå…ƒæ•°ç»˜åˆ¶æ–¹å‘å›¾</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> N <span style=color:#f92672>in</span> N_values:
</span></span><span style=display:flex><span>        gain_db <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>log10(calc_sinc_pattern(theta, N))
</span></span><span style=display:flex><span>        plt<span style=color:#f92672>.</span>plot(theta, gain_db, label<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;N=</span><span style=color:#e6db74>{</span>N<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># è®¾ç½®å›¾å½¢å±æ€§</span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>xlabel(<span style=color:#e6db74>&#39;æ–¹ä½è§’ (åº¦)&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>ylabel(<span style=color:#e6db74>&#39;å¢ç›Š (dB)&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#39;è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹ - ä¸åŒé˜µå…ƒæ•°æ¯”è¾ƒ&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>legend()
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>ylim(<span style=color:#f92672>-</span><span style=color:#ae81ff>40</span>, <span style=color:#ae81ff>0</span>)  <span style=color:#75715e># é™åˆ¶æœ€å°å¢ç›Šä¸º-40dB</span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>show()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_pattern</span>():
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    æµ‹è¯•å‡½æ•°ï¼šéªŒè¯æ–¹å‘å›¾çš„å…³é”®ç‰¹æ€§
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># æµ‹è¯•ä¸åŒé˜µå…ƒæ•°å’Œè§’åº¦çš„ç»„åˆ</span>
</span></span><span style=display:flex><span>    N_test <span style=color:#f92672>=</span> [<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>16</span>]
</span></span><span style=display:flex><span>    theta_test <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>60</span>])
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹æµ‹è¯•ç»“æœï¼š&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> N <span style=color:#f92672>in</span> N_test:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>é˜µå…ƒæ•° N = </span><span style=color:#e6db74>{</span>N<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        gains <span style=color:#f92672>=</span> calc_sinc_pattern(theta_test, N)
</span></span><span style=display:flex><span>        gains_db <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>log10(gains)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> theta, gain, gain_db <span style=color:#f92672>in</span> zip(theta_test, gains, gains_db):
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;è§’åº¦: </span><span style=color:#e6db74>{</span>theta<span style=color:#e6db74>:</span><span style=color:#e6db74>3.0f</span><span style=color:#e6db74>}</span><span style=color:#e6db74>Â° | å¢ç›Š: </span><span style=color:#e6db74>{</span>gain<span style=color:#e6db74>:</span><span style=color:#e6db74>.4f</span><span style=color:#e6db74>}</span><span style=color:#e6db74> | å¢ç›Š(dB): </span><span style=color:#e6db74>{</span>gain_db<span style=color:#e6db74>:</span><span style=color:#e6db74>.2f</span><span style=color:#e6db74>}</span><span style=color:#e6db74> dB&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è¿è¡Œæµ‹è¯•</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># æ‰§è¡Œæ•°å€¼æµ‹è¯•</span>
</span></span><span style=display:flex><span>    test_pattern()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># ç»˜åˆ¶ä¸åŒé˜µå…ƒæ•°çš„æ–¹å‘å›¾æ¯”è¾ƒ</span>
</span></span><span style=display:flex><span>    plot_pattern([<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>16</span>])</span></span></code></pre></div><p>ä»¥ä¸Šä»£ç å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li><p><code>calc_sinc_pattern</code> å‡½æ•°ï¼š</p><ul><li>å®ç°äº†è¾›æ ¼æ–¹å‘å›¾çš„æ•°å­¦æ¨¡å‹</li><li>å¤„ç†äº†é›¶è§’åº¦çš„ç‰¹æ®Šæƒ…å†µ</li><li>æ”¯æŒå‘é‡åŒ–è®¡ç®—ï¼Œæé«˜æ•ˆç‡</li></ul></li><li><p><code>plot_pattern</code> å‡½æ•°ï¼š</p><ul><li>ç»˜åˆ¶æåæ ‡å½¢å¼çš„æ–¹å‘å›¾</li><li>æ”¯æŒå¤šä¸ªé˜µå…ƒæ•°çš„å¯¹æ¯”</li><li>ä½¿ç”¨ dB å•ä½æ˜¾ç¤ºå¢ç›Š</li></ul></li><li><p><code>test_pattern</code> å‡½æ•°ï¼š</p><ul><li>éªŒè¯ä¸åŒè§’åº¦å’Œé˜µå…ƒæ•°çš„ç»„åˆ</li><li>è¾“å‡ºè¯¦ç»†çš„æµ‹è¯•ç»“æœ</li></ul></li></ol><p>è¦è¿è¡Œè¿™ä¸ªä»£ç ï¼Œéœ€è¦å®‰è£… <code>NumPy</code> å’Œ <code>Matplotlib</code> åº“ã€‚è¿è¡Œåï¼Œå°†çœ‹åˆ°ï¼š</p><ol><li>æ§åˆ¶å°è¾“å‡ºï¼šæ˜¾ç¤ºä¸åŒé˜µå…ƒæ•°å’Œè§’åº¦ç»„åˆçš„å…·ä½“å¢ç›Šå€¼</li><li>å›¾å½¢è¾“å‡ºï¼šå±•ç¤ºä¸åŒé˜µå…ƒæ•°çš„æ–¹å‘å›¾å¯¹æ¯”</li></ol><p>ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>N_values</code> å’Œæµ‹è¯•è§’åº¦æ¥æ¢ç´¢ä¸åŒçš„å‚æ•°ç»„åˆã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>å¢ç›Šå€¼å·²ç»å½’ä¸€åŒ–ï¼Œæœ€å¤§å€¼ä¸º1ï¼ˆ0 dBï¼‰</li><li>å›¾è¡¨ä¸­ä½¿ç”¨äº† dB å•ä½ä»¥betterå±•ç¤ºæ—ç“£ç‰¹æ€§</li><li>ç¨‹åºå¤„ç†äº† Î¸ = 0Â° æ—¶çš„å¥‡å¼‚ç‚¹</li></ul><h3 id=cä»£ç >C++ä»£ç </h3><p>ä»¥ä¸‹ä¸ºä¸€ä¸ªæ˜“äºé›†æˆçš„C++è¾›æ ¼æ–¹å‘å›¾è®¡ç®—æ¨¡å—ï¼ŒåŒ…å«æ¸…æ™°çš„è¾“å…¥è¾“å‡ºæ¥å£ã€‚</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// SincDirectionalModel.hpp
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#ifndef SINC_DIRECTIONAL_MODEL_HPP
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define SINC_DIRECTIONAL_MODEL_HPP
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdexcept&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> DirectionalModel {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @brief è¾›æ ¼æ–¹å‘å›¾è®¡ç®—æ¨¡å—
</span></span></span><span style=display:flex><span><span style=color:#75715e> * ç”¨äºè®¡ç®—å’Œåˆ†æå¤©çº¿çš„è¾›æ ¼æ–¹å‘å›¾ç‰¹æ€§
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SincDirectionalModel</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief æ„é€ å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param elementCount å¤©çº¿é˜µå…ƒæ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param maxGain æœ€å¤§å¢ç›Šå€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throw std::invalid_argument å½“å‚æ•°æ— æ•ˆæ—¶æŠ›å‡ºå¼‚å¸¸
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    SincDirectionalModel(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> elementCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>, <span style=color:#66d9ef>double</span> maxGain <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief è®¾ç½®å¤©çº¿é˜µå…ƒæ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param elementCount å¤©çº¿é˜µå…ƒæ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return bool è®¾ç½®æ˜¯å¦æˆåŠŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>setElementCount</span>(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> elementCount);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief è®¾ç½®æœ€å¤§å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param maxGain æœ€å¤§å¢ç›Šå€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return bool è®¾ç½®æ˜¯å¦æˆåŠŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>setMaxGain</span>(<span style=color:#66d9ef>double</span> maxGain);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief è®¡ç®—æŒ‡å®šè§’åº¦çš„å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param angle_deg è§‚å¯Ÿè§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return double å¢ç›Šå€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>calculateGain</span>(<span style=color:#66d9ef>double</span> angle_deg) <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief è®¡ç®—æŒ‡å®šè§’åº¦çš„åˆ†è´å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param angle_deg è§‚å¯Ÿè§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return double åˆ†è´å¢ç›Šå€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>calculateGainDB</span>(<span style=color:#66d9ef>double</span> angle_deg) <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief ç”Ÿæˆæ–¹å‘å›¾æ•°æ®ç‚¹
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param startAngle èµ·å§‹è§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param endAngle ç»“æŸè§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param stepSize è§’åº¦æ­¥é•¿ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return std::vector&lt;std::pair&lt;double, double&gt;&gt; è§’åº¦-å¢ç›Šå¯¹
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;&gt;</span> generatePattern(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> startAngle <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>90.0</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> endAngle <span style=color:#f92672>=</span> <span style=color:#ae81ff>90.0</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> stepSize <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>) <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief ç”Ÿæˆåˆ†è´æ–¹å‘å›¾æ•°æ®ç‚¹
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param startAngle èµ·å§‹è§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param endAngle ç»“æŸè§’åº¦ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param stepSize è§’åº¦æ­¥é•¿ï¼ˆåº¦ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return std::vector&lt;std::pair&lt;double, double&gt;&gt; è§’åº¦-åˆ†è´å¢ç›Šå¯¹
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;&gt;</span> generatePatternDB(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> startAngle <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>90.0</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> endAngle <span style=color:#f92672>=</span> <span style=color:#ae81ff>90.0</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> stepSize <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>) <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @brief è·å–å¤©çº¿å…³é”®å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return std::pair&lt;double, double&gt; ä¸»ç“£å¢ç›Š(dB)å’Œç¬¬ä¸€æ—ç“£ç”µå¹³(dB)
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;</span> getKeyParameters() <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> N_;      <span style=color:#75715e>// å¤©çº¿é˜µå…ƒæ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> Gmax_;        <span style=color:#75715e>// æœ€å¤§å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>double</span> PI <span style=color:#f92672>=</span> <span style=color:#ae81ff>3.14159265358979323846</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ£€æŸ¥è§’åº¦å‚æ•°æ˜¯å¦æœ‰æ•ˆ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>validateAngleParams</span>(<span style=color:#66d9ef>double</span> start, <span style=color:#66d9ef>double</span> end, <span style=color:#66d9ef>double</span> step) <span style=color:#66d9ef>const</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>} <span style=color:#75715e>// namespace DirectionalModel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#endif </span><span style=color:#75715e>// SINC_DIRECTIONAL_MODEL_HPP
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// SincDirectionalModel.cpp
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;SincDirectionalModel.hpp&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> DirectionalModel {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SincDirectionalModel<span style=color:#f92672>::</span>SincDirectionalModel(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> elementCount, <span style=color:#66d9ef>double</span> maxGain) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>setElementCount(elementCount) <span style=color:#f92672>||</span> <span style=color:#f92672>!</span>setMaxGain(maxGain)) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> std<span style=color:#f92672>::</span>invalid_argument(<span style=color:#e6db74>&#34;Invalid constructor parameters&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> SincDirectionalModel<span style=color:#f92672>::</span>setElementCount(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> elementCount) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (elementCount <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    N_ <span style=color:#f92672>=</span> elementCount;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> true;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> SincDirectionalModel<span style=color:#f92672>::</span>setMaxGain(<span style=color:#66d9ef>double</span> maxGain) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (maxGain <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    Gmax_ <span style=color:#f92672>=</span> maxGain;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> true;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>double</span> SincDirectionalModel<span style=color:#f92672>::</span>calculateGain(<span style=color:#66d9ef>double</span> angle_deg) <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// è½¬æ¢ä¸ºå¼§åº¦
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> angle_rad <span style=color:#f92672>=</span> angle_deg <span style=color:#f92672>*</span> PI <span style=color:#f92672>/</span> <span style=color:#ae81ff>180.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> sin_theta <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>sin(angle_rad);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// å¤„ç†é›¶è§’åº¦ç‰¹æ®Šæƒ…å†µ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (std<span style=color:#f92672>::</span>abs(sin_theta) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1e-10</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Gmax_;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> numerator <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>sin(N_ <span style=color:#f92672>*</span> PI <span style=color:#f92672>*</span> sin_theta);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> denominator <span style=color:#f92672>=</span> N_ <span style=color:#f92672>*</span> PI <span style=color:#f92672>*</span> sin_theta;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> Gmax_ <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>pow(numerator <span style=color:#f92672>/</span> denominator, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>double</span> SincDirectionalModel<span style=color:#f92672>::</span>calculateGainDB(<span style=color:#66d9ef>double</span> angle_deg) <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> gain <span style=color:#f92672>=</span> calculateGain(angle_deg);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// é˜²æ­¢å–å¯¹æ•°æ—¶å‡ºé”™ï¼Œè®¾ç½®æœ€å°å€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    gain <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>max(gain, <span style=color:#ae81ff>1e-10</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>10.0</span> <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>log10(gain);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> SincDirectionalModel<span style=color:#f92672>::</span>validateAngleParams(<span style=color:#66d9ef>double</span> start, <span style=color:#66d9ef>double</span> end, <span style=color:#66d9ef>double</span> step) <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (start <span style=color:#f92672>&gt;=</span> end <span style=color:#f92672>||</span> step <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (std<span style=color:#f92672>::</span>abs(step) <span style=color:#f92672>&gt;</span> std<span style=color:#f92672>::</span>abs(end <span style=color:#f92672>-</span> start)) <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> true;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;&gt;</span> SincDirectionalModel<span style=color:#f92672>::</span>generatePattern(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> startAngle, <span style=color:#66d9ef>double</span> endAngle, <span style=color:#66d9ef>double</span> stepSize) <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>validateAngleParams(startAngle, endAngle, stepSize)) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> std<span style=color:#f92672>::</span>invalid_argument(<span style=color:#e6db74>&#34;Invalid angle parameters&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;&gt;</span> pattern;
</span></span><span style=display:flex><span>    pattern.reserve(<span style=color:#66d9ef>static_cast</span><span style=color:#f92672>&lt;</span>size_t<span style=color:#f92672>&gt;</span>((endAngle <span style=color:#f92672>-</span> startAngle) <span style=color:#f92672>/</span> stepSize) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>double</span> angle <span style=color:#f92672>=</span> startAngle; angle <span style=color:#f92672>&lt;=</span> endAngle; angle <span style=color:#f92672>+=</span> stepSize) {
</span></span><span style=display:flex><span>        pattern.emplace_back(angle, calculateGain(angle));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> pattern;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;&gt;</span> SincDirectionalModel<span style=color:#f92672>::</span>generatePatternDB(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> startAngle, <span style=color:#66d9ef>double</span> endAngle, <span style=color:#66d9ef>double</span> stepSize) <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>validateAngleParams(startAngle, endAngle, stepSize)) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> std<span style=color:#f92672>::</span>invalid_argument(<span style=color:#e6db74>&#34;Invalid angle parameters&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;&gt;</span> pattern;
</span></span><span style=display:flex><span>    pattern.reserve(<span style=color:#66d9ef>static_cast</span><span style=color:#f92672>&lt;</span>size_t<span style=color:#f92672>&gt;</span>((endAngle <span style=color:#f92672>-</span> startAngle) <span style=color:#f92672>/</span> stepSize) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>double</span> angle <span style=color:#f92672>=</span> startAngle; angle <span style=color:#f92672>&lt;=</span> endAngle; angle <span style=color:#f92672>+=</span> stepSize) {
</span></span><span style=display:flex><span>        pattern.emplace_back(angle, calculateGainDB(angle));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> pattern;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>std<span style=color:#f92672>::</span>pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span>, <span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;</span> SincDirectionalModel<span style=color:#f92672>::</span>getKeyParameters() <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> mainLobeGainDB <span style=color:#f92672>=</span> calculateGainDB(<span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æŸ¥æ‰¾ç¬¬ä¸€æ—ç“£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> firstSidelobeLevel <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>std<span style=color:#f92672>::</span>numeric_limits<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;::</span>infinity();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> angle <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>bool</span> foundFirstPeak <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (angle <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>90.0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> currentGain <span style=color:#f92672>=</span> calculateGainDB(angle);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span> nextGain <span style=color:#f92672>=</span> calculateGainDB(angle <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.1</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (currentGain <span style=color:#f92672>&gt;</span> nextGain <span style=color:#f92672>&amp;&amp;</span> foundFirstPeak) {
</span></span><span style=display:flex><span>            firstSidelobeLevel <span style=color:#f92672>=</span> currentGain;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (currentGain <span style=color:#f92672>&lt;</span> nextGain) {
</span></span><span style=display:flex><span>            foundFirstPeak <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        angle <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {mainLobeGainDB, firstSidelobeLevel};
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>} <span style=color:#75715e>// namespace DirectionalModel
</span></span></span></code></pre></div><p>è¿™ä¸ªæ¨¡å—æä¾›äº†ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š</p><ol><li><p><strong>ç±»æ¥å£è®¾è®¡</strong>ï¼š</p><ul><li>æ¸…æ™°çš„æ„é€ å‡½æ•°å’Œè®¾ç½®å‡½æ•°</li><li>å®Œæ•´çš„é”™è¯¯æ£€æŸ¥å’Œå¼‚å¸¸å¤„ç†</li><li>å‘½åç©ºé—´å°è£…</li></ul></li><li><p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p><ul><li><code>calculateGain</code>: è®¡ç®—æŒ‡å®šè§’åº¦çš„å¢ç›Š</li><li><code>calculateGainDB</code>: è®¡ç®—åˆ†è´å½¢å¼çš„å¢ç›Š</li><li><code>generatePattern</code>: ç”Ÿæˆæ–¹å‘å›¾æ•°æ®ç‚¹</li><li><code>generatePatternDB</code>: ç”Ÿæˆåˆ†è´å½¢å¼çš„æ–¹å‘å›¾æ•°æ®ç‚¹</li></ul></li><li><p><strong>è¾…åŠ©åŠŸèƒ½</strong>ï¼š</p><ul><li><code>getKeyParameters</code>: è·å–ä¸»ç“£å¢ç›Šå’Œç¬¬ä¸€æ—ç“£ç”µå¹³</li><li>å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†</li></ul></li></ol><p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;SincDirectionalModel.hpp&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// åˆ›å»ºæ¨¡å‹å®ä¾‹ï¼š8ä¸ªé˜µå…ƒï¼Œæœ€å¤§å¢ç›Š1.0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        DirectionalModel<span style=color:#f92672>::</span>SincDirectionalModel model(<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¡ç®—å•ç‚¹å¢ç›Š
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> gain_0deg <span style=color:#f92672>=</span> model.calculateGainDB(<span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;0åº¦å¢ç›Š: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> gain_0deg <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; dB</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ç”Ÿæˆæ–¹å‘å›¾æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>auto</span> pattern <span style=color:#f92672>=</span> model.generatePatternDB(<span style=color:#f92672>-</span><span style=color:#ae81ff>90.0</span>, <span style=color:#ae81ff>90.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è·å–å…³é”®å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>auto</span> [mainLobe, sidelobe] <span style=color:#f92672>=</span> model.getKeyParameters();
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;ä¸»ç“£å¢ç›Š: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> mainLobe <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; dB</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;ç¬¬ä¸€æ—ç“£ç”µå¹³: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> sidelobe <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; dB</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>exception<span style=color:#f92672>&amp;</span> e) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Error: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> e.what() <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p><strong>é›†æˆå»ºè®®ï¼š</strong></p><ol><li>å°†å¤´æ–‡ä»¶å’Œæºæ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­</li><li>åŒ…å«å¤´æ–‡ä»¶å¹¶ä½¿ç”¨ <code>DirectionalModel</code> å‘½åç©ºé—´</li><li>æ ¹æ®éœ€è¦è°ƒç”¨ç›¸åº”çš„æ–¹æ³•</li><li>æ³¨æ„å¤„ç†å¯èƒ½çš„å¼‚å¸¸</li></ol><footer class=footline><i class='fa-fw fas fa-calendar'></i> 2025-05-21</footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo href=/index.html><img src=/images/logo.png alt="FlitSoft Docs" style=width:80px;height:auto></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class=default-animation><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/uas/index.html><a class=padding href=/uas/index.html>UAS</a><ul id=R-subsections-50d6e18f3c774adcdf96c62beb3fb9ae class=collapsible-menu></ul></li><li class=parent data-nav-id=/em/index.html><a class=padding href=/em/index.html>EM</a><ul id=R-subsections-5221d921411ef33ede36c0310590339e class=collapsible-menu><li class="parent alwaysopen" data-nav-id=/em/antenna-pattern/index.html><a class=padding href=/em/antenna-pattern/index.html>Antenna Pattern</a><ul id=R-subsections-ccb34e1afa1278e5b9fa47ea16615cf2 class=collapsible-menu><li class=active data-nav-id=/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html>è¾›æ ¼æ–¹å‘å›¾æ¨¡å‹</a></li><li data-nav-id=/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html>é«˜æ–¯æ–¹å‘å›¾æ¨¡å‹</a></li></ul></li><li class=alwaysopen data-nav-id=/em/comm/index.html><a class=padding href=/em/comm/index.html>Communication</a><ul id=R-subsections-76a132cf152c8c25082aa45ad7e583aa class=collapsible-menu></ul></li><li class=alwaysopen data-nav-id=/em/radar/index.html><a class=padding href=/em/radar/index.html>Radar</a><ul id=R-subsections-ffd05e868c4f9d0f123a8646ca79cb9c class=collapsible-menu></ul></li></ul></li><li data-nav-id=/agi/index.html><a class=padding href=/agi/index.html>AI</a><ul id=R-subsections-b697951847df19851ae8635cac95c15a class=collapsible-menu></ul></li><li data-nav-id=/gaming/index.html><a class=padding href=/gaming/index.html>Gaming</a></li><li data-nav-id=/c2/index.html><a class=padding href=/c2/index.html>C2</a><ul id=R-subsections-e0126222f5f1b52fd67c95ccf5ad1c18 class=collapsible-menu></ul></li><li data-nav-id=/simu/index.html><a class=padding href=/simu/index.html>Simulation</a><ul id=R-subsections-80cfed847676c641fa01f11f3f2904bf class=collapsible-menu></ul></li><li data-nav-id=/visual/index.html><a class=padding href=/visual/index.html>Visualization</a><ul id=R-subsections-080a96fba97ea97926a463e36c9cb108 class=collapsible-menu></ul></li><li data-nav-id=/log/index.html><a class=padding href=/log/index.html>Log</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-light value=zen-light selected>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built By FlitSoft</p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1750422279 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1750422279 defer></script><script>window.MathJax=Object.assign(window.MathJax||{},{tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},options:{enableMenu:!1}},JSON.parse("{}"))</script><script id=MathJax-script async src=/js/mathjax/tex-mml-chtml.js?1750422279></script><script src=/js/theme.min.js?1750422279 defer></script></body></html>