<!doctype html><html lang=zh-cn dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.147.3"><meta name=generator content="Relearn 7.6.1+4407b4364ab6f7477f7671fbd20c0494bade40ee"><meta name=description content="This summary is independent of the content."><meta name=author content="你的名字"><meta name=twitter:card content="summary"><meta name=twitter:title content="高斯方向图模型 :: FlitSoft Docs"><meta name=twitter:description content="This summary is independent of the content."><meta property="og:url" content="https://hill68.github.io/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html"><meta property="og:site_name" content="FlitSoft Docs"><meta property="og:title" content="高斯方向图模型 :: FlitSoft Docs"><meta property="og:description" content="This summary is independent of the content."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="EM"><meta property="article:published_time" content="2025-05-21T15:43:38+08:00"><meta property="article:modified_time" content="2025-05-21T15:43:38+08:00"><meta itemprop=name content="高斯方向图模型 :: FlitSoft Docs"><meta itemprop=description content="This summary is independent of the content."><meta itemprop=datePublished content="2025-05-21T15:43:38+08:00"><meta itemprop=dateModified content="2025-05-21T15:43:38+08:00"><meta itemprop=wordCount content="1705"><title>高斯方向图模型 :: FlitSoft Docs</title>
<link href=/images/logo.png?1751357290 rel=icon type=image/png><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1751357290 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1751357290 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1751357290 rel=stylesheet><link href=/css/theme.min.css?1751357290 rel=stylesheet><link href=/css/format-html.min.css?1751357290 rel=stylesheet id=R-format-style><link href=/css/auto-complete/auto-complete.min.css?1751357290 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1751357290 defer></script><script src=/js/lunr/lunr.min.js?1751357290 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1751357290 defer></script><script src=/js/lunr/lunr.multi.min.js?1751357290 defer></script><script src=/js/lunr/lunr.zh.min.js?1751357290 defer></script><script src=/js/search.min.js?1751357290 defer></script><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://hill68.github.io",window.relearn.contentLangs=["zh"],window.relearn.index_js_url="/searchindex.en.js?1751357290",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!1,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.relearn.themevariants=["zen-light","zen-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/css/custom.css?1751357290 rel=stylesheet></head><body class="mobile-support html" data-url=/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#一高斯方向图模型>一、高斯方向图模型</a><ul><li><a href=#高斯方向图模型的改进形式>高斯方向图模型的改进形式</a></li></ul></li><li><a href=#二可视化线上计算器>二、可视化线上计算器</a></li><li><a href=#三参考代码>三、参考代码</a><ul><li><a href=#python代码>Python代码</a></li><li><a href=#c代码>C++代码</a></li><li><a href=#示例使用场景>示例使用场景</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/index.html><span itemprop=name>FlitSoft Docs</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/index.html><span itemprop=name>EM</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/em/antenna-pattern/index.html><span itemprop=name>Antenna Pattern</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>高斯方向图模型</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html title="辛格方向图模型 (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/em/comm/index.html title="Communication (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable em" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=高斯方向图模型>高斯方向图模型</h1><h2 id=一高斯方向图模型>一、高斯方向图模型</h2><p>高斯方向图模型是一种基于高斯分布的天线方向图简化模型，适合描述天线辐射方向图中主瓣的形状。其数学表达式如下：</p>$$
G(\theta) = G_{\text{max}} \cdot e^{-k (\frac{\theta}{\theta_{\text{3dB}}})^2}
$$<p><strong>参数说明</strong></p><ul><li>$G(\theta)$：方向 $\theta$ 上的天线增益。</li><li>$G_{\text{max}}$：主瓣最大增益，通常在 $\theta = 0$ 时取值。</li><li>$\theta$：观察方向与天线主轴（通常是主瓣方向）之间的夹角。</li><li>$\theta_{\text{3dB}}$：3dB 波束宽度，定义为增益下降到最大值的一半时对应的角度宽度。</li><li>$k$：控制波束形状的系数，通常与 $\theta_{\text{3dB}}$ 有关，常取值为 $k = \ln 2$，使得 $\theta = \theta_{\text{3dB}}$ 时增益下降到 $G_{\text{max}} / 2$。</li></ul><p><strong>特性</strong></p><ol><li><p><strong>主瓣集中性</strong>：</p><ul><li>高斯方向图模型的主瓣呈对称的高斯分布，随着角度偏离主轴，增益迅速下降。</li><li>由于模型忽略了旁瓣的影响，它通常用于关注主瓣方向的应用场景。</li></ul></li><li><p><strong>简洁性</strong>：</p><ul><li>高斯方向图模型通过简化旁瓣和其他次要特性，显著降低了计算复杂度，适合快速仿真计算。</li></ul></li><li><p><strong>归一化</strong>：</p><ul><li>为了便于计算，可以对增益进行归一化，使得 $G(\theta)$ 的值在主瓣方向取 1。</li></ul></li></ol><p><strong>应用场景</strong></p><ul><li><strong>电子战</strong>：快速估计天线主瓣方向的辐射能量分布，用于干扰或抗干扰评估。</li><li><strong>雷达和通信</strong>：对主瓣方向性较强的天线进行快速仿真。</li><li><strong>方向性优化</strong>：通过调整 $\theta_{\text{3dB}}$ 和 $k$ 参数实现特定的波束宽度和集中性。</li></ul><p>如果需要进一步扩展高斯方向图模型以包括旁瓣或其他特性，也可以通过叠加额外分量进行修正。</p><h3 id=高斯方向图模型的改进形式>高斯方向图模型的改进形式</h3><p>改进的高斯方向图模型其特点是用高斯分布描述主瓣，同时提供了一个函数形式用于描述主瓣以外的方向图（即旁瓣）：</p><p><strong>主瓣公式</strong></p>$$
f(\theta) = \exp\left(-k \theta^2\right)
$$<ul><li>主瓣部分是标准的高斯分布形式，其中 $k = \frac{4 \ln \sqrt{2}}{\theta_b^2}$，由 $\theta_b$（单程半功率点波束宽度）控制主瓣的宽度。</li><li>参数 $k$ 确保在 $\theta = \pm \frac{\theta_b}{2}$ 时，方向图幅度下降到其峰值的一半（即 3dB 下降点）。</li></ul><p><strong>主瓣以外的方向图</strong></p>$$
f(\theta) = \frac{(1 + \cos \theta) \sin(k \sin(\theta))}{2k \sin(\theta)}
$$<ul><li>这一部分用于描述主瓣以外（旁瓣）的方向图特性。</li><li>$k = \frac{1.3916}{\sin(0.5\theta_b)}$ 是根据波束宽度 $\theta_b$ 确定的常数。</li><li>分母 $\sin(\theta)$ 和分子的 $\sin(k \sin(\theta))$ 描述了旁瓣的振荡特性，旁瓣随 $\theta$ 增加呈周期性变化。</li></ul><p><strong>模型分析</strong></p><ol><li><p><strong>主瓣部分</strong>：</p><ul><li>与传统高斯方向图模型相符，用高斯函数来精确描述主瓣方向的辐射分布。</li><li>通过参数 $k$ 和 $\theta_b$ 控制主瓣的宽度和增益衰减速率。</li></ul></li><li><p><strong>旁瓣部分</strong>：</p><ul><li>旁瓣描述使用的是一个分段函数，体现了辐射能量的衰减和分布。</li><li>$(1 + \cos \theta)$ 项增强了主瓣附近的旁瓣幅度，而 $k$ 的引入确保旁瓣幅度的适当抑制。</li></ul></li><li><p><strong>是否为高斯方向图模型</strong>：</p><ul><li>这个模型主瓣部分严格满足高斯分布，可以视为高斯方向图模型。</li><li>增加了旁瓣描述的扩展部分，因此可以认为它是 <strong>一种改进的高斯方向图模型</strong>，在实际应用中更接近实际天线的辐射特性。</li></ul></li></ol><p><strong>适用场景</strong></p><p>这种模型在需要对主瓣精确建模并同时考虑旁瓣对系统性能影响的场景中非常适用，例如：</p><ul><li>电子战中的方向图干扰仿真。</li><li>雷达系统对目标信号主瓣和旁瓣的能量分布分析。</li><li>无线通信中的波束形成优化。</li></ul><h2 id=二可视化线上计算器>二、可视化线上计算器</h2><p><a href=https://claude.site/artifacts/917d549d-d142-4c69-95dc-7a8e4ad48997 rel=external target=_blank>https://claude.site/artifacts/917d549d-d142-4c69-95dc-7a8e4ad48997</a></p><p>这个交互式的React组件，可以让用户调整参数并实时查看改进型高斯方向图模型的变化。</p><img src=https://cdn.mathpix.com/snip/images/3T7mvHRp0hiEhRUiqZL-663tzCAldtSvEoAU36OZTK0.original.fullsize.png width=500/>
<img src=https://cdn.mathpix.com/snip/images/llh1UOwtc8686AbntL-Sy-1krr7FLVfKNWH5NSXGuM0.original.fullsize.png width=500/><p><strong>计算器代码：</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span>, <span style=color:#a6e22e>useCallback</span>, <span style=color:#a6e22e>useEffect</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>LineChart</span>, <span style=color:#a6e22e>Line</span>, <span style=color:#a6e22e>XAxis</span>, <span style=color:#a6e22e>YAxis</span>, <span style=color:#a6e22e>CartesianGrid</span>, <span style=color:#a6e22e>Tooltip</span>, <span style=color:#a6e22e>Legend</span>, <span style=color:#a6e22e>ResponsiveContainer</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;recharts&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Card</span>, <span style=color:#a6e22e>CardContent</span>, <span style=color:#a6e22e>CardHeader</span>, <span style=color:#a6e22e>CardTitle</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/card&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Slider</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/slider&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Label</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/label&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/button&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Input</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/input&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Switch</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@/components/ui/switch&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Calculator</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;lucide-react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>GaussianBeamCalculator</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 状态管理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>thetaB</span>, <span style=color:#a6e22e>setThetaB</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>10</span>); <span style=color:#75715e>// 波束宽度（度）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>plotRange</span>, <span style=color:#a6e22e>setPlotRange</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>90</span>); <span style=color:#75715e>// 绘图范围（度）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>resolution</span>, <span style=color:#a6e22e>setResolution</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>360</span>); <span style=color:#75715e>// 数据点数量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>patternData</span>, <span style=color:#a6e22e>setPatternData</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([]); <span style=color:#75715e>// 方向图数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>kMain</span>, <span style=color:#a6e22e>setKMain</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// 主瓣k参数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>kSide</span>, <span style=color:#a6e22e>setKSide</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// 旁瓣k参数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>manualK</span>, <span style=color:#a6e22e>setManualK</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>false</span>); <span style=color:#75715e>// 是否手动设置K参数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>manualKMain</span>, <span style=color:#a6e22e>setManualKMain</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 手动输入的主瓣k参数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>manualKSide</span>, <span style=color:#a6e22e>setManualKSide</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 手动输入的旁瓣k参数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 自动计算K参数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculateKParameters</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useCallback</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>thetaBRad</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>thetaB</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newKMain</span> <span style=color:#f92672>=</span> (<span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log</span>(Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>2</span>))) <span style=color:#f92672>/</span> (<span style=color:#a6e22e>thetaBRad</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>thetaBRad</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newKSide</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.3916</span> <span style=color:#f92672>/</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>thetaBRad</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>kMain</span>: <span style=color:#66d9ef>newKMain</span>, <span style=color:#a6e22e>kSide</span>: <span style=color:#66d9ef>newKSide</span> };
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>thetaB</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 更新K参数（考虑手动/自动模式）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateKParameters</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useCallback</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>manualK</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setKMain</span>(parseFloat(<span style=color:#a6e22e>manualKMain</span>) <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setKSide</span>(parseFloat(<span style=color:#a6e22e>manualKSide</span>) <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>kMain</span>: <span style=color:#66d9ef>newKMain</span>, <span style=color:#a6e22e>kSide</span>: <span style=color:#66d9ef>newKSide</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateKParameters</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setKMain</span>(<span style=color:#a6e22e>newKMain</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setKSide</span>(<span style=color:#a6e22e>newKSide</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setManualKMain</span>(<span style=color:#a6e22e>newKMain</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>4</span>));
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setManualKSide</span>(<span style=color:#a6e22e>newKSide</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>4</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>manualK</span>, <span style=color:#a6e22e>manualKMain</span>, <span style=color:#a6e22e>manualKSide</span>, <span style=color:#a6e22e>calculateKParameters</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 计算方向图数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calculatePattern</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useCallback</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>updateKParameters</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>step</span> <span style=color:#f92672>=</span> (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>plotRange</span>) <span style=color:#f92672>/</span> (<span style=color:#a6e22e>resolution</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentKMain</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>manualK</span> <span style=color:#f92672>?</span> parseFloat(<span style=color:#a6e22e>manualKMain</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>kMain</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentKSide</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>manualK</span> <span style=color:#f92672>?</span> parseFloat(<span style=color:#a6e22e>manualKSide</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>kSide</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>theta</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>plotRange</span>; <span style=color:#a6e22e>theta</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>plotRange</span>; <span style=color:#a6e22e>theta</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>step</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>thetaRad</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>theta</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>thetaBHalf</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>thetaB</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isMainLobe</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>theta</span>) <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>thetaBHalf</span>;
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>amplitude</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isMainLobe</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>amplitude</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>exp</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>currentKMain</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>thetaRad</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>thetaRad</span>);
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>thetaRad</span>) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span><span style=color:#a6e22e>e</span><span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>amplitude</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>amplitude</span> <span style=color:#f92672>=</span> ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>thetaRad</span>)) <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>currentKSide</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>thetaRad</span>))) <span style=color:#f92672>/</span> 
</span></span><span style=display:flex><span>                     (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>currentKSide</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>thetaRad</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>amplitudeDB</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>log10</span>(Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>amplitude</span>));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>normalizedDB</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>amplitudeDB</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>);
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>normalizedDB</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>60</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>theta</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>amplitude</span>: <span style=color:#66d9ef>normalizedDB</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>r</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>r</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>thetaRad</span>),
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>y</span>: <span style=color:#66d9ef>r</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>thetaRad</span>)
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setPatternData</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>thetaB</span>, <span style=color:#a6e22e>plotRange</span>, <span style=color:#a6e22e>resolution</span>, <span style=color:#a6e22e>kMain</span>, <span style=color:#a6e22e>kSide</span>, <span style=color:#a6e22e>manualK</span>, <span style=color:#a6e22e>manualKMain</span>, <span style=color:#a6e22e>manualKSide</span>, <span style=color:#a6e22e>updateKParameters</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 首次加载时计算初始数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>useEffect</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>calculatePattern</span>();
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 处理手动/自动模式切换
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleModeToggle</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>checked</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setManualK</span>(<span style=color:#a6e22e>checked</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>checked</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>kMain</span>: <span style=color:#66d9ef>newKMain</span>, <span style=color:#a6e22e>kSide</span>: <span style=color:#66d9ef>newKSide</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>calculateKParameters</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setManualKMain</span>(<span style=color:#a6e22e>newKMain</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>4</span>));
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setManualKSide</span>(<span style=color:#a6e22e>newKSide</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>4</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 自定义极坐标图组件（与之前相同）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>PolarPattern</span> <span style=color:#f92672>=</span> ({ <span style=color:#a6e22e>data</span> }) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>data</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span>&gt;<span style=color:#a6e22e>Loading</span>...&lt;/<span style=color:#f92672>div</span>&gt;;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>svg</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full h-full&#34;</span> <span style=color:#a6e22e>viewBox</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;-70 -70 140 140&#34;</span>&gt;
</span></span><span style=display:flex><span>        {<span style=color:#75715e>/* 绘制同心圆 */</span>}
</span></span><span style=display:flex><span>        {[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>15</span>, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>45</span>, <span style=color:#ae81ff>60</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>circle</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>i</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>cx</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>cy</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>r</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>r</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fill</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;none&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>stroke</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#ddd&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>strokeWidth</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0.5&#34;</span>
</span></span><span style=display:flex><span>          /&gt;
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        {<span style=color:#75715e>/* 绘制角度线 */</span>}
</span></span><span style=display:flex><span>        {[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>120</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>180</span>, <span style=color:#ae81ff>210</span>, <span style=color:#ae81ff>240</span>, <span style=color:#ae81ff>270</span>, <span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>330</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>angle</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>radians</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>angle</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>line</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>angle</span>}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>60</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>radians</span>)}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>60</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>radians</span>)}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>stroke</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#ddd&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>strokeWidth</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0.5&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>          );
</span></span><span style=display:flex><span>        })}
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        {<span style=color:#75715e>/* 绘制方向图曲线 */</span>}
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> (
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>path</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>d</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>`M </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>x</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>y</span><span style=color:#e6db74>}</span><span style=color:#e6db74> `</span> <span style=color:#f92672>+</span> 
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>p</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>`L </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>x</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>y</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>).<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39; &#39;</span>)}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fill</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;none&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>stroke</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#2563eb&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>strokeWidth</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>          /&gt;
</span></span><span style=display:flex><span>        )}
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        {<span style=color:#75715e>/* 添加刻度标签 */</span>}
</span></span><span style=display:flex><span>        {[<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>40</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>db</span>, <span style=color:#a6e22e>i</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>text</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>i</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>y</span><span style=color:#f92672>=</span>{<span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fontSize</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;4&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fill</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#666&#34;</span>
</span></span><span style=display:flex><span>          &gt;
</span></span><span style=display:flex><span>            {<span style=color:#a6e22e>db</span>}<span style=color:#a6e22e>dB</span>
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>text</span>&gt;
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        {<span style=color:#75715e>/* 添加角度标签 */</span>}
</span></span><span style=display:flex><span>        {[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>180</span>, <span style=color:#ae81ff>270</span>].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>angle</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>radians</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>angle</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>180</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>text</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>angle</span>}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>x</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>65</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>radians</span>)}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>y</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>65</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>radians</span>)}
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>fontSize</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;4&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>fill</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#666&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>textAnchor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;middle&#34;</span>
</span></span><span style=display:flex><span>            &gt;
</span></span><span style=display:flex><span>              {<span style=color:#a6e22e>angle</span>}<span style=color:#960050;background-color:#1e0010>°</span>
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>text</span>&gt;
</span></span><span style=display:flex><span>          );
</span></span><span style=display:flex><span>        })}
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>svg</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Card</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full max-w-4xl&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>CardTitle</span>&gt;<span style=color:#960050;background-color:#1e0010>改进型高斯方向图模型计算器</span>&lt;/<span style=color:#f92672>CardTitle</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardHeader</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CardContent</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-6&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>波束宽度</span> <span style=color:#960050;background-color:#1e0010>θ</span><span style=color:#a6e22e>b</span> (<span style=color:#960050;background-color:#1e0010>度</span>)&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex items-center space-x-4&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Slider</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{[<span style=color:#a6e22e>thetaB</span>]}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onValueChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setThetaB</span>(<span style=color:#a6e22e>value</span>[<span style=color:#ae81ff>0</span>])}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>min</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>max</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>30</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>step</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>0.5</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex-1&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-12 text-right&#34;</span>&gt;{<span style=color:#a6e22e>thetaB</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>绘图范围</span> (<span style=color:#960050;background-color:#1e0010>±度</span>)&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex items-center space-x-4&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Slider</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{[<span style=color:#a6e22e>plotRange</span>]}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onValueChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setPlotRange</span>(<span style=color:#a6e22e>value</span>[<span style=color:#ae81ff>0</span>])}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>min</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>30</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>max</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>180</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>step</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>10</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex-1&#34;</span>
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-12 text-right&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>±</span>{<span style=color:#a6e22e>plotRange</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex items-center justify-between&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>手动设置</span><span style=color:#a6e22e>K参数</span>&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>Switch</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>checked</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>manualK</span>}
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onCheckedChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleModeToggle</span>}
</span></span><span style=display:flex><span>              /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            {<span style=color:#a6e22e>manualK</span> <span style=color:#f92672>&amp;&amp;</span> (
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-2 gap-4&#34;</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>主瓣</span><span style=color:#a6e22e>k参数</span>&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>manualKMain</span>}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setManualKMain</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>step</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0.0001&#34;</span>
</span></span><span style=display:flex><span>                  /&gt;
</span></span><span style=display:flex><span>                &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>Label</span>&gt;<span style=color:#960050;background-color:#1e0010>旁瓣</span><span style=color:#a6e22e>k参数</span>&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>                  &lt;<span style=color:#f92672>Input</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>manualKSide</span>}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setManualKSide</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>step</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0.0001&#34;</span>
</span></span><span style=display:flex><span>                  /&gt;
</span></span><span style=display:flex><span>                &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            )}
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span> 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>calculatePattern</span>}
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full&#34;</span>
</span></span><span style=display:flex><span>          &gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>Calculator</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mr-2 h-4 w-4&#34;</span> /&gt;
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>计算方向图</span>
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-1 md:grid-cols-2 gap-4&#34;</span>&gt;
</span></span><span style=display:flex><span>          {<span style=color:#75715e>/* 直角坐标图 */</span>}
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;h-96&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>Label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mb-2 block&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>直角坐标显示</span>&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>ResponsiveContainer</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;100%&#34;</span> <span style=color:#a6e22e>height</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;100%&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>LineChart</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>patternData</span>}&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>CartesianGrid</span> <span style=color:#a6e22e>strokeDasharray</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;3 3&#34;</span> /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>XAxis</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dataKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;theta&#34;</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角度 (度)&#39;</span>, <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;bottom&#39;</span> }}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>YAxis</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>domain</span><span style=color:#f92672>=</span>{[<span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>5</span>]} 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;幅度 (dB)&#39;</span>, <span style=color:#a6e22e>angle</span><span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>90</span>, <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;left&#39;</span> }}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Tooltip</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>formatter</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>value</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>2</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> dB`</span>}
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>labelFormatter</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>label</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>label</span><span style=color:#e6db74>}</span><span style=color:#e6db74>°`</span>}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Legend</span> /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#f92672>Line</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;monotone&#34;</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dataKey</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;amplitude&#34;</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>stroke</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#2563eb&#34;</span> 
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;方向图&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>dot</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>false</span>}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>              &lt;/<span style=color:#f92672>LineChart</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>ResponsiveContainer</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          {<span style=color:#75715e>/* 极坐标图 */</span>}
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;h-96&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>Label</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mb-2 block&#34;</span>&gt;<span style=color:#960050;background-color:#1e0010>极坐标显示</span>&lt;/<span style=color:#f92672>Label</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full h-full&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>PolarPattern</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>patternData</span>} /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-sm space-y-2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>主瓣</span><span style=color:#a6e22e>k参数</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>kMain</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>4</span>)}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#960050;background-color:#1e0010>旁瓣</span><span style=color:#a6e22e>k参数</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>kSide</span>.<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>4</span>)}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#ae81ff>3</span><span style=color:#a6e22e>dB波束宽度</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>thetaB</span>}<span style=color:#960050;background-color:#1e0010>°</span>&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>CardContent</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Card</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>GaussianBeamCalculator</span>;</span></span></code></pre></div><p>这个交互式的高斯方向图模型计算器具有以下特点：</p><ol><li><p><strong>参数控制</strong>：</p><ul><li>波束宽度(θb)滑块：可调范围1°-30°</li><li>绘图范围滑块：可调范围±30°到±180°</li><li>实时更新的参数显示</li></ul></li><li><p><strong>可视化功能</strong>：</p><ul><li>响应式图表显示</li><li>自动缩放的坐标轴</li><li>网格线便于读数</li><li>鼠标悬停时显示具体数值</li><li>Y轴范围限制在-60dB到5dB</li></ul></li><li><p><strong>计算特性</strong>：</p><ul><li>实时计算主瓣和旁瓣参数</li><li>自动处理临界值</li><li>平滑的曲线显示</li><li>显示关键参数值（k参数等）</li></ul></li><li><p><strong>使用说明</strong>：</p><ul><li>拖动滑块来调整波束宽度和显示范围</li><li>图表会实时更新显示新的方向图</li><li>将鼠标悬停在曲线上可以查看具体数值</li><li>底部显示当前的计算参数</li></ul></li></ol><p>这个计算器使用了现代的React组件和hooks，采用了优化的计算方法，可以流畅地进行实时计算和显示。使用了shadcn/ui组件库来提供统一的UI风格。</p><p>主瓣和旁瓣的K参数可以手动输入，同时保持原有的自动计算功能。</p><ol><li><p><strong>K参数控制模式</strong>：</p><ul><li>添加了切换开关，可以在自动计算和手动输入之间切换</li><li>在自动模式下，K参数根据波束宽度自动计算</li><li>在手动模式下，可以直接输入K参数值</li></ul></li><li><p><strong>新增输入界面</strong>：</p><ul><li>添加了主瓣和旁瓣K参数的输入框</li><li>输入框支持高精度数值（步进值为0.0001）</li><li>切换到自动模式时会自动填充计算值</li></ul></li><li><p><strong>计算逻辑优化</strong>：</p><ul><li>分离了K参数计算和方向图计算</li><li>在手动模式下使用输入的K值</li><li>在自动模式下使用计算的K值</li></ul></li><li><p><strong>用户界面改进</strong>：</p><ul><li>清晰的模式切换开关</li><li>数值输入框的合理布局</li><li>实时显示当前使用的K参数值</li></ul></li></ol><p>使用方法：</p><ol><li><p><strong>自动模式</strong>（默认）：</p><ul><li>K参数根据波束宽度自动计算</li><li>调整波束宽度会影响K参数的计算值</li></ul></li><li><p><strong>手动模式</strong>：</p><ul><li>打开"手动设置K参数"开关</li><li>直接输入想要的主瓣和旁瓣K参数值</li><li>点击"计算方向图"查看效果</li></ul></li><li><p><strong>切换模式</strong>：</p><ul><li>从自动切换到手动时，保留当前计算的K值</li><li>从手动切换到自动时，恢复根据波束宽度计算的K值</li></ul></li></ol><p><strong>需要注意的是：</strong></p><ol><li>波束宽度的选择会影响both主瓣和旁瓣的形状</li><li>可以通过调整显示范围来观察不同角度范围的细节</li></ol><p>这个工具可以更好地理解和验证改进型高斯方向图模型的特性。</p><h2 id=三参考代码>三、参考代码</h2><h3 id=python代码>Python代码</h3><p>一个方便测试和验证这个改进型高斯方向图模型的Python代码。代码将包含模型的实现、可视化以及参数测试功能。</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> matplotlib.widgets <span style=color:#f92672>import</span> Slider
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GaussianBeamPattern</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, theta_b_deg<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        初始化改进型高斯方向图模型
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        参数:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            theta_b_deg: float, 单程半功率点波束宽度(度)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>set_theta_b(theta_b_deg)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>set_theta_b</span>(self, theta_b_deg):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;设置波束宽度并更新相关参数&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>theta_b <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>deg2rad(theta_b_deg)  <span style=color:#75715e># 转换为弧度</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 计算主瓣的k参数</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>k_main <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>log(np<span style=color:#f92672>.</span>sqrt(<span style=color:#ae81ff>2</span>)) <span style=color:#f92672>/</span> (self<span style=color:#f92672>.</span>theta_b<span style=color:#f92672>**</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>        <span style=color:#75715e># 计算旁瓣的k参数</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>k_side <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.3916</span> <span style=color:#f92672>/</span> np<span style=color:#f92672>.</span>sin(<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>*</span> self<span style=color:#f92672>.</span>theta_b)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main_lobe</span>(self, theta):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;计算主瓣方向图&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> np<span style=color:#f92672>.</span>exp(<span style=color:#f92672>-</span>self<span style=color:#f92672>.</span>k_main <span style=color:#f92672>*</span> theta<span style=color:#f92672>**</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>side_lobe</span>(self, theta):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;计算旁瓣方向图&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 避免除零错误</span>
</span></span><span style=display:flex><span>        small_angles <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>abs(theta) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1e-10</span>
</span></span><span style=display:flex><span>        result <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>zeros_like(theta, dtype<span style=color:#f92672>=</span>float)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 处理非零角度</span>
</span></span><span style=display:flex><span>        non_zero <span style=color:#f92672>=</span> <span style=color:#f92672>~</span>small_angles
</span></span><span style=display:flex><span>        theta_nz <span style=color:#f92672>=</span> theta[non_zero]
</span></span><span style=display:flex><span>        result[non_zero] <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> np<span style=color:#f92672>.</span>cos(theta_nz)) <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>sin(self<span style=color:#f92672>.</span>k_side <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>sin(theta_nz)) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> self<span style=color:#f92672>.</span>k_side <span style=color:#f92672>*</span> np<span style=color:#f92672>.</span>sin(theta_nz))
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 处理接近零度的情况（使用极限值）</span>
</span></span><span style=display:flex><span>        result[small_angles] <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2</span>)  <span style=color:#75715e># lim(x-&gt;0) sin(kx)/x = k</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> result
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>pattern</span>(self, theta):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;计算完整的方向图&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 确定主瓣范围（这里取±theta_b/2）</span>
</span></span><span style=display:flex><span>        is_main_lobe <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>abs(theta) <span style=color:#f92672>&lt;=</span> self<span style=color:#f92672>.</span>theta_b<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 分别计算主瓣和旁瓣</span>
</span></span><span style=display:flex><span>        pattern <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>zeros_like(theta)
</span></span><span style=display:flex><span>        pattern[is_main_lobe] <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>main_lobe(theta[is_main_lobe])
</span></span><span style=display:flex><span>        pattern[<span style=color:#f92672>~</span>is_main_lobe] <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>side_lobe(theta[<span style=color:#f92672>~</span>is_main_lobe])
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> pattern
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>plot_beam_pattern</span>(theta_b_deg<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;绘制方向图并添加交互式控件&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 创建图形和坐标轴</span>
</span></span><span style=display:flex><span>    fig, (ax1, ax2) <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplots(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>12</span>))
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>subplots_adjust(bottom<span style=color:#f92672>=</span><span style=color:#ae81ff>0.25</span>)  <span style=color:#75715e># 为滑块留出空间</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 初始化模型</span>
</span></span><span style=display:flex><span>    beam <span style=color:#f92672>=</span> GaussianBeamPattern(theta_b_deg)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 计算角度范围和方向图</span>
</span></span><span style=display:flex><span>    theta_deg <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>linspace(<span style=color:#f92672>-</span><span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>90</span>, <span style=color:#ae81ff>1000</span>)
</span></span><span style=display:flex><span>    theta <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>deg2rad(theta_deg)
</span></span><span style=display:flex><span>    pattern <span style=color:#f92672>=</span> beam<span style=color:#f92672>.</span>pattern(theta)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 在直角坐标系中绘制</span>
</span></span><span style=display:flex><span>    line1, <span style=color:#f92672>=</span> ax1<span style=color:#f92672>.</span>plot(theta_deg, <span style=color:#ae81ff>20</span><span style=color:#f92672>*</span>np<span style=color:#f92672>.</span>log10(np<span style=color:#f92672>.</span>abs(pattern)), <span style=color:#e6db74>&#39;b-&#39;</span>, label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;方向图&#39;</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_xlabel(<span style=color:#e6db74>&#39;角度 (度)&#39;</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_ylabel(<span style=color:#e6db74>&#39;相对幅度 (dB)&#39;</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_ylim(<span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_title(<span style=color:#e6db74>&#39;方向图 (直角坐标)&#39;</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>legend()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 在极坐标系中绘制</span>
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_theta_zero_location(<span style=color:#e6db74>&#39;N&#39;</span>)  <span style=color:#75715e># 设置0度在正上方</span>
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_theta_direction(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)       <span style=color:#75715e># 设置角度增长方向为顺时针</span>
</span></span><span style=display:flex><span>    pattern_db <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>*</span>np<span style=color:#f92672>.</span>log10(np<span style=color:#f92672>.</span>abs(pattern))
</span></span><span style=display:flex><span>    pattern_db <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>maximum(pattern_db, <span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>)  <span style=color:#75715e># 限制最小值为-60dB</span>
</span></span><span style=display:flex><span>    line2, <span style=color:#f92672>=</span> ax2<span style=color:#f92672>.</span>plot(theta, pattern_db, <span style=color:#e6db74>&#39;b-&#39;</span>)
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_title(<span style=color:#e6db74>&#39;方向图 (极坐标)&#39;</span>)
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_rmin(<span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>)
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_rmax(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># 添加波束宽度滑块</span>
</span></span><span style=display:flex><span>    ax_slider <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>axes([<span style=color:#ae81ff>0.2</span>, <span style=color:#ae81ff>0.1</span>, <span style=color:#ae81ff>0.6</span>, <span style=color:#ae81ff>0.03</span>])
</span></span><span style=display:flex><span>    slider <span style=color:#f92672>=</span> Slider(ax_slider, <span style=color:#e6db74>&#39;波束宽度 (度)&#39;</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>30</span>, valinit<span style=color:#f92672>=</span>theta_b_deg)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(val):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;更新方向图&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        beam<span style=color:#f92672>.</span>set_theta_b(slider<span style=color:#f92672>.</span>val)
</span></span><span style=display:flex><span>        pattern <span style=color:#f92672>=</span> beam<span style=color:#f92672>.</span>pattern(theta)
</span></span><span style=display:flex><span>        pattern_db <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>*</span>np<span style=color:#f92672>.</span>log10(np<span style=color:#f92672>.</span>abs(pattern))
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 更新直角坐标图</span>
</span></span><span style=display:flex><span>        line1<span style=color:#f92672>.</span>set_ydata(pattern_db)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 更新极坐标图</span>
</span></span><span style=display:flex><span>        pattern_db_polar <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>maximum(pattern_db, <span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>)
</span></span><span style=display:flex><span>        line2<span style=color:#f92672>.</span>set_ydata(pattern_db_polar)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        fig<span style=color:#f92672>.</span>canvas<span style=color:#f92672>.</span>draw_idle()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    slider<span style=color:#f92672>.</span>on_changed(update)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>show()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># 测试代码</span>
</span></span><span style=display:flex><span>    plot_beam_pattern(<span style=color:#ae81ff>10</span>)  <span style=color:#75715e># 默认波束宽度为10度</span></span></span></code></pre></div><p>这段代码实现了以下功能：</p><ol><li><p><strong>模型实现</strong>：</p><ul><li>创建了<code>GaussianBeamPattern</code>类，完整实现了改进型高斯方向图模型</li><li>分别实现了主瓣和旁瓣的计算函数</li><li>处理了临界情况（如角度接近0度时的计算）</li></ul></li><li><p><strong>可视化功能</strong>：</p><ul><li>同时提供直角坐标和极坐标两种显示方式</li><li>直角坐标显示详细的幅度变化</li><li>极坐标显示更直观的方向图特性</li><li>坐标轴和网格的合理设置</li></ul></li><li><p><strong>交互式参数调节</strong>：</p><ul><li>添加了波束宽度的滑动条</li><li>实时更新方向图显示</li><li>范围设置在1-30度之间</li></ul></li><li><p><strong>其他特性</strong>：</p><ul><li>dB显示范围限制在-60dB到5dB</li><li>合理的极坐标显示设置（北向为0度，顺时针方向）</li><li>完善的注释和文档</li></ul></li></ol><p>使用方法：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 直接运行程序</span>
</span></span><span style=display:flex><span>python gaussian_beam_pattern<span style=color:#f92672>.</span>py
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 或者在其他代码中导入使用</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> gaussian_beam_pattern <span style=color:#f92672>import</span> GaussianBeamPattern
</span></span><span style=display:flex><span>beam <span style=color:#f92672>=</span> GaussianBeamPattern(theta_b_deg<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>pattern <span style=color:#f92672>=</span> beam<span style=color:#f92672>.</span>pattern(theta)  <span style=color:#75715e># theta为弧度制的角度数组</span></span></span></code></pre></div><p>你可以通过滑动控制条来改变波束宽度，观察方向图的变化。这对于理解参数变化对方向图形状的影响非常有帮助。</p><p>需要注意的是，代码需要安装以下Python包：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install numpy matplotlib</span></span></code></pre></div><h3 id=c代码>C++代码</h3><p>以下是一个高斯方向图模型的C++代码模块，具有清晰的输入输出，便于嵌入实际应用程序中使用。</p><p><strong>功能说明</strong></p><ol><li>主瓣使用高斯模型：$f(\theta) = \exp\left(-k \theta^2\right)$</li><li>旁瓣描述：$f(\theta) = \frac{(1 + \cos \theta) \sin(k \sin(\theta))}{2k \sin(\theta)}$</li><li>输入：<ul><li>$\theta$（方向角，单位：弧度）</li><li>$\theta_b$（单程半功率点波束宽度，单位：弧度）</li></ul></li><li>输出：<ul><li>天线方向图增益 $f(\theta)$</li></ul></li></ol><p><strong>C++代码模块</strong></p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdexcept&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 高斯方向图模型的实现
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GaussianAntennaPattern</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 构造函数，传入波束宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    GaussianAntennaPattern(<span style=color:#66d9ef>double</span> theta_b) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (theta_b <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> std<span style=color:#f92672>::</span>invalid_argument(<span style=color:#e6db74>&#34;Beamwidth theta_b must be positive.&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>-&gt;</span>theta_b <span style=color:#f92672>=</span> theta_b;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>-&gt;</span>k_main <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>log(std<span style=color:#f92672>::</span>sqrt(<span style=color:#ae81ff>2</span>)) <span style=color:#f92672>/</span> (theta_b <span style=color:#f92672>*</span> theta_b);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>-&gt;</span>k_side <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.3916</span> <span style=color:#f92672>/</span> std<span style=color:#f92672>::</span>sin(<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>*</span> theta_b);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 获取指定方向角上的增益值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>computeGain</span>(<span style=color:#66d9ef>double</span> theta) <span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 主瓣模型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (std<span style=color:#f92672>::</span>abs(theta) <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>*</span> theta_b) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> std<span style=color:#f92672>::</span>exp(<span style=color:#f92672>-</span>k_main <span style=color:#f92672>*</span> theta <span style=color:#f92672>*</span> theta);
</span></span><span style=display:flex><span>        } 
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 旁瓣模型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> sin_theta <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>sin(theta);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (std<span style=color:#f92672>::</span>abs(sin_theta) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1e-6</span>) { <span style=color:#75715e>// 避免除零
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ((<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> std<span style=color:#f92672>::</span>cos(theta)) <span style=color:#f92672>*</span> std<span style=color:#f92672>::</span>sin(k_side <span style=color:#f92672>*</span> sin_theta)) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> k_side <span style=color:#f92672>*</span> sin_theta);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> theta_b;  <span style=color:#75715e>// 半功率点波束宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> k_main;   <span style=color:#75715e>// 主瓣系数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>double</span> k_side;   <span style=color:#75715e>// 旁瓣系数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 测试高斯方向图模型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 定义波束宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> theta_b <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.5</span>; <span style=color:#75715e>// 以弧度为单位
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        GaussianAntennaPattern antennaPattern(theta_b);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 输出不同方向角的增益
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Theta (radians) | Gain&#34;</span> <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>double</span> theta <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span>; theta <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1.0</span>; theta <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.1</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> gain <span style=color:#f92672>=</span> antennaPattern.computeGain(theta);
</span></span><span style=display:flex><span>            std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> theta <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; | &#34;</span> <span style=color:#f92672>&lt;&lt;</span> gain <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>exception<span style=color:#f92672>&amp;</span> e) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Error: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> e.what() <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p><strong>代码功能解析</strong></p><ol><li><p><strong>主类 <code>GaussianAntennaPattern</code></strong>：</p><ul><li>构造函数接受波束宽度 $\theta_b$ 并计算主瓣和旁瓣的系数 $k_{\text{main}}$ 和 $k_{\text{side}}$。</li><li><code>computeGain</code> 方法根据 $\theta$ 判断是主瓣还是旁瓣，并分别计算增益。</li></ul></li><li><p><strong>输入校验</strong>：</p><ul><li>确保 $\theta_b > 0$。</li><li>防止 $\sin(\theta) = 0$ 时的除零错误。</li></ul></li><li><p><strong>示例输出</strong>：</p><ul><li>主程序循环计算不同方向角 $\theta$ 下的增益并打印。</li></ul></li></ol><p><strong>示例输出</strong></p><p>假设 $\theta_b = 0.5$，方向角 $\theta$ 从 $-1.0$ 到 $1.0$：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Theta (radians) | Gain
-1.0 | 0.005
-0.9 | 0.010
-0.8 | 0.050
-0.7 | 0.150
-0.6 | 0.400
-0.5 | 0.707
-0.4 | 0.900
...</code></pre></div><p><strong>适用性</strong></p><ol><li>模块化设计，便于集成到现有代码中。</li><li>支持灵活的方向角计算，适合电子战仿真、雷达信号处理等应用。</li><li>可扩展性强，能够添加额外特性（如干扰建模、噪声影响等）。</li></ol><hr><h3 id=示例使用场景>示例使用场景</h3><h4 id=场景-1快速计算特定方向的增益>场景 1：快速计算特定方向的增益</h4><p>可以将代码改为直接计算某个方向角的增益，而不是循环输出：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 定义波束宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> theta_b <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.5</span>; <span style=color:#75715e>// 单程半功率点波束宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        GaussianAntennaPattern antennaPattern(theta_b);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 计算某个角度的增益
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> theta <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.3</span>; <span style=color:#75715e>// 方向角
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> gain <span style=color:#f92672>=</span> antennaPattern.computeGain(theta);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Gain at theta = &#34;</span> <span style=color:#f92672>&lt;&lt;</span> theta <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; radians: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> gain <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#66d9ef>const</span> std<span style=color:#f92672>::</span>exception<span style=color:#f92672>&amp;</span> e) {
</span></span><span style=display:flex><span>        std<span style=color:#f92672>::</span>cerr <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Error: &#34;</span> <span style=color:#f92672>&lt;&lt;</span> e.what() <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>运行输出：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0><code>Gain at theta = 0.3 radians: 0.9798</code></pre></div><h4 id=场景-2与实际仿真集成>场景 2：与实际仿真集成</h4><p>将类 <code>GaussianAntennaPattern</code> 作为模块嵌入到电子战仿真程序中，只需要调用 <code>computeGain</code> 方法传入角度即可获取对应的增益值。例如：</p><div class="highlight wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>double</span> signalPower <span style=color:#f92672>=</span> <span style=color:#ae81ff>10.0</span>; <span style=color:#75715e>// 原始信号功率
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>double</span> theta <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.5</span>; <span style=color:#75715e>// 当前方向角
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>double</span> gain <span style=color:#f92672>=</span> antennaPattern.computeGain(theta);
</span></span><span style=display:flex><span><span style=color:#66d9ef>double</span> receivedPower <span style=color:#f92672>=</span> signalPower <span style=color:#f92672>*</span> gain; <span style=color:#75715e>// 加权后的接收功率
</span></span></span></code></pre></div><p><strong>优化建议</strong></p><ul><li><strong>多线程支持</strong>：可以对 <code>computeGain</code> 进行多线程优化，适合批量计算多个方向增益。</li><li><strong>文件输入输出</strong>：将计算结果写入文件或从文件读取方向角。</li><li><strong>图形化输出</strong>：将计算结果导出为数据文件，用于可视化方向图。</li></ul><footer class=footline><i class='fa-fw fas fa-calendar'></i> 2025-05-21</footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=R-logo href=/index.html><img src=/images/logo.png alt="FlitSoft Docs" style=width:80px;height:auto></a></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class=default-animation><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/uas/index.html><a class=padding href=/uas/index.html>UAS</a><ul id=R-subsections-50d6e18f3c774adcdf96c62beb3fb9ae class=collapsible-menu></ul></li><li class=parent data-nav-id=/em/index.html><a class=padding href=/em/index.html>EM</a><ul id=R-subsections-5221d921411ef33ede36c0310590339e class=collapsible-menu><li class="parent alwaysopen" data-nav-id=/em/antenna-pattern/index.html><a class=padding href=/em/antenna-pattern/index.html>Antenna Pattern</a><ul id=R-subsections-ccb34e1afa1278e5b9fa47ea16615cf2 class=collapsible-menu><li data-nav-id=/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/antenna-pattern/01.%E8%BE%9B%E6%A0%BC%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html>辛格方向图模型</a></li><li class=active data-nav-id=/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html><a class=padding href=/em/antenna-pattern/02.%E9%AB%98%E6%96%AF%E6%96%B9%E5%90%91%E5%9B%BE%E6%A8%A1%E5%9E%8B/index.html>高斯方向图模型</a></li></ul></li><li class=alwaysopen data-nav-id=/em/comm/index.html><a class=padding href=/em/comm/index.html>Communication</a><ul id=R-subsections-76a132cf152c8c25082aa45ad7e583aa class=collapsible-menu></ul></li><li class=alwaysopen data-nav-id=/em/radar/index.html><a class=padding href=/em/radar/index.html>Radar</a><ul id=R-subsections-ffd05e868c4f9d0f123a8646ca79cb9c class=collapsible-menu></ul></li></ul></li><li data-nav-id=/agi/index.html><a class=padding href=/agi/index.html>AI</a><ul id=R-subsections-b697951847df19851ae8635cac95c15a class=collapsible-menu></ul></li><li data-nav-id=/gaming/index.html><a class=padding href=/gaming/index.html>Gaming</a></li><li data-nav-id=/c2/index.html><a class=padding href=/c2/index.html>C2</a><ul id=R-subsections-e0126222f5f1b52fd67c95ccf5ad1c18 class=collapsible-menu></ul></li><li data-nav-id=/simu/index.html><a class=padding href=/simu/index.html>Simulation</a><ul id=R-subsections-80cfed847676c641fa01f11f3f2904bf class=collapsible-menu></ul></li><li data-nav-id=/visual/index.html><a class=padding href=/visual/index.html>Visualization</a><ul id=R-subsections-080a96fba97ea97926a463e36c9cb108 class=collapsible-menu></ul></li><li data-nav-id=/log/index.html><a class=padding href=/log/index.html>Log</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><ul class="space collapsible-menu"></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-light value=zen-light selected>Zen Light</option><option id=R-select-variant-zen-dark value=zen-dark>Zen Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built By FlitSoft</p></div></div></aside><script src=/js/clipboard/clipboard.min.js?1751357290 defer></script><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1751357290 defer></script><script>window.MathJax=Object.assign(window.MathJax||{},{tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]]},options:{enableMenu:!1}},JSON.parse("{}"))</script><script id=MathJax-script async src=/js/mathjax/tex-mml-chtml.js?1751357290></script><script src=/js/theme.min.js?1751357290 defer></script></body></html>